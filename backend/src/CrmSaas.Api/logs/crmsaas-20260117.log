2026-01-17 09:57:46.933 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 09:57:47.008 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:01:24.747 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:01:24.795 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:01:24.806 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:01:24.818 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:01:24.829 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:01:57.342 +07:00 [ERR] An error occurred while initializing the database {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Production"}
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(SqlConnectionOverrides overrides, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 327
2026-01-17 10:03:20.227 +07:00 [ERR] An error occurred while initializing the database {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Production"}
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (53): The network path was not found.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(IDbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 327
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:53,State:0,Class:20
2026-01-17 10:05:46.902 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:05:47.466 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:05:47.477 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:05:51.972 +07:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE [CrmSaas_Master_Dev]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":8,"EnvironmentName":"Development"}
2026-01-17 10:05:52.019 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CrmSaas_Master_Dev] SET READ_COMMITTED_SNAPSHOT ON;
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.068 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.087 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.138 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.233 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.271 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":8,"EnvironmentName":"Development"}
2026-01-17 10:05:52.288 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":8,"EnvironmentName":"Development"}
2026-01-17 10:05:52.321 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.351 +07:00 [INF] Applying migration '20260117025749_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.437 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.452 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.468 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.492 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.510 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.527 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.549 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.574 +07:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.600 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Introducing FOREIGN KEY constraint 'FK_UserRole_User_UserId' on table 'UserRole' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint or index. See previous errors.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 327
ClientConnectionId:4c5ed036-d6d5-4589-b0dc-aed7674eb3a4
Error Number:1785,State:0,Class:16
2026-01-17 10:05:52.673 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.685 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.707 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:05:52.904 +07:00 [FTL] Application startup exception {"EventId":{"Id":6},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
System.NullReferenceException: Object reference not set to an instance of an object.
   at Program.<>c__DisplayClass0_0.<<Main>$>b__15(CorsPolicyBuilder policy) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 157
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsOptions.AddPolicy(String name, Action`1 configurePolicy)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(CorsOptions options) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 155
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsService..ctor(IOptions`1 options, ILoggerFactory loggerFactory)
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Constructor(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2026-01-17 10:05:52.931 +07:00 [ERR] Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"SourceContext":"Microsoft.Extensions.Hosting.Internal.Host","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
System.NullReferenceException: Object reference not set to an instance of an object.
   at Program.<>c__DisplayClass0_0.<<Main>$>b__15(CorsPolicyBuilder policy) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 157
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsOptions.AddPolicy(String name, Action`1 configurePolicy)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(CorsOptions options) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 155
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsService..ctor(IOptions`1 options, ILoggerFactory loggerFactory)
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Constructor(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2026-01-17 10:05:52.967 +07:00 [FTL] Application terminated unexpectedly {"MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
System.NullReferenceException: Object reference not set to an instance of an object.
   at Program.<>c__DisplayClass0_0.<<Main>$>b__15(CorsPolicyBuilder policy) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 157
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsOptions.AddPolicy(String name, Action`1 configurePolicy)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(CorsOptions options) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 155
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsService..ctor(IOptions`1 options, ILoggerFactory loggerFactory)
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Constructor(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 352
2026-01-17 10:06:50.469 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:06:51.080 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:06:51.092 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:06:51.788 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:51.817 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:51.862 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:06:51.973 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.023 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:06:52.054 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:06:52.096 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:06:52.134 +07:00 [INF] Applying migration '20260117025749_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:06:52.204 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.218 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.234 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.248 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.262 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.278 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.294 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.317 +07:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.339 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Introducing FOREIGN KEY constraint 'FK_UserRole_User_UserId' on table 'UserRole' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint or index. See previous errors.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 327
ClientConnectionId:a76a870d-9a01-4b63-8e79-2cf4d209d58e
Error Number:1785,State:0,Class:16
2026-01-17 10:06:52.374 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.386 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.404 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.562 +07:00 [INF] Now listening on: http://localhost:5000 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.579 +07:00 [INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.591 +07:00 [INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:06:52.596 +07:00 [INF] Content root path: D:\Draft\crm\backend\src\CrmSaas.Api {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:09:36.513 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/scalar?id=069870d2-aef7-44b5-8697-e2fb9660d7ad&vscodeBrowserReqId=1768619376417 - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62O:00000001","RequestPath":"/scalar","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:36.638 +07:00 [WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNILENC7B62O:00000001","RequestPath":"/scalar","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.248 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62O:00000001","RequestPath":"/scalar","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.320 +07:00 [INF] Executing RedirectResult, redirecting to scalar/. {"EventId":{"Id":1,"Name":"RedirectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Http.Result.RedirectResult","RequestId":"0HNILENC7B62O:00000001","RequestPath":"/scalar","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.334 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62O:00000001","RequestPath":"/scalar","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.361 +07:00 [INF] HTTP GET /scalar responded 302 in 1721.1651 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILENC7B62O:00000001","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.389 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/scalar?id=069870d2-aef7-44b5-8697-e2fb9660d7ad&vscodeBrowserReqId=1768619376417 - 302 0 null 1876.7219ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62O:00000001","RequestPath":"/scalar","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.410 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/scalar/ - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62O:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.433 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62O:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.488 +07:00 [INF] Write content with HTTP Response ContentType of text/html {"EventId":{"Id":2,"Name":"WritingResultAsContent"},"SourceContext":"Microsoft.AspNetCore.Http.Result.ContentResult","RequestId":"0HNILENC7B62O:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.500 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62O:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.528 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/scalar/scalar.js - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62P:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:09:38.545 +07:00 [INF] HTTP GET /scalar/ responded 200 in 117.5894 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILENC7B62O:00000002","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.565 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62P:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:09:38.569 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/scalar/ - 200 1039 text/html 158.6474ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62O:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.597 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/scalar/scalar.aspnetcore.js - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62O:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.615 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62O:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.648 +07:00 [INF] Sending file with download name ''. {"EventId":{"Id":5,"Name":"WritingResultAsFileWithNoFileName"},"SourceContext":"Microsoft.AspNetCore.Http.Result.FileStreamResult","RequestId":"0HNILENC7B62O:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.648 +07:00 [INF] Sending file with download name ''. {"EventId":{"Id":5,"Name":"WritingResultAsFileWithNoFileName"},"SourceContext":"Microsoft.AspNetCore.Http.Result.FileStreamResult","RequestId":"0HNILENC7B62P:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:09:38.672 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62O:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.710 +07:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 200 in 94.8116 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILENC7B62O:00000003","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/scalar/scalar.aspnetcore.js - 200 418 text/javascript 143.2889ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62O:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILENC7B62O","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:38.730 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62P:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:09:38.777 +07:00 [INF] HTTP GET /scalar/scalar.js responded 200 in 219.5087 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILENC7B62P:00000001","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:09:38.818 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/scalar/scalar.js - 200 2697216 text/javascript 290.1033ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62P:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:09:38.889 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/openapi/v1.json - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62P:00000002","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:09:38.917 +07:00 [INF] Executing endpoint 'HTTP: GET /openapi/{documentName}.json' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62P:00000002","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:09:39.953 +07:00 [INF] Executed endpoint 'HTTP: GET /openapi/{documentName}.json' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILENC7B62P:00000002","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:39.965 +07:00 [INF] HTTP GET /openapi/v1.json responded 200 in 1049.1918 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILENC7B62P:00000002","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:09:39.979 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/openapi/v1.json - 200 null application/json;charset=utf-8 1090.1865ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILENC7B62P:00000002","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILENC7B62P","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 10:10:10.777 +07:00 [INF] Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:10:41.653 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:10:41.714 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:05.407 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:11.421 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:12.572 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:12.590 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:12.601 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:47.988 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:48.043 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:48.477 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:48.520 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CrmSaas_Master_Dev] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:48.538 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE [CrmSaas_Master_Dev]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:55.985 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:56.031 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:56.033 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:56.034 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:11:56.035 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:12:09.697 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:12:10.268 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:12:10.304 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:12:11.198 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE [CrmSaas_Master_Dev]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.239 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CrmSaas_Master_Dev] SET READ_COMMITTED_SNAPSHOT ON;
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.359 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.374 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.415 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.503 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.555 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:12:11.585 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:12:11.626 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:12:11.666 +07:00 [INF] Applying migration '20260117031043_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:12:11.727 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.742 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.758 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.774 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.786 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.801 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.814 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.835 +07:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.860 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Introducing FOREIGN KEY constraint 'FK_UserRole_User_UserId' on table 'UserRole' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint or index. See previous errors.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 327
ClientConnectionId:54a0e025-f19d-4819-a348-43c70abea70b
Error Number:1785,State:0,Class:16
2026-01-17 10:12:11.909 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.918 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:11.934 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:12.020 +07:00 [INF] Now listening on: http://localhost:5000 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:12.034 +07:00 [INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:12.040 +07:00 [INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:12:12.046 +07:00 [INF] Content root path: D:\Draft\crm\backend\src\CrmSaas.Api {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:13:47.924 +07:00 [INF] Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 10:14:18.923 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:14:18.974 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:14:19.419 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:14:19.455 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CrmSaas_Master_Dev] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:14:19.468 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE [CrmSaas_Master_Dev]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:14:31.999 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:14:32.581 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:14:32.595 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:14:33.311 +07:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE [CrmSaas_Master_Dev]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:14:33.359 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CrmSaas_Master_Dev] SET READ_COMMITTED_SNAPSHOT ON;
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:14:33.396 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:14:33.415 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:14:33.457 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:14:33.548 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 10:14:33.583 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 10:14:33.596 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.620 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.647 +07:00 [INF] Applying migration '20260117031043_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.711 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.725 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.741 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.761 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.779 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.804 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.826 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.852 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Role] ([Id]),
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.894 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AuditLogs_EntityType] ON [AuditLogs] ([EntityType]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.939 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AuditLogs_EntityType_EntityId] ON [AuditLogs] ([EntityType], [EntityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.960 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AuditLogs_TenantId] ON [AuditLogs] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.972 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AuditLogs_Timestamp] ON [AuditLogs] ([Timestamp]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:33.986 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AuditLogs_UserId] ON [AuditLogs] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.003 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Permissions_Code] ON [Permissions] ([Code]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.017 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserId] ON [RefreshToken] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.033 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Role_TenantId] ON [Role] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.047 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RolePermission_PermissionId] ON [RolePermission] ([PermissionId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.059 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RolePermission_RoleId] ON [RolePermission] ([RoleId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.070 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Tenants_Identifier] ON [Tenants] ([Identifier]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.086 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Tenants_Subdomain] ON [Tenants] ([Subdomain]) WHERE [Subdomain] IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.099 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_TenantId] ON [User] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.113 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRole_RoleId] ON [UserRole] ([RoleId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.132 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRole_UserId] ON [UserRole] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.153 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117031043_InitialCreate', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:34.175 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:35.271 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:35.285 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:35.317 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:35.345 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:35.362 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:36.008 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:36.020 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:36.033 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:36.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:36.065 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:14:36.078 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.093 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.106 +07:00 [INF] Applying migration '20260117031114_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.341 +07:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.369 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): There is already an object named 'Permissions' in the database.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 328
ClientConnectionId:21a511aa-1121-445a-96a2-dd5b8f03132a
Error Number:2714,State:6,Class:16
2026-01-17 10:14:36.413 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.422 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.443 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.539 +07:00 [INF] Now listening on: http://localhost:5000 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.549 +07:00 [INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.555 +07:00 [INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:14:36.563 +07:00 [INF] Content root path: D:\Draft\crm\backend\src\CrmSaas.Api {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 10:15:17.247 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/scalar?id=069870d2-aef7-44b5-8697-e2fb9660d7ad&vscodeBrowserReqId=1768619717198 - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9J:00000001","RequestPath":"/scalar","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:17.376 +07:00 [WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNILEQHP9V9J:00000001","RequestPath":"/scalar","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.579 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9J:00000001","RequestPath":"/scalar","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.599 +07:00 [INF] Executing RedirectResult, redirecting to scalar/. {"EventId":{"Id":1,"Name":"RedirectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Http.Result.RedirectResult","RequestId":"0HNILEQHP9V9J:00000001","RequestPath":"/scalar","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.609 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9J:00000001","RequestPath":"/scalar","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.622 +07:00 [INF] HTTP GET /scalar responded 302 in 1244.3863 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILEQHP9V9J:00000001","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.643 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/scalar?id=069870d2-aef7-44b5-8697-e2fb9660d7ad&vscodeBrowserReqId=1768619717198 - 302 0 null 1397.6512ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9J:00000001","RequestPath":"/scalar","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.658 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/scalar/ - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9J:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.675 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9J:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.730 +07:00 [INF] Write content with HTTP Response ContentType of text/html {"EventId":{"Id":2,"Name":"WritingResultAsContent"},"SourceContext":"Microsoft.AspNetCore.Http.Result.ContentResult","RequestId":"0HNILEQHP9V9J:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.746 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9J:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.764 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/scalar/scalar.js - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9K:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILEQHP9V9K","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 10:15:18.789 +07:00 [INF] HTTP GET /scalar/ responded 200 in 118.7540 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILEQHP9V9J:00000002","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.810 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9K:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILEQHP9V9K","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 10:15:18.817 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/scalar/ - 200 1039 text/html 158.3416ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9J:00000002","RequestPath":"/scalar/","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.850 +07:00 [INF] Setting HTTP status code 304. {"EventId":{"Id":1,"Name":"WritingResultAsStatusCode"},"SourceContext":"Microsoft.AspNetCore.Http.Result.StatusCodeResult","RequestId":"0HNILEQHP9V9K:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILEQHP9V9K","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 10:15:18.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/scalar/scalar.aspnetcore.js - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9J:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.875 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9K:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILEQHP9V9K","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 10:15:18.882 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9J:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.902 +07:00 [INF] HTTP GET /scalar/scalar.js responded 304 in 99.2915 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILEQHP9V9K:00000001","ConnectionId":"0HNILEQHP9V9K","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 10:15:18.907 +07:00 [INF] Setting HTTP status code 304. {"EventId":{"Id":1,"Name":"WritingResultAsStatusCode"},"SourceContext":"Microsoft.AspNetCore.Http.Result.StatusCodeResult","RequestId":"0HNILEQHP9V9J:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.927 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/scalar/scalar.js - 304 null null 162.767ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9K:00000001","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILEQHP9V9K","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 10:15:18.933 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9J:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.964 +07:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 304 in 82.7071 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILEQHP9V9J:00000003","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:18.973 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/scalar/scalar.aspnetcore.js - 304 null null 120.6108ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9J:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:19.035 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/openapi/v1.json - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9J:00000004","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 10:15:19.060 +07:00 [INF] Executing endpoint 'HTTP: GET /openapi/{documentName}.json' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9J:00000004","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 10:15:19.903 +07:00 [INF] Executed endpoint 'HTTP: GET /openapi/{documentName}.json' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILEQHP9V9J:00000004","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:19.919 +07:00 [INF] HTTP GET /openapi/v1.json responded 200 in 859.5006 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.108.0 Chrome/142.0.7444.235 Electron/39.2.7 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILEQHP9V9J:00000004","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:15:19.932 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/openapi/v1.json - 200 null application/json;charset=utf-8 896.9494ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILEQHP9V9J:00000004","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILEQHP9V9J","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 10:21:42.603 +07:00 [INF] Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":24,"EnvironmentName":"Development"}
2026-01-17 10:44:48.057 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:44:48.093 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:00.313 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:00.348 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:00.355 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:00.362 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:00.369 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:11.801 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:11.835 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:13.194 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:13.225 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CrmSaas_Master_Dev] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:13.256 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE [CrmSaas_Master_Dev]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:20.734 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:20.769 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.140 +07:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE [CrmSaas_Master_Dev]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.172 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CrmSaas_Master_Dev] SET READ_COMMITTED_SNAPSHOT ON;
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.190 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.199 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.221 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.266 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.280 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.287 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.301 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.314 +07:00 [INF] Applying migration '20260117034450_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.348 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'master') IS NULL EXEC(N'CREATE SCHEMA [master];'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.358 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.366 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.375 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.384 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.394 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.402 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [master].[Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:21.424 +07:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:59.883 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:45:59.943 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:20.403 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:20.466 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:20.475 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:20.487 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:20.497 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:41.393 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:41.457 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.045 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.073 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.105 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.201 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.222 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.236 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.262 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.286 +07:00 [INF] Applying migration '20260117034600_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.360 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'master') IS NULL EXEC(N'CREATE SCHEMA [master];'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.376 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.390 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.404 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.418 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.434 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.451 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [master].[Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.467 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:46:42.489 +07:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:21.485 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:21.558 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:31.609 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:31.649 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:31.655 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:31.662 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:31.668 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:44.027 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:44.063 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:44.317 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:44.351 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CrmSaas_Master_Dev] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:44.373 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE [CrmSaas_Master_Dev]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.197 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.232 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.606 +07:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE [CrmSaas_Master_Dev]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.638 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CrmSaas_Master_Dev] SET READ_COMMITTED_SNAPSHOT ON;
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.660 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.672 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.692 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.749 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.770 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.782 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.802 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.820 +07:00 [INF] Applying migration '20260117034722_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.854 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'master') IS NULL EXEC(N'CREATE SCHEMA [master];'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.868 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.881 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.895 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.909 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.920 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.929 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [master].[Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.938 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:48.952 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.242 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.283 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.293 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.303 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.312 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.854 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.874 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.899 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.961 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.979 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:53.993 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.013 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.032 +07:00 [INF] Applying migration '20260117034732_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.151 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permission] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permission] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.162 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Pipelines] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsDefault] bit NOT NULL,
    [IsActive] bit NOT NULL,
    [SortOrder] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Pipelines] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.171 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Products] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Sku] nvarchar(50) NULL,
    [Description] nvarchar(500) NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [CostPrice] decimal(18,2) NULL,
    [IsActive] bit NOT NULL,
    [Category] nvarchar(100) NULL,
    [Unit] nvarchar(50) NULL,
    [TaxRate] decimal(5,2) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Products] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.181 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Slas] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsActive] bit NOT NULL,
    [IsDefault] bit NOT NULL,
    [FirstResponseTimeLow] int NOT NULL,
    [FirstResponseTimeMedium] int NOT NULL,
    [FirstResponseTimeHigh] int NOT NULL,
    [FirstResponseTimeCritical] int NOT NULL,
    [ResolutionTimeLow] int NOT NULL,
    [ResolutionTimeMedium] int NOT NULL,
    [ResolutionTimeHigh] int NOT NULL,
    [ResolutionTimeCritical] int NOT NULL,
    [BusinessHours] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Slas] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.190 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenant] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenant] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.200 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PipelineStages] (
    [Id] uniqueidentifier NOT NULL,
    [PipelineId] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [SortOrder] int NOT NULL,
    [Probability] int NOT NULL,
    [IsWon] bit NOT NULL,
    [IsLost] bit NOT NULL,
    [Color] nvarchar(20) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_PipelineStages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PipelineStages_Pipelines_PipelineId] FOREIGN KEY ([PipelineId]) REFERENCES [Pipelines] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.210 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Roles_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.219 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.229 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RolePermissions] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermissions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermissions_Permission_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permission] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermissions_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.238 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Campaigns] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [StartDate] datetime2 NULL,
    [EndDate] datetime2 NULL,
    [Budget] decimal(18,2) NULL,
    [ActualCost] decimal(18,2) NULL,
    [Currency] nvarchar(10) NULL,
    [ExpectedRevenue] decimal(18,2) NULL,
    [ExpectedLeads] int NULL,
    [ExpectedConversions] int NULL,
    [TotalSent] int NOT NULL,
    [TotalDelivered] int NOT NULL,
    [TotalOpened] int NOT NULL,
    [TotalClicked] int NOT NULL,
    [TotalBounced] int NOT NULL,
    [TotalUnsubscribed] int NOT NULL,
    [TotalLeadsGenerated] int NOT NULL,
    [TotalConversions] int NOT NULL,
    [ActualRevenue] decimal(18,2) NULL,
    [OwnerId] uniqueidentifier NULL,
    [TargetAudience] nvarchar(100) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Campaigns] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Campaigns_Users_OwnerId] FOREIGN KEY ([OwnerId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.249 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Customers] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Type] int NOT NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [Website] nvarchar(500) NULL,
    [FirstName] nvarchar(100) NULL,
    [LastName] nvarchar(100) NULL,
    [Title] nvarchar(50) NULL,
    [DateOfBirth] datetime2 NULL,
    [CompanyName] nvarchar(200) NULL,
    [TaxId] nvarchar(50) NULL,
    [Industry] nvarchar(100) NULL,
    [EmployeeCount] int NULL,
    [AnnualRevenue] decimal(18,2) NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [Status] int NOT NULL,
    [Source] int NOT NULL,
    [SourceDetail] nvarchar(100) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [LifetimeValue] decimal(18,2) NULL,
    [CreditScore] int NULL,
    [CustomerCode] nvarchar(50) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Customers_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.259 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshTokens] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.269 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRoles] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRoles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRoles_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]),
    CONSTRAINT [FK_UserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.280 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CommunicationTemplates] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Type] int NOT NULL,
    [Subject] nvarchar(200) NULL,
    [Body] nvarchar(max) NULL,
    [HtmlBody] nvarchar(max) NULL,
    [IsActive] bit NOT NULL,
    [CampaignId] uniqueidentifier NULL,
    [Variables] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_CommunicationTemplates] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CommunicationTemplates_Campaigns_CampaignId] FOREIGN KEY ([CampaignId]) REFERENCES [Campaigns] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.302 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contacts] (
    [Id] uniqueidentifier NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [JobTitle] nvarchar(100) NULL,
    [Department] nvarchar(100) NULL,
    [IsPrimary] bit NOT NULL,
    [Status] int NOT NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [LinkedInUrl] nvarchar(200) NULL,
    [TwitterHandle] nvarchar(200) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Contacts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Contacts_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.318 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tickets] (
    [Id] uniqueidentifier NOT NULL,
    [TicketNumber] nvarchar(50) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [Priority] int NOT NULL,
    [Type] int NOT NULL,
    [Category] nvarchar(100) NULL,
    [SubCategory] nvarchar(100) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [SlaId] uniqueidentifier NULL,
    [DueDate] datetime2 NULL,
    [FirstResponseDate] datetime2 NULL,
    [ResolvedDate] datetime2 NULL,
    [ClosedDate] datetime2 NULL,
    [SatisfactionRating] int NULL,
    [SatisfactionComment] nvarchar(max) NULL,
    [SlaBreached] bit NOT NULL,
    [Channel] nvarchar(100) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Tickets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Tickets_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Tickets_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Tickets_Slas_SlaId] FOREIGN KEY ([SlaId]) REFERENCES [Slas] ([Id]),
    CONSTRAINT [FK_Tickets_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.335 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TicketComments] (
    [Id] uniqueidentifier NOT NULL,
    [TicketId] uniqueidentifier NOT NULL,
    [Content] nvarchar(max) NOT NULL,
    [IsInternal] bit NOT NULL,
    [IsFromCustomer] bit NOT NULL,
    [AuthorUserId] uniqueidentifier NULL,
    [AuthorName] nvarchar(100) NULL,
    [AuthorEmail] nvarchar(100) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_TicketComments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TicketComments_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [Tickets] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TicketComments_Users_AuthorUserId] FOREIGN KEY ([AuthorUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 10:47:54.359 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Activities] (
    [Id] uniqueidentifier NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [Priority] int NOT NULL,
    [StartDate] datetime2 NULL,
    [DueDate] datetime2 NULL,
    [CompletedDate] datetime2 NULL,
    [DurationMinutes] int NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [LeadId] uniqueidentifier NULL,
    [OpportunityId] uniqueidentifier NULL,
    [TicketId] uniqueidentifier NULL,
    [IsRecurring] bit NOT NULL,
    [RecurrencePattern] int NULL,
    [RecurrenceInterval] int NULL,
    [RecurrenceEndDate] datetime2 NULL,
    [ParentActivityId] uniqueidentifier NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Activities] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Activities_Activities_ParentActivityId] FOREIGN KEY ([ParentActivityId]) REFERENCES [Activities] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Activities_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Activities_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Activities_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [Tickets] ([Id]),
    CONSTRAINT [FK_Activities_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:18:47.125 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:18:47.181 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:18:57.962 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:18:58.008 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:18:58.018 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:18:58.027 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:18:58.035 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:18:58.083 +07:00 [WRN] The foreign key property 'Activity.LeadId1' was created in shadow state because a conflicting property with the simple name 'LeadId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:18:58.090 +07:00 [WRN] The foreign key property 'Activity.OpportunityId1' was created in shadow state because a conflicting property with the simple name 'OpportunityId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. {"EventId":{"Id":10625,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.ShadowForeignKeyPropertyCreated"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:19:47.594 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:19:47.624 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:19:54.996 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:19:55.034 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:19:55.042 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:19:55.049 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:19:55.057 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:14.214 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:14.245 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.623 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.649 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.684 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.753 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.771 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.802 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.817 +07:00 [INF] Applying migration '20260117041947_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.854 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'master') IS NULL EXEC(N'CREATE SCHEMA [master];'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.866 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.877 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.886 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.898 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.910 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.926 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [master].[Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.940 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:15.958 +07:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:19.912 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:19.948 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:19.955 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:19.961 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:19.968 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.457 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.474 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.497 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.551 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.565 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.574 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.589 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.605 +07:00 [INF] Applying migration '20260117041955_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.715 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permission] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permission] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.722 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Pipelines] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsDefault] bit NOT NULL,
    [IsActive] bit NOT NULL,
    [SortOrder] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Pipelines] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Products] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Sku] nvarchar(50) NULL,
    [Description] nvarchar(500) NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [CostPrice] decimal(18,2) NULL,
    [IsActive] bit NOT NULL,
    [Category] nvarchar(100) NULL,
    [Unit] nvarchar(50) NULL,
    [TaxRate] decimal(5,2) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Products] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.740 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Slas] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsActive] bit NOT NULL,
    [IsDefault] bit NOT NULL,
    [FirstResponseTimeLow] int NOT NULL,
    [FirstResponseTimeMedium] int NOT NULL,
    [FirstResponseTimeHigh] int NOT NULL,
    [FirstResponseTimeCritical] int NOT NULL,
    [ResolutionTimeLow] int NOT NULL,
    [ResolutionTimeMedium] int NOT NULL,
    [ResolutionTimeHigh] int NOT NULL,
    [ResolutionTimeCritical] int NOT NULL,
    [BusinessHours] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Slas] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenant] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenant] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.759 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PipelineStages] (
    [Id] uniqueidentifier NOT NULL,
    [PipelineId] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [SortOrder] int NOT NULL,
    [Probability] int NOT NULL,
    [IsWon] bit NOT NULL,
    [IsLost] bit NOT NULL,
    [Color] nvarchar(20) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_PipelineStages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PipelineStages_Pipelines_PipelineId] FOREIGN KEY ([PipelineId]) REFERENCES [Pipelines] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.767 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Roles_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.778 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.787 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RolePermissions] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermissions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermissions_Permission_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permission] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermissions_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.797 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Campaigns] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [StartDate] datetime2 NULL,
    [EndDate] datetime2 NULL,
    [Budget] decimal(18,2) NULL,
    [ActualCost] decimal(18,2) NULL,
    [Currency] nvarchar(10) NULL,
    [ExpectedRevenue] decimal(18,2) NULL,
    [ExpectedLeads] int NULL,
    [ExpectedConversions] int NULL,
    [TotalSent] int NOT NULL,
    [TotalDelivered] int NOT NULL,
    [TotalOpened] int NOT NULL,
    [TotalClicked] int NOT NULL,
    [TotalBounced] int NOT NULL,
    [TotalUnsubscribed] int NOT NULL,
    [TotalLeadsGenerated] int NOT NULL,
    [TotalConversions] int NOT NULL,
    [ActualRevenue] decimal(18,2) NULL,
    [OwnerId] uniqueidentifier NULL,
    [TargetAudience] nvarchar(100) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Campaigns] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Campaigns_Users_OwnerId] FOREIGN KEY ([OwnerId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.808 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Customers] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Type] int NOT NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [Website] nvarchar(500) NULL,
    [FirstName] nvarchar(100) NULL,
    [LastName] nvarchar(100) NULL,
    [Title] nvarchar(50) NULL,
    [DateOfBirth] datetime2 NULL,
    [CompanyName] nvarchar(200) NULL,
    [TaxId] nvarchar(50) NULL,
    [Industry] nvarchar(100) NULL,
    [EmployeeCount] int NULL,
    [AnnualRevenue] decimal(18,2) NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [Status] int NOT NULL,
    [Source] int NOT NULL,
    [SourceDetail] nvarchar(100) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [LifetimeValue] decimal(18,2) NULL,
    [CreditScore] int NULL,
    [CustomerCode] nvarchar(50) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Customers_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.817 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshTokens] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.827 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRoles] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRoles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRoles_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]),
    CONSTRAINT [FK_UserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.836 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CommunicationTemplates] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Type] int NOT NULL,
    [Subject] nvarchar(200) NULL,
    [Body] nvarchar(max) NULL,
    [HtmlBody] nvarchar(max) NULL,
    [IsActive] bit NOT NULL,
    [CampaignId] uniqueidentifier NULL,
    [Variables] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_CommunicationTemplates] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CommunicationTemplates_Campaigns_CampaignId] FOREIGN KEY ([CampaignId]) REFERENCES [Campaigns] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.856 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contacts] (
    [Id] uniqueidentifier NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [JobTitle] nvarchar(100) NULL,
    [Department] nvarchar(100) NULL,
    [IsPrimary] bit NOT NULL,
    [Status] int NOT NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [LinkedInUrl] nvarchar(200) NULL,
    [TwitterHandle] nvarchar(200) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Contacts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Contacts_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.868 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tickets] (
    [Id] uniqueidentifier NOT NULL,
    [TicketNumber] nvarchar(50) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [Priority] int NOT NULL,
    [Type] int NOT NULL,
    [Category] nvarchar(100) NULL,
    [SubCategory] nvarchar(100) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [SlaId] uniqueidentifier NULL,
    [DueDate] datetime2 NULL,
    [FirstResponseDate] datetime2 NULL,
    [ResolvedDate] datetime2 NULL,
    [ClosedDate] datetime2 NULL,
    [SatisfactionRating] int NULL,
    [SatisfactionComment] nvarchar(max) NULL,
    [SlaBreached] bit NOT NULL,
    [Channel] nvarchar(100) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Tickets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Tickets_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Tickets_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Tickets_Slas_SlaId] FOREIGN KEY ([SlaId]) REFERENCES [Slas] ([Id]),
    CONSTRAINT [FK_Tickets_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.879 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TicketComments] (
    [Id] uniqueidentifier NOT NULL,
    [TicketId] uniqueidentifier NOT NULL,
    [Content] nvarchar(max) NOT NULL,
    [IsInternal] bit NOT NULL,
    [IsFromCustomer] bit NOT NULL,
    [AuthorUserId] uniqueidentifier NULL,
    [AuthorName] nvarchar(100) NULL,
    [AuthorEmail] nvarchar(100) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_TicketComments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TicketComments_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [Tickets] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TicketComments_Users_AuthorUserId] FOREIGN KEY ([AuthorUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:20:20.897 +07:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Activities] (
    [Id] uniqueidentifier NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [Priority] int NOT NULL,
    [StartDate] datetime2 NULL,
    [DueDate] datetime2 NULL,
    [CompletedDate] datetime2 NULL,
    [DurationMinutes] int NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [LeadId] uniqueidentifier NULL,
    [OpportunityId] uniqueidentifier NULL,
    [TicketId] uniqueidentifier NULL,
    [IsRecurring] bit NOT NULL,
    [RecurrencePattern] int NULL,
    [RecurrenceInterval] int NULL,
    [RecurrenceEndDate] datetime2 NULL,
    [ParentActivityId] uniqueidentifier NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Activities] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Activities_Activities_ParentActivityId] FOREIGN KEY ([ParentActivityId]) REFERENCES [Activities] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Activities_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Activities_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Activities_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [Tickets] ([Id]),
    CONSTRAINT [FK_Activities_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:20.160 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:20.200 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:27.447 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:27.478 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:27.486 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:27.492 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:27.499 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.289 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.320 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.633 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.647 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.665 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.714 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.727 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.735 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.749 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.762 +07:00 [INF] Applying migration '20260117042220_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.794 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'master') IS NULL EXEC(N'CREATE SCHEMA [master];'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.803 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.813 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.822 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.832 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.842 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.851 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [master].[Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.860 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:39.873 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:43.793 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:43.827 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:43.835 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:43.842 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:43.849 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.323 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.337 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.356 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.405 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.419 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.427 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.441 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.455 +07:00 [INF] Applying migration '20260117042228_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.564 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permission] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permission] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.572 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Pipelines] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsDefault] bit NOT NULL,
    [IsActive] bit NOT NULL,
    [SortOrder] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Pipelines] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.581 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Products] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Sku] nvarchar(50) NULL,
    [Description] nvarchar(500) NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [CostPrice] decimal(18,2) NULL,
    [IsActive] bit NOT NULL,
    [Category] nvarchar(100) NULL,
    [Unit] nvarchar(50) NULL,
    [TaxRate] decimal(5,2) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Products] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.590 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Slas] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsActive] bit NOT NULL,
    [IsDefault] bit NOT NULL,
    [FirstResponseTimeLow] int NOT NULL,
    [FirstResponseTimeMedium] int NOT NULL,
    [FirstResponseTimeHigh] int NOT NULL,
    [FirstResponseTimeCritical] int NOT NULL,
    [ResolutionTimeLow] int NOT NULL,
    [ResolutionTimeMedium] int NOT NULL,
    [ResolutionTimeHigh] int NOT NULL,
    [ResolutionTimeCritical] int NOT NULL,
    [BusinessHours] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Slas] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.600 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenant] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenant] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.609 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PipelineStages] (
    [Id] uniqueidentifier NOT NULL,
    [PipelineId] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [SortOrder] int NOT NULL,
    [Probability] int NOT NULL,
    [IsWon] bit NOT NULL,
    [IsLost] bit NOT NULL,
    [Color] nvarchar(20) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_PipelineStages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PipelineStages_Pipelines_PipelineId] FOREIGN KEY ([PipelineId]) REFERENCES [Pipelines] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Roles_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.629 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.638 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RolePermissions] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermissions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermissions_Permission_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permission] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermissions_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.648 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Campaigns] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [StartDate] datetime2 NULL,
    [EndDate] datetime2 NULL,
    [Budget] decimal(18,2) NULL,
    [ActualCost] decimal(18,2) NULL,
    [Currency] nvarchar(10) NULL,
    [ExpectedRevenue] decimal(18,2) NULL,
    [ExpectedLeads] int NULL,
    [ExpectedConversions] int NULL,
    [TotalSent] int NOT NULL,
    [TotalDelivered] int NOT NULL,
    [TotalOpened] int NOT NULL,
    [TotalClicked] int NOT NULL,
    [TotalBounced] int NOT NULL,
    [TotalUnsubscribed] int NOT NULL,
    [TotalLeadsGenerated] int NOT NULL,
    [TotalConversions] int NOT NULL,
    [ActualRevenue] decimal(18,2) NULL,
    [OwnerId] uniqueidentifier NULL,
    [TargetAudience] nvarchar(100) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Campaigns] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Campaigns_Users_OwnerId] FOREIGN KEY ([OwnerId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.661 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Customers] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Type] int NOT NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [Website] nvarchar(500) NULL,
    [FirstName] nvarchar(100) NULL,
    [LastName] nvarchar(100) NULL,
    [Title] nvarchar(50) NULL,
    [DateOfBirth] datetime2 NULL,
    [CompanyName] nvarchar(200) NULL,
    [TaxId] nvarchar(50) NULL,
    [Industry] nvarchar(100) NULL,
    [EmployeeCount] int NULL,
    [AnnualRevenue] decimal(18,2) NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [Status] int NOT NULL,
    [Source] int NOT NULL,
    [SourceDetail] nvarchar(100) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [LifetimeValue] decimal(18,2) NULL,
    [CreditScore] int NULL,
    [CustomerCode] nvarchar(50) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Customers_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.673 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshTokens] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.684 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRoles] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRoles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRoles_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]),
    CONSTRAINT [FK_UserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.697 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CommunicationTemplates] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Type] int NOT NULL,
    [Subject] nvarchar(200) NULL,
    [Body] nvarchar(max) NULL,
    [HtmlBody] nvarchar(max) NULL,
    [IsActive] bit NOT NULL,
    [CampaignId] uniqueidentifier NULL,
    [Variables] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_CommunicationTemplates] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CommunicationTemplates_Campaigns_CampaignId] FOREIGN KEY ([CampaignId]) REFERENCES [Campaigns] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.710 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contacts] (
    [Id] uniqueidentifier NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [JobTitle] nvarchar(100) NULL,
    [Department] nvarchar(100) NULL,
    [IsPrimary] bit NOT NULL,
    [Status] int NOT NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [LinkedInUrl] nvarchar(200) NULL,
    [TwitterHandle] nvarchar(200) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Contacts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Contacts_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.730 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tickets] (
    [Id] uniqueidentifier NOT NULL,
    [TicketNumber] nvarchar(50) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [Priority] int NOT NULL,
    [Type] int NOT NULL,
    [Category] nvarchar(100) NULL,
    [SubCategory] nvarchar(100) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [SlaId] uniqueidentifier NULL,
    [DueDate] datetime2 NULL,
    [FirstResponseDate] datetime2 NULL,
    [ResolvedDate] datetime2 NULL,
    [ClosedDate] datetime2 NULL,
    [SatisfactionRating] int NULL,
    [SatisfactionComment] nvarchar(max) NULL,
    [SlaBreached] bit NOT NULL,
    [Channel] nvarchar(100) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Tickets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Tickets_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Tickets_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Tickets_Slas_SlaId] FOREIGN KEY ([SlaId]) REFERENCES [Slas] ([Id]),
    CONSTRAINT [FK_Tickets_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.742 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TicketComments] (
    [Id] uniqueidentifier NOT NULL,
    [TicketId] uniqueidentifier NOT NULL,
    [Content] nvarchar(max) NOT NULL,
    [IsInternal] bit NOT NULL,
    [IsFromCustomer] bit NOT NULL,
    [AuthorUserId] uniqueidentifier NULL,
    [AuthorName] nvarchar(100) NULL,
    [AuthorEmail] nvarchar(100) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_TicketComments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TicketComments_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [Tickets] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TicketComments_Users_AuthorUserId] FOREIGN KEY ([AuthorUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.752 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Activities] (
    [Id] uniqueidentifier NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [Priority] int NOT NULL,
    [StartDate] datetime2 NULL,
    [DueDate] datetime2 NULL,
    [CompletedDate] datetime2 NULL,
    [DurationMinutes] int NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [LeadId] uniqueidentifier NULL,
    [OpportunityId] uniqueidentifier NULL,
    [TicketId] uniqueidentifier NULL,
    [IsRecurring] bit NOT NULL,
    [RecurrencePattern] int NULL,
    [RecurrenceInterval] int NULL,
    [RecurrenceEndDate] datetime2 NULL,
    [ParentActivityId] uniqueidentifier NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Activities] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Activities_Activities_ParentActivityId] FOREIGN KEY ([ParentActivityId]) REFERENCES [Activities] ([Id]),
    CONSTRAINT [FK_Activities_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Activities_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Activities_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [Tickets] ([Id]),
    CONSTRAINT [FK_Activities_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.763 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Reminders] (
    [Id] uniqueidentifier NOT NULL,
    [ActivityId] uniqueidentifier NULL,
    [Subject] nvarchar(200) NULL,
    [Message] nvarchar(max) NULL,
    [ReminderDate] datetime2 NOT NULL,
    [Method] int NOT NULL,
    [IsSent] bit NOT NULL,
    [SentAt] datetime2 NULL,
    [UserId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Reminders] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Reminders_Activities_ActivityId] FOREIGN KEY ([ActivityId]) REFERENCES [Activities] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Reminders_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.783 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CampaignMembers] (
    [Id] uniqueidentifier NOT NULL,
    [CampaignId] uniqueidentifier NOT NULL,
    [LeadId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [SentAt] datetime2 NULL,
    [OpenedAt] datetime2 NULL,
    [ClickedAt] datetime2 NULL,
    [RespondedAt] datetime2 NULL,
    [ConvertedAt] datetime2 NULL,
    [Response] nvarchar(500) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_CampaignMembers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CampaignMembers_Campaigns_CampaignId] FOREIGN KEY ([CampaignId]) REFERENCES [Campaigns] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CampaignMembers_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.800 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contracts] (
    [Id] uniqueidentifier NOT NULL,
    [ContractNumber] nvarchar(50) NOT NULL,
    [Title] nvarchar(200) NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [OrderId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [SignedDate] datetime2 NULL,
    [RenewalDate] datetime2 NULL,
    [AutoRenew] bit NOT NULL,
    [RenewalPeriodMonths] int NULL,
    [NoticePeriodDays] int NULL,
    [Value] decimal(18,2) NOT NULL,
    [BillingFrequency] int NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [Terms] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [DocumentUrl] nvarchar(500) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [SignedByUserId] uniqueidentifier NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Contracts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Contracts_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Contracts_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Contracts_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id]),
    CONSTRAINT [FK_Contracts_Users_SignedByUserId] FOREIGN KEY ([SignedByUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.818 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Interactions] (
    [Id] uniqueidentifier NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [LeadId] uniqueidentifier NULL,
    [OpportunityId] uniqueidentifier NULL,
    [Type] int NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [InteractionDate] datetime2 NOT NULL,
    [DurationMinutes] int NULL,
    [Direction] int NOT NULL,
    [Outcome] int NOT NULL,
    [PerformedByUserId] uniqueidentifier NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Interactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Interactions_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Interactions_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Interactions_Users_PerformedByUserId] FOREIGN KEY ([PerformedByUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.833 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Leads] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(200) NOT NULL,
    [FirstName] nvarchar(100) NULL,
    [LastName] nvarchar(100) NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [CompanyName] nvarchar(200) NULL,
    [JobTitle] nvarchar(100) NULL,
    [Industry] nvarchar(100) NULL,
    [EmployeeCount] int NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [Status] int NOT NULL,
    [Source] int NOT NULL,
    [SourceDetail] nvarchar(200) NULL,
    [Score] int NOT NULL,
    [Rating] int NOT NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [AssignedAt] datetime2 NULL,
    [ConvertedToCustomerId] uniqueidentifier NULL,
    [ConvertedToOpportunityId] uniqueidentifier NULL,
    [ConvertedAt] datetime2 NULL,
    [ConvertedByUserId] uniqueidentifier NULL,
    [EstimatedValue] decimal(18,2) NULL,
    [Currency] nvarchar(10) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [CustomerId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Leads] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Leads_Customers_ConvertedToCustomerId] FOREIGN KEY ([ConvertedToCustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Leads_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Leads_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id]),
    CONSTRAINT [FK_Leads_Users_ConvertedByUserId] FOREIGN KEY ([ConvertedByUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.848 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Opportunities] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [PrimaryContactId] uniqueidentifier NULL,
    [PipelineId] uniqueidentifier NOT NULL,
    [StageId] uniqueidentifier NOT NULL,
    [Status] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [Probability] int NOT NULL,
    [ExpectedCloseDate] datetime2 NULL,
    [ActualCloseDate] datetime2 NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [LossReason] nvarchar(200) NULL,
    [WinReason] nvarchar(200) NULL,
    [CompetitorName] nvarchar(200) NULL,
    [Type] int NOT NULL,
    [Priority] int NOT NULL,
    [SourceLeadId] uniqueidentifier NULL,
    [SourceCampaignId] uniqueidentifier NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Opportunities] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Opportunities_Campaigns_SourceCampaignId] FOREIGN KEY ([SourceCampaignId]) REFERENCES [Campaigns] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Opportunities_Contacts_PrimaryContactId] FOREIGN KEY ([PrimaryContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Opportunities_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Opportunities_Leads_SourceLeadId] FOREIGN KEY ([SourceLeadId]) REFERENCES [Leads] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Opportunities_PipelineStages_StageId] FOREIGN KEY ([StageId]) REFERENCES [PipelineStages] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Opportunities_Pipelines_PipelineId] FOREIGN KEY ([PipelineId]) REFERENCES [Pipelines] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Opportunities_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.861 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderItems] (
    [Id] uniqueidentifier NOT NULL,
    [OrderId] uniqueidentifier NOT NULL,
    [ProductId] uniqueidentifier NULL,
    [Description] nvarchar(200) NULL,
    [Quantity] decimal(18,4) NOT NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [DiscountPercent] decimal(5,2) NOT NULL,
    [DiscountAmount] decimal(18,2) NOT NULL,
    [TaxPercent] decimal(5,2) NOT NULL,
    [TaxAmount] decimal(18,2) NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    [SortOrder] int NOT NULL,
    CONSTRAINT [PK_OrderItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderItems_Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Products] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.874 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Orders] (
    [Id] uniqueidentifier NOT NULL,
    [OrderNumber] nvarchar(50) NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [QuotationId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [OrderDate] datetime2 NOT NULL,
    [DeliveryDate] datetime2 NULL,
    [SubTotal] decimal(18,2) NOT NULL,
    [DiscountAmount] decimal(18,2) NOT NULL,
    [DiscountPercent] decimal(5,2) NOT NULL,
    [TaxAmount] decimal(18,2) NOT NULL,
    [ShippingAmount] decimal(18,2) NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    [PaidAmount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [ExchangeRate] decimal(18,6) NULL,
    [BillingAddress] nvarchar(500) NULL,
    [ShippingAddress] nvarchar(500) NULL,
    [PaymentStatus] int NOT NULL,
    [PaymentMethod] nvarchar(50) NULL,
    [PaymentReference] nvarchar(100) NULL,
    [Terms] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [InternalNotes] nvarchar(max) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Orders] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Orders_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Orders_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Orders_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.889 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Quotations] (
    [Id] uniqueidentifier NOT NULL,
    [QuotationNumber] nvarchar(50) NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [OpportunityId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [QuotationDate] datetime2 NOT NULL,
    [ExpiryDate] datetime2 NULL,
    [SubTotal] decimal(18,2) NOT NULL,
    [DiscountAmount] decimal(18,2) NOT NULL,
    [DiscountPercent] decimal(5,2) NOT NULL,
    [TaxAmount] decimal(18,2) NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [ExchangeRate] decimal(18,6) NULL,
    [BillingAddress] nvarchar(500) NULL,
    [ShippingAddress] nvarchar(500) NULL,
    [Terms] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [ConvertedToOrderId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Quotations] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Quotations_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Quotations_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Quotations_Opportunities_OpportunityId] FOREIGN KEY ([OpportunityId]) REFERENCES [Opportunities] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Quotations_Orders_ConvertedToOrderId] FOREIGN KEY ([ConvertedToOrderId]) REFERENCES [Orders] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Quotations_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.901 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [QuotationItems] (
    [Id] uniqueidentifier NOT NULL,
    [QuotationId] uniqueidentifier NOT NULL,
    [ProductId] uniqueidentifier NULL,
    [Description] nvarchar(200) NULL,
    [Quantity] decimal(18,4) NOT NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [DiscountPercent] decimal(5,2) NOT NULL,
    [DiscountAmount] decimal(18,2) NOT NULL,
    [TaxPercent] decimal(5,2) NOT NULL,
    [TaxAmount] decimal(18,2) NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    [SortOrder] int NOT NULL,
    CONSTRAINT [PK_QuotationItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_QuotationItems_Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Products] ([Id]),
    CONSTRAINT [FK_QuotationItems_Quotations_QuotationId] FOREIGN KEY ([QuotationId]) REFERENCES [Quotations] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.914 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_AssignedToUserId] ON [Activities] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.926 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_ContactId] ON [Activities] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.934 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_CustomerId] ON [Activities] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.943 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_DueDate] ON [Activities] ([DueDate]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.950 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_LeadId] ON [Activities] ([LeadId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.957 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_OpportunityId] ON [Activities] ([OpportunityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.967 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_ParentActivityId] ON [Activities] ([ParentActivityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.975 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_TenantId] ON [Activities] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.983 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_TicketId] ON [Activities] ([TicketId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CampaignMembers_CampaignId] ON [CampaignMembers] ([CampaignId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:44.999 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CampaignMembers_ContactId] ON [CampaignMembers] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.009 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CampaignMembers_LeadId] ON [CampaignMembers] ([LeadId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.017 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Campaigns_OwnerId] ON [Campaigns] ([OwnerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.026 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Campaigns_TenantId] ON [Campaigns] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.034 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CommunicationTemplates_CampaignId] ON [CommunicationTemplates] ([CampaignId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.044 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CommunicationTemplates_TenantId] ON [CommunicationTemplates] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contacts_CustomerId] ON [Contacts] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.063 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contacts_TenantId] ON [Contacts] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.073 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_AssignedToUserId] ON [Contracts] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.083 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_ContactId] ON [Contracts] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.091 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_CustomerId] ON [Contracts] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_OrderId] ON [Contracts] ([OrderId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.111 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_SignedByUserId] ON [Contracts] ([SignedByUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.121 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_TenantId] ON [Contracts] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.131 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Contracts_TenantId_ContractNumber] ON [Contracts] ([TenantId], [ContractNumber]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.139 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Customers_AssignedToUserId] ON [Customers] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.149 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Customers_TenantId] ON [Customers] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.158 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Customers_TenantId_CustomerCode] ON [Customers] ([TenantId], [CustomerCode]) WHERE [CustomerCode] IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.170 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Customers_TenantId_Email] ON [Customers] ([TenantId], [Email]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.180 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_ContactId] ON [Interactions] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.193 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_CustomerId] ON [Interactions] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.206 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_InteractionDate] ON [Interactions] ([InteractionDate]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.218 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_LeadId] ON [Interactions] ([LeadId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_OpportunityId] ON [Interactions] ([OpportunityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.242 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_PerformedByUserId] ON [Interactions] ([PerformedByUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.253 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_TenantId] ON [Interactions] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.263 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_AssignedToUserId] ON [Leads] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.273 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_ConvertedByUserId] ON [Leads] ([ConvertedByUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.283 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_ConvertedToCustomerId] ON [Leads] ([ConvertedToCustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.291 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Leads_ConvertedToOpportunityId] ON [Leads] ([ConvertedToOpportunityId]) WHERE [ConvertedToOpportunityId] IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_CustomerId] ON [Leads] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.310 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_TenantId] ON [Leads] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.320 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_TenantId_Email] ON [Leads] ([TenantId], [Email]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.330 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_TenantId_Status] ON [Leads] ([TenantId], [Status]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.339 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_AssignedToUserId] ON [Opportunities] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_CustomerId] ON [Opportunities] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.359 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_PipelineId] ON [Opportunities] ([PipelineId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.369 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_PrimaryContactId] ON [Opportunities] ([PrimaryContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.376 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_SourceCampaignId] ON [Opportunities] ([SourceCampaignId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.383 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_SourceLeadId] ON [Opportunities] ([SourceLeadId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.390 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_StageId] ON [Opportunities] ([StageId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.398 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_TenantId] ON [Opportunities] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.405 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_TenantId_Status] ON [Opportunities] ([TenantId], [Status]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.413 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderItems_OrderId] ON [OrderItems] ([OrderId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.423 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderItems_ProductId] ON [OrderItems] ([ProductId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.431 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_AssignedToUserId] ON [Orders] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.438 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_ContactId] ON [Orders] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.446 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_CustomerId] ON [Orders] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.452 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_QuotationId] ON [Orders] ([QuotationId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.460 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_TenantId] ON [Orders] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.466 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Orders_TenantId_OrderNumber] ON [Orders] ([TenantId], [OrderNumber]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.474 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Pipelines_TenantId] ON [Pipelines] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.481 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PipelineStages_PipelineId] ON [PipelineStages] ([PipelineId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.488 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Products_TenantId] ON [Products] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Products_TenantId_Sku] ON [Products] ([TenantId], [Sku]) WHERE [Sku] IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.503 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuotationItems_ProductId] ON [QuotationItems] ([ProductId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.510 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuotationItems_QuotationId] ON [QuotationItems] ([QuotationId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.518 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_AssignedToUserId] ON [Quotations] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.525 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_ContactId] ON [Quotations] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.532 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Quotations_ConvertedToOrderId] ON [Quotations] ([ConvertedToOrderId]) WHERE [ConvertedToOrderId] IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.539 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_CustomerId] ON [Quotations] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_OpportunityId] ON [Quotations] ([OpportunityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.554 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_TenantId] ON [Quotations] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.562 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Quotations_TenantId_QuotationNumber] ON [Quotations] ([TenantId], [QuotationNumber]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.569 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_RefreshTokens_Token] ON [RefreshTokens] ([Token]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.578 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshTokens_UserId] ON [RefreshTokens] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.587 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reminders_ActivityId] ON [Reminders] ([ActivityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reminders_ReminderDate] ON [Reminders] ([ReminderDate]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.603 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reminders_TenantId] ON [Reminders] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.613 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reminders_UserId] ON [Reminders] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.623 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RolePermissions_PermissionId] ON [RolePermissions] ([PermissionId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.633 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_RolePermissions_RoleId_PermissionId] ON [RolePermissions] ([RoleId], [PermissionId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.643 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_TenantId_Name] ON [Roles] ([TenantId], [Name]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.653 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Slas_TenantId] ON [Slas] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.662 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TicketComments_AuthorUserId] ON [TicketComments] ([AuthorUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.674 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TicketComments_TicketId] ON [TicketComments] ([TicketId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.686 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_AssignedToUserId] ON [Tickets] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.698 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_ContactId] ON [Tickets] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.709 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_CustomerId] ON [Tickets] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.721 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_SlaId] ON [Tickets] ([SlaId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_TenantId] ON [Tickets] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.743 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_TenantId_Status] ON [Tickets] ([TenantId], [Status]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.755 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Tickets_TenantId_TicketNumber] ON [Tickets] ([TenantId], [TicketNumber]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.763 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRoles_RoleId] ON [UserRoles] ([RoleId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.772 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserRoles_UserId_RoleId] ON [UserRoles] ([UserId], [RoleId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.780 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_TenantId_Email] ON [Users] ([TenantId], [Email]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.788 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Activities] ADD CONSTRAINT [FK_Activities_Leads_LeadId] FOREIGN KEY ([LeadId]) REFERENCES [Leads] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.796 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Activities] ADD CONSTRAINT [FK_Activities_Opportunities_OpportunityId] FOREIGN KEY ([OpportunityId]) REFERENCES [Opportunities] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.804 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CampaignMembers] ADD CONSTRAINT [FK_CampaignMembers_Leads_LeadId] FOREIGN KEY ([LeadId]) REFERENCES [Leads] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.812 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Contracts] ADD CONSTRAINT [FK_Contracts_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.822 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Interactions] ADD CONSTRAINT [FK_Interactions_Leads_LeadId] FOREIGN KEY ([LeadId]) REFERENCES [Leads] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.833 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Interactions] ADD CONSTRAINT [FK_Interactions_Opportunities_OpportunityId] FOREIGN KEY ([OpportunityId]) REFERENCES [Opportunities] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.845 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Leads] ADD CONSTRAINT [FK_Leads_Opportunities_ConvertedToOpportunityId] FOREIGN KEY ([ConvertedToOpportunityId]) REFERENCES [Opportunities] ([Id]) ON DELETE SET NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.856 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OrderItems] ADD CONSTRAINT [FK_OrderItems_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([Id]) ON DELETE CASCADE; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.867 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Orders] ADD CONSTRAINT [FK_Orders_Quotations_QuotationId] FOREIGN KEY ([QuotationId]) REFERENCES [Quotations] ([Id]) ON DELETE SET NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.882 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117042228_InitialCreate', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:22:45.896 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:15.768 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:15.806 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:15.812 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:15.819 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:15.826 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:15.832 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:31.726 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:31.761 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:31.768 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:31.774 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:31.780 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:31.788 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.365 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.378 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.401 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.451 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.463 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.471 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.486 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.499 +07:00 [INF] Applying migration '20260117044117_AddWorkflowEngine'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.600 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Workflows] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [TriggerType] int NOT NULL,
    [TriggerFields] nvarchar(max) NULL,
    [ScheduleExpression] nvarchar(max) NULL,
    [IsActive] bit NOT NULL,
    [ExecutionOrder] int NOT NULL,
    [StopOnMatch] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Workflows] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.608 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkflowExecutionLogs] (
    [Id] uniqueidentifier NOT NULL,
    [WorkflowId] uniqueidentifier NOT NULL,
    [WorkflowRuleId] uniqueidentifier NULL,
    [WorkflowActionId] uniqueidentifier NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NOT NULL,
    [Status] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [ExecutionDetails] nvarchar(max) NULL,
    [DurationMs] int NOT NULL,
    [ExecutedAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_WorkflowExecutionLogs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkflowExecutionLogs_Workflows_WorkflowId] FOREIGN KEY ([WorkflowId]) REFERENCES [Workflows] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.620 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkflowRules] (
    [Id] uniqueidentifier NOT NULL,
    [WorkflowId] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Order] int NOT NULL,
    [Conditions] nvarchar(max) NULL,
    [ConditionLogic] int NOT NULL,
    [IsActive] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_WorkflowRules] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkflowRules_Workflows_WorkflowId] FOREIGN KEY ([WorkflowId]) REFERENCES [Workflows] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.629 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkflowActions] (
    [Id] uniqueidentifier NOT NULL,
    [WorkflowRuleId] uniqueidentifier NOT NULL,
    [ActionType] int NOT NULL,
    [Order] int NOT NULL,
    [ActionConfig] nvarchar(max) NOT NULL,
    [DelayMinutes] int NOT NULL,
    [IsActive] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_WorkflowActions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkflowActions_WorkflowRules_WorkflowRuleId] FOREIGN KEY ([WorkflowRuleId]) REFERENCES [WorkflowRules] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.638 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowActions_WorkflowRuleId] ON [WorkflowActions] ([WorkflowRuleId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.647 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowExecutionLogs_TenantId_EntityType_EntityId] ON [WorkflowExecutionLogs] ([TenantId], [EntityType], [EntityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.655 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowExecutionLogs_TenantId_Status] ON [WorkflowExecutionLogs] ([TenantId], [Status]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.664 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowExecutionLogs_TenantId_WorkflowId_ExecutedAt] ON [WorkflowExecutionLogs] ([TenantId], [WorkflowId], [ExecutedAt]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.671 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowExecutionLogs_WorkflowId] ON [WorkflowExecutionLogs] ([WorkflowId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.679 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowRules_WorkflowId] ON [WorkflowRules] ([WorkflowId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.686 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workflows_TenantId] ON [Workflows] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.694 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workflows_TenantId_EntityType] ON [Workflows] ([TenantId], [EntityType]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.702 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workflows_TenantId_IsActive] ON [Workflows] ([TenantId], [IsActive]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.711 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117044117_AddWorkflowEngine', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:41:33.722 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:32.154 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:32.186 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:32.192 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:32.198 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:32.204 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:32.210 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:32.217 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.131 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.166 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.173 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.179 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.186 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.192 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.198 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.733 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.747 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.765 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.813 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.826 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.833 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.847 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.860 +07:00 [INF] Applying migration '20260117044432_AddNotificationSystem'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.944 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(200) NOT NULL,
    [Message] nvarchar(1000) NULL,
    [Type] int NOT NULL,
    [Priority] int NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RelatedEntityType] nvarchar(100) NULL,
    [RelatedEntityId] uniqueidentifier NULL,
    [ActionUrl] nvarchar(500) NULL,
    [Data] nvarchar(max) NULL,
    [IsRead] bit NOT NULL,
    [ReadAt] datetime2 NULL,
    [Channels] int NOT NULL,
    [EmailStatus] int NOT NULL,
    [SmsStatus] int NOT NULL,
    [PushStatus] int NOT NULL,
    [ExpiresAt] datetime2 NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Notifications_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.955 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [NotificationTemplates] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Type] int NOT NULL,
    [SubjectTemplate] nvarchar(200) NOT NULL,
    [BodyTemplate] nvarchar(max) NOT NULL,
    [SmsTemplate] nvarchar(500) NULL,
    [DefaultChannels] int NOT NULL,
    [Priority] int NOT NULL,
    [IsActive] bit NOT NULL,
    [AvailablePlaceholders] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_NotificationTemplates] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.964 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserNotificationPreferences] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [NotificationType] int NOT NULL,
    [EnabledChannels] int NOT NULL,
    [IsEnabled] bit NOT NULL,
    [QuietHoursStart] nvarchar(5) NULL,
    [QuietHoursEnd] nvarchar(5) NULL,
    CONSTRAINT [PK_UserNotificationPreferences] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserNotificationPreferences_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.972 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_ExpiresAt] ON [Notifications] ([ExpiresAt]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.979 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_TenantId_UserId_CreatedAt] ON [Notifications] ([TenantId], [UserId], [CreatedAt]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.988 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_TenantId_UserId_IsRead] ON [Notifications] ([TenantId], [UserId], [IsRead]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:44.996 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_UserId] ON [Notifications] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:45.003 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_NotificationTemplates_TenantId_Code] ON [NotificationTemplates] ([TenantId], [Code]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:45.011 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_NotificationTemplates_TenantId_IsActive] ON [NotificationTemplates] ([TenantId], [IsActive]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:45.018 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserNotificationPreferences_UserId_NotificationType] ON [UserNotificationPreferences] ([UserId], [NotificationType]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:45.028 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117044432_AddNotificationSystem', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:44:45.038 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 11:48:41.837 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Production"}
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (53): The network path was not found.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(IDbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 338
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:53,State:0,Class:20
2026-01-17 11:48:41.922 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Production"}
2026-01-17 13:01:17.737 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:01:17.815 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:01:17.823 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:01:17.836 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:01:17.849 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:01:17.864 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:01:17.879 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:57.026 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:57.066 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:57.073 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:57.080 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:57.086 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:57.092 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:57.099 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.016 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.036 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.065 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.144 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.168 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.182 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.206 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.226 +07:00 [INF] Applying migration '20260117060121_AddTicketSlaTracking'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.351 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [EscalatedToUserId] uniqueidentifier NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.365 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [EscalationCount] int NOT NULL DEFAULT 0; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.378 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [FirstResponseTarget] datetime2 NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.392 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [LastEscalatedAt] datetime2 NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.406 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [ResolutionTarget] datetime2 NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.418 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [SlaPauseReason] nvarchar(500) NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.432 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [SlaPaused] bit NOT NULL DEFAULT CAST(0 AS bit); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.446 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [SlaPausedAt] datetime2 NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.459 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [SlaPausedMinutes] int NOT NULL DEFAULT 0; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.478 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117060121_AddTicketSlaTracking', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:02:59.494 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:20:50.754 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:20:50.797 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:20:50.804 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:20:50.811 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:20:50.818 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:20:50.827 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:20:50.834 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:05.836 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:05.874 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:05.881 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:05.889 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:05.896 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:05.902 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:05.909 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.707 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.721 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.745 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.804 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.818 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.826 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.845 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.859 +07:00 [INF] Applying migration '20260117062052_AddSegmentTable'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.968 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CampaignMembers] ADD [SegmentId] uniqueidentifier NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.980 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Segments] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(1000) NULL,
    [EntityType] nvarchar(50) NOT NULL,
    [FilterCriteria] nvarchar(max) NOT NULL,
    [Type] int NOT NULL,
    [MemberCount] int NOT NULL,
    [LastCalculatedAt] datetime2 NULL,
    [IsActive] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Segments] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.991 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CampaignMembers_SegmentId] ON [CampaignMembers] ([SegmentId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:07.999 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CampaignMembers] ADD CONSTRAINT [FK_CampaignMembers_Segments_SegmentId] FOREIGN KEY ([SegmentId]) REFERENCES [Segments] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:08.009 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117062052_AddSegmentTable', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:21:08.020 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:39:57.719 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:39:57.763 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:39:57.771 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:39:57.779 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:39:57.785 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:39:57.792 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:39:57.799 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:54:45.191 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:54:45.238 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:54:45.248 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:54:45.260 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:54:45.272 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:54:45.283 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:54:45.295 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:54:45.306 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:54:45.318 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:58:37.257 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:58:37.299 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:58:37.306 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:58:37.314 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:58:37.321 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:58:37.328 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:58:37.335 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:58:37.341 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 13:58:37.349 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:08.815 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:08.855 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:08.862 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:08.869 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:08.876 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:08.883 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:08.892 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:08.902 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:08.911 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:09.650 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:09.667 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:09.703 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:09.787 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:09.810 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:09.824 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:09.849 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:09.864 +07:00 [INF] Applying migration '20260117042228_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:09.991 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permission] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permission] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.007 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Pipelines] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsDefault] bit NOT NULL,
    [IsActive] bit NOT NULL,
    [SortOrder] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Pipelines] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.028 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Products] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Sku] nvarchar(50) NULL,
    [Description] nvarchar(500) NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [CostPrice] decimal(18,2) NULL,
    [IsActive] bit NOT NULL,
    [Category] nvarchar(100) NULL,
    [Unit] nvarchar(50) NULL,
    [TaxRate] decimal(5,2) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Products] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.042 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Slas] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsActive] bit NOT NULL,
    [IsDefault] bit NOT NULL,
    [FirstResponseTimeLow] int NOT NULL,
    [FirstResponseTimeMedium] int NOT NULL,
    [FirstResponseTimeHigh] int NOT NULL,
    [FirstResponseTimeCritical] int NOT NULL,
    [ResolutionTimeLow] int NOT NULL,
    [ResolutionTimeMedium] int NOT NULL,
    [ResolutionTimeHigh] int NOT NULL,
    [ResolutionTimeCritical] int NOT NULL,
    [BusinessHours] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Slas] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.054 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenant] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenant] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.069 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PipelineStages] (
    [Id] uniqueidentifier NOT NULL,
    [PipelineId] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [SortOrder] int NOT NULL,
    [Probability] int NOT NULL,
    [IsWon] bit NOT NULL,
    [IsLost] bit NOT NULL,
    [Color] nvarchar(20) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_PipelineStages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PipelineStages_Pipelines_PipelineId] FOREIGN KEY ([PipelineId]) REFERENCES [Pipelines] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.079 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Roles_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.092 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.103 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RolePermissions] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermissions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermissions_Permission_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permission] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermissions_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.122 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Campaigns] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [StartDate] datetime2 NULL,
    [EndDate] datetime2 NULL,
    [Budget] decimal(18,2) NULL,
    [ActualCost] decimal(18,2) NULL,
    [Currency] nvarchar(10) NULL,
    [ExpectedRevenue] decimal(18,2) NULL,
    [ExpectedLeads] int NULL,
    [ExpectedConversions] int NULL,
    [TotalSent] int NOT NULL,
    [TotalDelivered] int NOT NULL,
    [TotalOpened] int NOT NULL,
    [TotalClicked] int NOT NULL,
    [TotalBounced] int NOT NULL,
    [TotalUnsubscribed] int NOT NULL,
    [TotalLeadsGenerated] int NOT NULL,
    [TotalConversions] int NOT NULL,
    [ActualRevenue] decimal(18,2) NULL,
    [OwnerId] uniqueidentifier NULL,
    [TargetAudience] nvarchar(100) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Campaigns] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Campaigns_Users_OwnerId] FOREIGN KEY ([OwnerId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.136 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Customers] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Type] int NOT NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [Website] nvarchar(500) NULL,
    [FirstName] nvarchar(100) NULL,
    [LastName] nvarchar(100) NULL,
    [Title] nvarchar(50) NULL,
    [DateOfBirth] datetime2 NULL,
    [CompanyName] nvarchar(200) NULL,
    [TaxId] nvarchar(50) NULL,
    [Industry] nvarchar(100) NULL,
    [EmployeeCount] int NULL,
    [AnnualRevenue] decimal(18,2) NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [Status] int NOT NULL,
    [Source] int NOT NULL,
    [SourceDetail] nvarchar(100) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [LifetimeValue] decimal(18,2) NULL,
    [CreditScore] int NULL,
    [CustomerCode] nvarchar(50) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Customers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Customers_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.149 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshTokens] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.161 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRoles] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRoles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRoles_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]),
    CONSTRAINT [FK_UserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.173 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CommunicationTemplates] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Type] int NOT NULL,
    [Subject] nvarchar(200) NULL,
    [Body] nvarchar(max) NULL,
    [HtmlBody] nvarchar(max) NULL,
    [IsActive] bit NOT NULL,
    [CampaignId] uniqueidentifier NULL,
    [Variables] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_CommunicationTemplates] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CommunicationTemplates_Campaigns_CampaignId] FOREIGN KEY ([CampaignId]) REFERENCES [Campaigns] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.186 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contacts] (
    [Id] uniqueidentifier NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [JobTitle] nvarchar(100) NULL,
    [Department] nvarchar(100) NULL,
    [IsPrimary] bit NOT NULL,
    [Status] int NOT NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [LinkedInUrl] nvarchar(200) NULL,
    [TwitterHandle] nvarchar(200) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Contacts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Contacts_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.203 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tickets] (
    [Id] uniqueidentifier NOT NULL,
    [TicketNumber] nvarchar(50) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [Priority] int NOT NULL,
    [Type] int NOT NULL,
    [Category] nvarchar(100) NULL,
    [SubCategory] nvarchar(100) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [SlaId] uniqueidentifier NULL,
    [DueDate] datetime2 NULL,
    [FirstResponseDate] datetime2 NULL,
    [ResolvedDate] datetime2 NULL,
    [ClosedDate] datetime2 NULL,
    [SatisfactionRating] int NULL,
    [SatisfactionComment] nvarchar(max) NULL,
    [SlaBreached] bit NOT NULL,
    [Channel] nvarchar(100) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Tickets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Tickets_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Tickets_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Tickets_Slas_SlaId] FOREIGN KEY ([SlaId]) REFERENCES [Slas] ([Id]),
    CONSTRAINT [FK_Tickets_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.216 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TicketComments] (
    [Id] uniqueidentifier NOT NULL,
    [TicketId] uniqueidentifier NOT NULL,
    [Content] nvarchar(max) NOT NULL,
    [IsInternal] bit NOT NULL,
    [IsFromCustomer] bit NOT NULL,
    [AuthorUserId] uniqueidentifier NULL,
    [AuthorName] nvarchar(100) NULL,
    [AuthorEmail] nvarchar(100) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_TicketComments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TicketComments_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [Tickets] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TicketComments_Users_AuthorUserId] FOREIGN KEY ([AuthorUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.232 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Activities] (
    [Id] uniqueidentifier NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [Priority] int NOT NULL,
    [StartDate] datetime2 NULL,
    [DueDate] datetime2 NULL,
    [CompletedDate] datetime2 NULL,
    [DurationMinutes] int NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [LeadId] uniqueidentifier NULL,
    [OpportunityId] uniqueidentifier NULL,
    [TicketId] uniqueidentifier NULL,
    [IsRecurring] bit NOT NULL,
    [RecurrencePattern] int NULL,
    [RecurrenceInterval] int NULL,
    [RecurrenceEndDate] datetime2 NULL,
    [ParentActivityId] uniqueidentifier NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Activities] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Activities_Activities_ParentActivityId] FOREIGN KEY ([ParentActivityId]) REFERENCES [Activities] ([Id]),
    CONSTRAINT [FK_Activities_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Activities_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Activities_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [Tickets] ([Id]),
    CONSTRAINT [FK_Activities_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.245 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Reminders] (
    [Id] uniqueidentifier NOT NULL,
    [ActivityId] uniqueidentifier NULL,
    [Subject] nvarchar(200) NULL,
    [Message] nvarchar(max) NULL,
    [ReminderDate] datetime2 NOT NULL,
    [Method] int NOT NULL,
    [IsSent] bit NOT NULL,
    [SentAt] datetime2 NULL,
    [UserId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Reminders] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Reminders_Activities_ActivityId] FOREIGN KEY ([ActivityId]) REFERENCES [Activities] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Reminders_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.263 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CampaignMembers] (
    [Id] uniqueidentifier NOT NULL,
    [CampaignId] uniqueidentifier NOT NULL,
    [LeadId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [SentAt] datetime2 NULL,
    [OpenedAt] datetime2 NULL,
    [ClickedAt] datetime2 NULL,
    [RespondedAt] datetime2 NULL,
    [ConvertedAt] datetime2 NULL,
    [Response] nvarchar(500) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_CampaignMembers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CampaignMembers_Campaigns_CampaignId] FOREIGN KEY ([CampaignId]) REFERENCES [Campaigns] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CampaignMembers_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.281 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contracts] (
    [Id] uniqueidentifier NOT NULL,
    [ContractNumber] nvarchar(50) NOT NULL,
    [Title] nvarchar(200) NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [OrderId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [SignedDate] datetime2 NULL,
    [RenewalDate] datetime2 NULL,
    [AutoRenew] bit NOT NULL,
    [RenewalPeriodMonths] int NULL,
    [NoticePeriodDays] int NULL,
    [Value] decimal(18,2) NOT NULL,
    [BillingFrequency] int NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [Terms] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [DocumentUrl] nvarchar(500) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [SignedByUserId] uniqueidentifier NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Contracts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Contracts_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Contracts_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Contracts_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id]),
    CONSTRAINT [FK_Contracts_Users_SignedByUserId] FOREIGN KEY ([SignedByUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.297 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Interactions] (
    [Id] uniqueidentifier NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [LeadId] uniqueidentifier NULL,
    [OpportunityId] uniqueidentifier NULL,
    [Type] int NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Description] nvarchar(max) NULL,
    [InteractionDate] datetime2 NOT NULL,
    [DurationMinutes] int NULL,
    [Direction] int NOT NULL,
    [Outcome] int NOT NULL,
    [PerformedByUserId] uniqueidentifier NULL,
    [CustomFields] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Interactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Interactions_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Interactions_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Interactions_Users_PerformedByUserId] FOREIGN KEY ([PerformedByUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.314 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Leads] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(200) NOT NULL,
    [FirstName] nvarchar(100) NULL,
    [LastName] nvarchar(100) NULL,
    [Email] nvarchar(100) NULL,
    [Phone] nvarchar(20) NULL,
    [Mobile] nvarchar(20) NULL,
    [CompanyName] nvarchar(200) NULL,
    [JobTitle] nvarchar(100) NULL,
    [Industry] nvarchar(100) NULL,
    [EmployeeCount] int NULL,
    [AddressLine1] nvarchar(500) NULL,
    [AddressLine2] nvarchar(500) NULL,
    [City] nvarchar(100) NULL,
    [State] nvarchar(100) NULL,
    [PostalCode] nvarchar(20) NULL,
    [Country] nvarchar(100) NULL,
    [Status] int NOT NULL,
    [Source] int NOT NULL,
    [SourceDetail] nvarchar(200) NULL,
    [Score] int NOT NULL,
    [Rating] int NOT NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [AssignedAt] datetime2 NULL,
    [ConvertedToCustomerId] uniqueidentifier NULL,
    [ConvertedToOpportunityId] uniqueidentifier NULL,
    [ConvertedAt] datetime2 NULL,
    [ConvertedByUserId] uniqueidentifier NULL,
    [EstimatedValue] decimal(18,2) NULL,
    [Currency] nvarchar(10) NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [CustomerId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Leads] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Leads_Customers_ConvertedToCustomerId] FOREIGN KEY ([ConvertedToCustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Leads_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]),
    CONSTRAINT [FK_Leads_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id]),
    CONSTRAINT [FK_Leads_Users_ConvertedByUserId] FOREIGN KEY ([ConvertedByUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.332 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Opportunities] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [PrimaryContactId] uniqueidentifier NULL,
    [PipelineId] uniqueidentifier NOT NULL,
    [StageId] uniqueidentifier NOT NULL,
    [Status] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [Probability] int NOT NULL,
    [ExpectedCloseDate] datetime2 NULL,
    [ActualCloseDate] datetime2 NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [LossReason] nvarchar(200) NULL,
    [WinReason] nvarchar(200) NULL,
    [CompetitorName] nvarchar(200) NULL,
    [Type] int NOT NULL,
    [Priority] int NOT NULL,
    [SourceLeadId] uniqueidentifier NULL,
    [SourceCampaignId] uniqueidentifier NULL,
    [Tags] nvarchar(max) NULL,
    [CustomFields] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Opportunities] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Opportunities_Campaigns_SourceCampaignId] FOREIGN KEY ([SourceCampaignId]) REFERENCES [Campaigns] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Opportunities_Contacts_PrimaryContactId] FOREIGN KEY ([PrimaryContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Opportunities_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Opportunities_Leads_SourceLeadId] FOREIGN KEY ([SourceLeadId]) REFERENCES [Leads] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Opportunities_PipelineStages_StageId] FOREIGN KEY ([StageId]) REFERENCES [PipelineStages] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Opportunities_Pipelines_PipelineId] FOREIGN KEY ([PipelineId]) REFERENCES [Pipelines] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Opportunities_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.348 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderItems] (
    [Id] uniqueidentifier NOT NULL,
    [OrderId] uniqueidentifier NOT NULL,
    [ProductId] uniqueidentifier NULL,
    [Description] nvarchar(200) NULL,
    [Quantity] decimal(18,4) NOT NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [DiscountPercent] decimal(5,2) NOT NULL,
    [DiscountAmount] decimal(18,2) NOT NULL,
    [TaxPercent] decimal(5,2) NOT NULL,
    [TaxAmount] decimal(18,2) NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    [SortOrder] int NOT NULL,
    CONSTRAINT [PK_OrderItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderItems_Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Products] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.366 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Orders] (
    [Id] uniqueidentifier NOT NULL,
    [OrderNumber] nvarchar(50) NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [QuotationId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [OrderDate] datetime2 NOT NULL,
    [DeliveryDate] datetime2 NULL,
    [SubTotal] decimal(18,2) NOT NULL,
    [DiscountAmount] decimal(18,2) NOT NULL,
    [DiscountPercent] decimal(5,2) NOT NULL,
    [TaxAmount] decimal(18,2) NOT NULL,
    [ShippingAmount] decimal(18,2) NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    [PaidAmount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [ExchangeRate] decimal(18,6) NULL,
    [BillingAddress] nvarchar(500) NULL,
    [ShippingAddress] nvarchar(500) NULL,
    [PaymentStatus] int NOT NULL,
    [PaymentMethod] nvarchar(50) NULL,
    [PaymentReference] nvarchar(100) NULL,
    [Terms] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [InternalNotes] nvarchar(max) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Orders] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Orders_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Orders_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Orders_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.379 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Quotations] (
    [Id] uniqueidentifier NOT NULL,
    [QuotationNumber] nvarchar(50) NOT NULL,
    [CustomerId] uniqueidentifier NULL,
    [OpportunityId] uniqueidentifier NULL,
    [ContactId] uniqueidentifier NULL,
    [Status] int NOT NULL,
    [QuotationDate] datetime2 NOT NULL,
    [ExpiryDate] datetime2 NULL,
    [SubTotal] decimal(18,2) NOT NULL,
    [DiscountAmount] decimal(18,2) NOT NULL,
    [DiscountPercent] decimal(5,2) NOT NULL,
    [TaxAmount] decimal(18,2) NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [ExchangeRate] decimal(18,6) NULL,
    [BillingAddress] nvarchar(500) NULL,
    [ShippingAddress] nvarchar(500) NULL,
    [Terms] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [AssignedToUserId] uniqueidentifier NULL,
    [ConvertedToOrderId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Quotations] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Quotations_Contacts_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [Contacts] ([Id]),
    CONSTRAINT [FK_Quotations_Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Customers] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Quotations_Opportunities_OpportunityId] FOREIGN KEY ([OpportunityId]) REFERENCES [Opportunities] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Quotations_Orders_ConvertedToOrderId] FOREIGN KEY ([ConvertedToOrderId]) REFERENCES [Orders] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Quotations_Users_AssignedToUserId] FOREIGN KEY ([AssignedToUserId]) REFERENCES [Users] ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.392 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [QuotationItems] (
    [Id] uniqueidentifier NOT NULL,
    [QuotationId] uniqueidentifier NOT NULL,
    [ProductId] uniqueidentifier NULL,
    [Description] nvarchar(200) NULL,
    [Quantity] decimal(18,4) NOT NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [DiscountPercent] decimal(5,2) NOT NULL,
    [DiscountAmount] decimal(18,2) NOT NULL,
    [TaxPercent] decimal(5,2) NOT NULL,
    [TaxAmount] decimal(18,2) NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    [SortOrder] int NOT NULL,
    CONSTRAINT [PK_QuotationItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_QuotationItems_Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Products] ([Id]),
    CONSTRAINT [FK_QuotationItems_Quotations_QuotationId] FOREIGN KEY ([QuotationId]) REFERENCES [Quotations] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.411 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_AssignedToUserId] ON [Activities] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.425 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_ContactId] ON [Activities] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.435 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_CustomerId] ON [Activities] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.447 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_DueDate] ON [Activities] ([DueDate]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.461 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_LeadId] ON [Activities] ([LeadId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.476 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_OpportunityId] ON [Activities] ([OpportunityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.491 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_ParentActivityId] ON [Activities] ([ParentActivityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.507 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_TenantId] ON [Activities] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.521 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Activities_TicketId] ON [Activities] ([TicketId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CampaignMembers_CampaignId] ON [CampaignMembers] ([CampaignId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.548 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CampaignMembers_ContactId] ON [CampaignMembers] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.561 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CampaignMembers_LeadId] ON [CampaignMembers] ([LeadId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.575 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Campaigns_OwnerId] ON [Campaigns] ([OwnerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.589 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Campaigns_TenantId] ON [Campaigns] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.602 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CommunicationTemplates_CampaignId] ON [CommunicationTemplates] ([CampaignId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.617 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CommunicationTemplates_TenantId] ON [CommunicationTemplates] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.631 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contacts_CustomerId] ON [Contacts] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.646 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contacts_TenantId] ON [Contacts] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_AssignedToUserId] ON [Contracts] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.669 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_ContactId] ON [Contracts] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.679 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_CustomerId] ON [Contracts] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.689 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_OrderId] ON [Contracts] ([OrderId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.701 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_SignedByUserId] ON [Contracts] ([SignedByUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.712 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Contracts_TenantId] ON [Contracts] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.723 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Contracts_TenantId_ContractNumber] ON [Contracts] ([TenantId], [ContractNumber]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Customers_AssignedToUserId] ON [Customers] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.741 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Customers_TenantId] ON [Customers] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.755 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Customers_TenantId_CustomerCode] ON [Customers] ([TenantId], [CustomerCode]) WHERE [CustomerCode] IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.766 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Customers_TenantId_Email] ON [Customers] ([TenantId], [Email]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.780 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_ContactId] ON [Interactions] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.793 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_CustomerId] ON [Interactions] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.806 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_InteractionDate] ON [Interactions] ([InteractionDate]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.818 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_LeadId] ON [Interactions] ([LeadId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.831 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_OpportunityId] ON [Interactions] ([OpportunityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.844 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_PerformedByUserId] ON [Interactions] ([PerformedByUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.856 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Interactions_TenantId] ON [Interactions] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.869 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_AssignedToUserId] ON [Leads] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.878 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_ConvertedByUserId] ON [Leads] ([ConvertedByUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.887 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_ConvertedToCustomerId] ON [Leads] ([ConvertedToCustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.899 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Leads_ConvertedToOpportunityId] ON [Leads] ([ConvertedToOpportunityId]) WHERE [ConvertedToOpportunityId] IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.911 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_CustomerId] ON [Leads] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.926 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_TenantId] ON [Leads] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.940 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_TenantId_Email] ON [Leads] ([TenantId], [Email]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.955 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leads_TenantId_Status] ON [Leads] ([TenantId], [Status]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.970 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_AssignedToUserId] ON [Opportunities] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.983 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_CustomerId] ON [Opportunities] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:10.993 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_PipelineId] ON [Opportunities] ([PipelineId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.004 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_PrimaryContactId] ON [Opportunities] ([PrimaryContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.013 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_SourceCampaignId] ON [Opportunities] ([SourceCampaignId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.025 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_SourceLeadId] ON [Opportunities] ([SourceLeadId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.038 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_StageId] ON [Opportunities] ([StageId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.050 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_TenantId] ON [Opportunities] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.063 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Opportunities_TenantId_Status] ON [Opportunities] ([TenantId], [Status]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.076 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderItems_OrderId] ON [OrderItems] ([OrderId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.090 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderItems_ProductId] ON [OrderItems] ([ProductId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.104 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_AssignedToUserId] ON [Orders] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.116 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_ContactId] ON [Orders] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.129 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_CustomerId] ON [Orders] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.143 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_QuotationId] ON [Orders] ([QuotationId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.157 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_TenantId] ON [Orders] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.172 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Orders_TenantId_OrderNumber] ON [Orders] ([TenantId], [OrderNumber]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.185 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Pipelines_TenantId] ON [Pipelines] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.197 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PipelineStages_PipelineId] ON [PipelineStages] ([PipelineId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.209 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Products_TenantId] ON [Products] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.220 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Products_TenantId_Sku] ON [Products] ([TenantId], [Sku]) WHERE [Sku] IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuotationItems_ProductId] ON [QuotationItems] ([ProductId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.240 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuotationItems_QuotationId] ON [QuotationItems] ([QuotationId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.252 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_AssignedToUserId] ON [Quotations] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.263 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_ContactId] ON [Quotations] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.276 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Quotations_ConvertedToOrderId] ON [Quotations] ([ConvertedToOrderId]) WHERE [ConvertedToOrderId] IS NOT NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.289 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_CustomerId] ON [Quotations] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_OpportunityId] ON [Quotations] ([OpportunityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.313 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quotations_TenantId] ON [Quotations] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.325 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Quotations_TenantId_QuotationNumber] ON [Quotations] ([TenantId], [QuotationNumber]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.336 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_RefreshTokens_Token] ON [RefreshTokens] ([Token]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.350 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshTokens_UserId] ON [RefreshTokens] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.361 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reminders_ActivityId] ON [Reminders] ([ActivityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.371 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reminders_ReminderDate] ON [Reminders] ([ReminderDate]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.383 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reminders_TenantId] ON [Reminders] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.395 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reminders_UserId] ON [Reminders] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.410 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RolePermissions_PermissionId] ON [RolePermissions] ([PermissionId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.420 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_RolePermissions_RoleId_PermissionId] ON [RolePermissions] ([RoleId], [PermissionId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.434 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_TenantId_Name] ON [Roles] ([TenantId], [Name]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.447 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Slas_TenantId] ON [Slas] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.461 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TicketComments_AuthorUserId] ON [TicketComments] ([AuthorUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.473 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TicketComments_TicketId] ON [TicketComments] ([TicketId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.484 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_AssignedToUserId] ON [Tickets] ([AssignedToUserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.495 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_ContactId] ON [Tickets] ([ContactId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.507 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_CustomerId] ON [Tickets] ([CustomerId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.517 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_SlaId] ON [Tickets] ([SlaId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.526 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_TenantId] ON [Tickets] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.536 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Tickets_TenantId_Status] ON [Tickets] ([TenantId], [Status]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Tickets_TenantId_TicketNumber] ON [Tickets] ([TenantId], [TicketNumber]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.558 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRoles_RoleId] ON [UserRoles] ([RoleId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.569 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserRoles_UserId_RoleId] ON [UserRoles] ([UserId], [RoleId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.579 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_TenantId_Email] ON [Users] ([TenantId], [Email]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.595 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Activities] ADD CONSTRAINT [FK_Activities_Leads_LeadId] FOREIGN KEY ([LeadId]) REFERENCES [Leads] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.605 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Activities] ADD CONSTRAINT [FK_Activities_Opportunities_OpportunityId] FOREIGN KEY ([OpportunityId]) REFERENCES [Opportunities] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.615 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CampaignMembers] ADD CONSTRAINT [FK_CampaignMembers_Leads_LeadId] FOREIGN KEY ([LeadId]) REFERENCES [Leads] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.628 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Contracts] ADD CONSTRAINT [FK_Contracts_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.638 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Interactions] ADD CONSTRAINT [FK_Interactions_Leads_LeadId] FOREIGN KEY ([LeadId]) REFERENCES [Leads] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.650 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Interactions] ADD CONSTRAINT [FK_Interactions_Opportunities_OpportunityId] FOREIGN KEY ([OpportunityId]) REFERENCES [Opportunities] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.664 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Leads] ADD CONSTRAINT [FK_Leads_Opportunities_ConvertedToOpportunityId] FOREIGN KEY ([ConvertedToOpportunityId]) REFERENCES [Opportunities] ([Id]) ON DELETE SET NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.679 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OrderItems] ADD CONSTRAINT [FK_OrderItems_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([Id]) ON DELETE CASCADE; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.694 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Orders] ADD CONSTRAINT [FK_Orders_Quotations_QuotationId] FOREIGN KEY ([QuotationId]) REFERENCES [Quotations] ([Id]) ON DELETE SET NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.715 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117042228_InitialCreate', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.733 +07:00 [INF] Applying migration '20260117044117_AddWorkflowEngine'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.834 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Workflows] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [TriggerType] int NOT NULL,
    [TriggerFields] nvarchar(max) NULL,
    [ScheduleExpression] nvarchar(max) NULL,
    [IsActive] bit NOT NULL,
    [ExecutionOrder] int NOT NULL,
    [StopOnMatch] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Workflows] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.845 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkflowExecutionLogs] (
    [Id] uniqueidentifier NOT NULL,
    [WorkflowId] uniqueidentifier NOT NULL,
    [WorkflowRuleId] uniqueidentifier NULL,
    [WorkflowActionId] uniqueidentifier NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NOT NULL,
    [Status] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [ExecutionDetails] nvarchar(max) NULL,
    [DurationMs] int NOT NULL,
    [ExecutedAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_WorkflowExecutionLogs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkflowExecutionLogs_Workflows_WorkflowId] FOREIGN KEY ([WorkflowId]) REFERENCES [Workflows] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.857 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkflowRules] (
    [Id] uniqueidentifier NOT NULL,
    [WorkflowId] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Order] int NOT NULL,
    [Conditions] nvarchar(max) NULL,
    [ConditionLogic] int NOT NULL,
    [IsActive] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_WorkflowRules] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkflowRules_Workflows_WorkflowId] FOREIGN KEY ([WorkflowId]) REFERENCES [Workflows] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.869 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkflowActions] (
    [Id] uniqueidentifier NOT NULL,
    [WorkflowRuleId] uniqueidentifier NOT NULL,
    [ActionType] int NOT NULL,
    [Order] int NOT NULL,
    [ActionConfig] nvarchar(max) NOT NULL,
    [DelayMinutes] int NOT NULL,
    [IsActive] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_WorkflowActions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkflowActions_WorkflowRules_WorkflowRuleId] FOREIGN KEY ([WorkflowRuleId]) REFERENCES [WorkflowRules] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.878 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowActions_WorkflowRuleId] ON [WorkflowActions] ([WorkflowRuleId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.886 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowExecutionLogs_TenantId_EntityType_EntityId] ON [WorkflowExecutionLogs] ([TenantId], [EntityType], [EntityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.894 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowExecutionLogs_TenantId_Status] ON [WorkflowExecutionLogs] ([TenantId], [Status]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.902 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowExecutionLogs_TenantId_WorkflowId_ExecutedAt] ON [WorkflowExecutionLogs] ([TenantId], [WorkflowId], [ExecutedAt]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.911 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowExecutionLogs_WorkflowId] ON [WorkflowExecutionLogs] ([WorkflowId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.919 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkflowRules_WorkflowId] ON [WorkflowRules] ([WorkflowId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.929 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workflows_TenantId] ON [Workflows] ([TenantId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.936 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workflows_TenantId_EntityType] ON [Workflows] ([TenantId], [EntityType]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.947 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workflows_TenantId_IsActive] ON [Workflows] ([TenantId], [IsActive]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.960 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117044117_AddWorkflowEngine', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:11.969 +07:00 [INF] Applying migration '20260117044432_AddNotificationSystem'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.051 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(200) NOT NULL,
    [Message] nvarchar(1000) NULL,
    [Type] int NOT NULL,
    [Priority] int NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RelatedEntityType] nvarchar(100) NULL,
    [RelatedEntityId] uniqueidentifier NULL,
    [ActionUrl] nvarchar(500) NULL,
    [Data] nvarchar(max) NULL,
    [IsRead] bit NOT NULL,
    [ReadAt] datetime2 NULL,
    [Channels] int NOT NULL,
    [EmailStatus] int NOT NULL,
    [SmsStatus] int NOT NULL,
    [PushStatus] int NOT NULL,
    [ExpiresAt] datetime2 NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Notifications_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.061 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [NotificationTemplates] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Type] int NOT NULL,
    [SubjectTemplate] nvarchar(200) NOT NULL,
    [BodyTemplate] nvarchar(max) NOT NULL,
    [SmsTemplate] nvarchar(500) NULL,
    [DefaultChannels] int NOT NULL,
    [Priority] int NOT NULL,
    [IsActive] bit NOT NULL,
    [AvailablePlaceholders] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_NotificationTemplates] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.070 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserNotificationPreferences] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [NotificationType] int NOT NULL,
    [EnabledChannels] int NOT NULL,
    [IsEnabled] bit NOT NULL,
    [QuietHoursStart] nvarchar(5) NULL,
    [QuietHoursEnd] nvarchar(5) NULL,
    CONSTRAINT [PK_UserNotificationPreferences] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserNotificationPreferences_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.078 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_ExpiresAt] ON [Notifications] ([ExpiresAt]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.086 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_TenantId_UserId_CreatedAt] ON [Notifications] ([TenantId], [UserId], [CreatedAt]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.093 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_TenantId_UserId_IsRead] ON [Notifications] ([TenantId], [UserId], [IsRead]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.101 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_UserId] ON [Notifications] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.109 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_NotificationTemplates_TenantId_Code] ON [NotificationTemplates] ([TenantId], [Code]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.118 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_NotificationTemplates_TenantId_IsActive] ON [NotificationTemplates] ([TenantId], [IsActive]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.125 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserNotificationPreferences_UserId_NotificationType] ON [UserNotificationPreferences] ([UserId], [NotificationType]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.132 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117044432_AddNotificationSystem', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.140 +07:00 [INF] Applying migration '20260117060121_AddTicketSlaTracking'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.290 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [EscalatedToUserId] uniqueidentifier NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.300 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [EscalationCount] int NOT NULL DEFAULT 0; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.311 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [FirstResponseTarget] datetime2 NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.322 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [LastEscalatedAt] datetime2 NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.330 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [ResolutionTarget] datetime2 NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.339 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [SlaPauseReason] nvarchar(500) NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [SlaPaused] bit NOT NULL DEFAULT CAST(0 AS bit); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.361 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [SlaPausedAt] datetime2 NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.369 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Tickets] ADD [SlaPausedMinutes] int NOT NULL DEFAULT 0; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.376 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117060121_AddTicketSlaTracking', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.384 +07:00 [INF] Applying migration '20260117062052_AddSegmentTable'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.456 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CampaignMembers] ADD [SegmentId] uniqueidentifier NULL; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.465 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Segments] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(1000) NULL,
    [EntityType] nvarchar(50) NOT NULL,
    [FilterCriteria] nvarchar(max) NOT NULL,
    [Type] int NOT NULL,
    [MemberCount] int NOT NULL,
    [LastCalculatedAt] datetime2 NULL,
    [IsActive] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Segments] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.475 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CampaignMembers_SegmentId] ON [CampaignMembers] ([SegmentId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.483 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CampaignMembers] ADD CONSTRAINT [FK_CampaignMembers_Segments_SegmentId] FOREIGN KEY ([SegmentId]) REFERENCES [Segments] ([Id]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.492 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117062052_AddSegmentTable', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.501 +07:00 [INF] Applying migration '20260117063959_AddWebhookTables'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.605 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WebhookSubscriptions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [TargetUrl] nvarchar(2000) NOT NULL,
    [Secret] nvarchar(500) NULL,
    [Events] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    [CustomHeaders] nvarchar(max) NULL,
    [ContentType] nvarchar(100) NOT NULL,
    [RetryPolicy] nvarchar(max) NULL,
    [MaxRetries] int NOT NULL,
    [TimeoutSeconds] int NOT NULL,
    [LastSuccessAt] datetime2 NULL,
    [LastFailureAt] datetime2 NULL,
    [SuccessCount] int NOT NULL,
    [FailureCount] int NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_WebhookSubscriptions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.614 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WebhookDeliveries] (
    [Id] uniqueidentifier NOT NULL,
    [WebhookSubscriptionId] uniqueidentifier NOT NULL,
    [EventType] nvarchar(100) NOT NULL,
    [EntityType] nvarchar(100) NULL,
    [EntityId] uniqueidentifier NULL,
    [Payload] nvarchar(max) NOT NULL,
    [Status] int NOT NULL,
    [ResponseStatusCode] int NULL,
    [ResponseBody] nvarchar(max) NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [RetryCount] int NOT NULL,
    [NextRetryAt] datetime2 NULL,
    [CompletedAt] datetime2 NULL,
    [RequestHeaders] nvarchar(max) NULL,
    [ResponseHeaders] nvarchar(max) NULL,
    [DurationMs] int NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_WebhookDeliveries] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WebhookDeliveries_WebhookSubscriptions_WebhookSubscriptionId] FOREIGN KEY ([WebhookSubscriptionId]) REFERENCES [WebhookSubscriptions] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.623 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WebhookDeliveries_WebhookSubscriptionId] ON [WebhookDeliveries] ([WebhookSubscriptionId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.631 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117063959_AddWebhookTables', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.639 +07:00 [INF] Applying migration '20260117065447_AddCalendarSyncTables'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.734 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ActivityReminders] (
    [Id] uniqueidentifier NOT NULL,
    [ActivityId] uniqueidentifier NOT NULL,
    [Type] int NOT NULL,
    [MinutesBefore] int NOT NULL,
    [IsSent] bit NOT NULL,
    [SentAt] datetime2 NULL,
    [ScheduledFor] datetime2 NULL,
    [SendEmail] bit NOT NULL,
    [SendNotification] bit NOT NULL,
    [SendSms] bit NOT NULL,
    [RecipientUserId] uniqueidentifier NULL,
    [RecipientEmail] nvarchar(max) NULL,
    [RecipientPhone] nvarchar(max) NULL,
    CONSTRAINT [PK_ActivityReminders] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ActivityReminders_Activities_ActivityId] FOREIGN KEY ([ActivityId]) REFERENCES [Activities] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.744 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CalendarSyncConfigurations] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Provider] int NOT NULL,
    [ProviderAccountEmail] nvarchar(max) NOT NULL,
    [AccessToken] nvarchar(max) NOT NULL,
    [RefreshToken] nvarchar(max) NULL,
    [TokenExpiresAt] datetime2 NULL,
    [IsActive] bit NOT NULL,
    [SyncToExternal] bit NOT NULL,
    [SyncFromExternal] bit NOT NULL,
    [LastSyncAt] datetime2 NULL,
    [Status] int NOT NULL,
    [LastSyncError] nvarchar(max) NULL,
    [CalendarIds] nvarchar(max) NULL,
    [SyncDaysBack] int NOT NULL,
    [SyncDaysForward] int NOT NULL,
    [TotalEventsSynced] int NOT NULL,
    [TotalEventsCreated] int NOT NULL,
    [TotalEventsUpdated] int NOT NULL,
    [FailedSyncCount] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_CalendarSyncConfigurations] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CalendarSyncConfigurations_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.756 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CalendarEventMappings] (
    [Id] uniqueidentifier NOT NULL,
    [CalendarSyncConfigurationId] uniqueidentifier NOT NULL,
    [ActivityId] uniqueidentifier NULL,
    [ExternalEventId] nvarchar(max) NOT NULL,
    [ExternalCalendarId] nvarchar(max) NOT NULL,
    [Provider] int NOT NULL,
    [Direction] int NOT NULL,
    [LastSyncedAt] datetime2 NOT NULL,
    [SyncHash] nvarchar(max) NULL,
    [SyncStatus] int NOT NULL,
    [LastSyncError] nvarchar(max) NULL,
    [EventTitle] nvarchar(max) NOT NULL,
    [EventStartAt] datetime2 NOT NULL,
    [EventEndAt] datetime2 NOT NULL,
    [IsAllDay] bit NOT NULL,
    CONSTRAINT [PK_CalendarEventMappings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CalendarEventMappings_Activities_ActivityId] FOREIGN KEY ([ActivityId]) REFERENCES [Activities] ([Id]),
    CONSTRAINT [FK_CalendarEventMappings_CalendarSyncConfigurations_CalendarSyncConfigurationId] FOREIGN KEY ([CalendarSyncConfigurationId]) REFERENCES [CalendarSyncConfigurations] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.763 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActivityReminders_ActivityId] ON [ActivityReminders] ([ActivityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.780 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CalendarEventMappings_ActivityId] ON [CalendarEventMappings] ([ActivityId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.789 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CalendarEventMappings_CalendarSyncConfigurationId] ON [CalendarEventMappings] ([CalendarSyncConfigurationId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.797 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CalendarSyncConfigurations_UserId] ON [CalendarSyncConfigurations] ([UserId]); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.804 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260117065447_AddCalendarSyncTables', N'10.0.0'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:00:12.822 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:05:49.865 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Production"}
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (53): The network path was not found.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(IDbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 407
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:53,State:0,Class:20
2026-01-17 14:05:49.931 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Production"}
2026-01-17 14:08:13.363 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Production"}
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (53): The network path was not found.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(IDbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.SqlClient.ConnectionPool.WaitHandleDbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 407
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:53,State:0,Class:20
2026-01-17 14:08:13.422 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Production"}
2026-01-17 14:15:43.356 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:15:45.233 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:15:45.792 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:15:46.202 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:15:46.214 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:15:46.646 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:15:46.667 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:15:46.694 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:46.799 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:46.840 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:15:46.857 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:46.882 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:46.911 +07:00 [INF] Applying migration '20260117042220_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:46.971 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'master') IS NULL EXEC(N'CREATE SCHEMA [master];'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:47.003 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:47.021 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:15:47.042 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:15:47.067 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:47.088 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:47.106 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [master].[Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:47.122 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:47.165 +07:00 [ERR] Failed executing DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:47.188 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Introducing FOREIGN KEY constraint 'FK_UserRole_User_UserId' on table 'UserRole' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint or index. See previous errors.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 407
ClientConnectionId:6e9c4d55-3146-4a0e-bb81-7cc0086986e2
Error Number:1785,State:0,Class:16
2026-01-17 14:15:47.217 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:47.992 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:47.995 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:48.007 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:48.089 +07:00 [INF] Now listening on: http://localhost:5000 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:48.102 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:48.108 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:48.114 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:48.127 +07:00 [DBG] Execution loop BackgroundServerProcess:6209a902 has started in 2.7584 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:15:48.183 +07:00 [INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:48.189 +07:00 [INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:48.193 +07:00 [INF] Content root path: D:\Draft\crm\backend\src\CrmSaas.Api {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:15:48.207 +07:00 [INF] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd successfully announced in 24.5835 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:15:48.213 +07:00 [DBG] Execution loop ServerHeartbeatProcess:9aa9e5e8 has started in 0.8547 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:15:48.214 +07:00 [INF] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:15:48.221 +07:00 [DBG] Execution loop ServerWatchdog:d2d0584e has started in 0.2835 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 14:15:48.222 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:cde41f0a has started in 0.1651 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 14:15:48.222 +07:00 [DBG] Execution loop ExpirationManager:806de7ce has started in 0.1867 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:15:48.222 +07:00 [DBG] Execution loop CountersAggregator:ff0e736a has started in 0.1033 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:15:48.222 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:b514c504 has started in 0.1239 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 14:15:48.222 +07:00 [DBG] Execution loop Worker:51527e4e has started in 0.2997 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":22,"EnvironmentName":"Development"}
2026-01-17 14:15:48.223 +07:00 [DBG] Execution loop Worker:8ee51bae has started in 0.4152 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":23,"EnvironmentName":"Development"}
2026-01-17 14:15:48.223 +07:00 [DBG] Execution loop Worker:f7fffc7f has started in 0.4943 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":24,"EnvironmentName":"Development"}
2026-01-17 14:15:48.223 +07:00 [DBG] Execution loop Worker:c3739cbf has started in 0.5801 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":25,"EnvironmentName":"Development"}
2026-01-17 14:15:48.223 +07:00 [DBG] Execution loop Worker:bdf7a8a7 has started in 0.6736 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":26,"EnvironmentName":"Development"}
2026-01-17 14:15:48.223 +07:00 [DBG] Execution loop Worker:c102ee18 has started in 0.7475 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":27,"EnvironmentName":"Development"}
2026-01-17 14:15:48.223 +07:00 [DBG] Execution loop Worker:89e991e5 has started in 0.835 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":28,"EnvironmentName":"Development"}
2026-01-17 14:15:48.223 +07:00 [DBG] Execution loop Worker:c02aa82d has started in 0.9852 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":29,"EnvironmentName":"Development"}
2026-01-17 14:15:48.223 +07:00 [DBG] Execution loop Worker:fe02d760 has started in 1.1954 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":30,"EnvironmentName":"Development"}
2026-01-17 14:15:48.223 +07:00 [DBG] Execution loop Worker:55ba29bf has started in 1.3034 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":31,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:e43e141d has started in 1.4638 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":32,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:8c2b9bad has started in 1.5727 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":33,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:2e8a4c71 has started in 1.6767 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":34,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:8cc5346d has started in 1.7669 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":35,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:dd5c2dd8 has started in 1.8561 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":36,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:c35bbd2e has started in 1.9543 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":37,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:6cec1306 has started in 2.0421 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":38,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:860db7d4 has started in 2.1428 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":39,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:56a0812e has started in 2.2268 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":40,"EnvironmentName":"Development"}
2026-01-17 14:15:48.224 +07:00 [DBG] Execution loop Worker:742b3a34 has started in 2.3286 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":41,"EnvironmentName":"Development"}
2026-01-17 14:15:48.225 +07:00 [DBG] Execution loop Worker:162e5bf9 has started in 2.4257 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":42,"EnvironmentName":"Development"}
2026-01-17 14:15:48.225 +07:00 [DBG] Execution loop Worker:984cc9a8 has started in 2.5916 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":43,"EnvironmentName":"Development"}
2026-01-17 14:15:48.225 +07:00 [DBG] Execution loop Worker:6e897154 has started in 2.7891 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":44,"EnvironmentName":"Development"}
2026-01-17 14:15:48.225 +07:00 [DBG] Execution loop Worker:8c92e9b1 has started in 2.8536 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":45,"EnvironmentName":"Development"}
2026-01-17 14:15:48.225 +07:00 [DBG] Execution loop Worker:ff880ae0 has started in 2.9823 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":46,"EnvironmentName":"Development"}
2026-01-17 14:15:48.225 +07:00 [DBG] Execution loop Worker:0376d63a has started in 3.0532 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":47,"EnvironmentName":"Development"}
2026-01-17 14:15:48.225 +07:00 [DBG] Execution loop Worker:39dd33d1 has started in 3.1841 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":48,"EnvironmentName":"Development"}
2026-01-17 14:15:48.225 +07:00 [DBG] Execution loop Worker:d6985f56 has started in 3.2951 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":49,"EnvironmentName":"Development"}
2026-01-17 14:15:48.225 +07:00 [DBG] Execution loop Worker:60d20c7e has started in 3.3724 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":50,"EnvironmentName":"Development"}
2026-01-17 14:15:48.226 +07:00 [DBG] Execution loop Worker:72df7e8c has started in 3.4597 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":51,"EnvironmentName":"Development"}
2026-01-17 14:15:48.226 +07:00 [DBG] Execution loop Worker:e0b1c285 has started in 3.5724 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":52,"EnvironmentName":"Development"}
2026-01-17 14:15:48.226 +07:00 [DBG] Execution loop Worker:571f0935 has started in 3.6915 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":53,"EnvironmentName":"Development"}
2026-01-17 14:15:48.226 +07:00 [DBG] Execution loop DelayedJobScheduler:cbff9e33 has started in 0.0918 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":54,"EnvironmentName":"Development"}
2026-01-17 14:15:48.226 +07:00 [DBG] Execution loop RecurringJobScheduler:4a8907ca has started in 0.1186 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:15:48.226 +07:00 [INF] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:15:48.316 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:15:48.318 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:15:48.445 +07:00 [DBG] Removing outdated records from the 'Job' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:15:48.493 +07:00 [DBG] Removing outdated records from the 'List' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:15:48.502 +07:00 [DBG] Removing outdated records from the 'Set' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:15:48.517 +07:00 [DBG] Removing outdated records from the 'Hash' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:16:03.558 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:16:03.747 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:16:04.088 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:16:04.094 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:16:04.100 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:16:04.107 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:16:04.114 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:16:04.123 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:16:04.132 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:16:04.141 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:16:04.149 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:16:04.548 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:16:04.567 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:16:18.240 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:16:48.268 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:17:03.674 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:17:03.684 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:17:03.839 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":59,"EnvironmentName":"Development"}
2026-01-17 14:17:03.867 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":59,"EnvironmentName":"Development"}
2026-01-17 14:17:18.315 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:17:48.327 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:18:03.917 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:18:03.923 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:18:03.931 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":59,"EnvironmentName":"Development"}
2026-01-17 14:18:03.942 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:18:18.348 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:18:48.370 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:19:04.059 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":59,"EnvironmentName":"Development"}
2026-01-17 14:19:04.064 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:19:04.084 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":59,"EnvironmentName":"Development"}
2026-01-17 14:19:04.089 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:19:18.389 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:19:48.426 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:20:04.230 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":62,"EnvironmentName":"Development"}
2026-01-17 14:20:04.340 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":59,"EnvironmentName":"Development"}
2026-01-17 14:20:04.342 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":62,"EnvironmentName":"Development"}
2026-01-17 14:20:04.385 +07:00 [DBG] 5 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:20:04.415 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:20:04.614 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:20:04.641 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:20:04.820 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":62,"EnvironmentName":"Development"}
2026-01-17 14:20:04.851 +07:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:20:04.877 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":62,"EnvironmentName":"Development"}
2026-01-17 14:20:04.888 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:20:18.485 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:20:48.489 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:20:48.516 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:21:04.552 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:21:04.558 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:21:04.562 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:21:04.573 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:21:18.533 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:21:48.551 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:22:04.671 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:22:04.680 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:22:04.690 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:22:04.700 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:22:18.571 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:22:48.585 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:23:04.808 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:23:04.815 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:23:04.820 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:23:04.828 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:23:18.597 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:23:48.628 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:24:04.953 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:24:04.963 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:24:04.963 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:24:04.990 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:24:18.661 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:24:48.702 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:25:05.109 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:25:05.125 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:25:05.113 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:25:05.144 +07:00 [DBG] 5 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:25:05.156 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:25:05.185 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:25:05.360 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:25:05.370 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:25:05.399 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:25:05.422 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:25:18.729 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:25:48.607 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:25:48.749 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:26:05.290 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:26:05.291 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:26:05.293 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":65,"EnvironmentName":"Development"}
2026-01-17 14:26:05.300 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:26:18.771 +07:00 [DBG] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:26:32.064 +07:00 [DBG] Hangfire Server is stopping... {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:26:32.284 +07:00 [INF] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd caught stopping signal... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:26:32.405 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:b514c504 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 14:26:32.405 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:cde41f0a stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 14:26:32.405 +07:00 [DBG] Execution loop Worker:c3739cbf stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":25,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:dd5c2dd8 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":36,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:c02aa82d stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":29,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:6cec1306 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":38,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop DelayedJobScheduler:cbff9e33 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":54,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:162e5bf9 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":42,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:fe02d760 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":30,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:742b3a34 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":41,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:6e897154 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":44,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:0376d63a stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":47,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:ff880ae0 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":46,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:39dd33d1 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":48,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:72df7e8c stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":51,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop ExpirationManager:806de7ce stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:d6985f56 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":49,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:60d20c7e stopped in 0.2408 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":50,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:8ee51bae stopped in 0.2832 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":23,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:8c2b9bad stopped in 0.3517 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":33,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:8cc5346d stopped in 0.4346 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":35,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:51527e4e stopped in 0.4711 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":22,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:c102ee18 stopped in 0.4392 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":27,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:55ba29bf stopped in 0.5299 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":31,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:2e8a4c71 stopped in 0.5829 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":34,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:e43e141d stopped in 0.5931 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":32,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:e0b1c285 stopped in 0.8841 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":52,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:571f0935 stopped in 0.8948 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":53,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [INF] Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:26:32.405 +07:00 [DBG] Execution loop RecurringJobScheduler:4a8907ca stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:26:32.405 +07:00 [DBG] Execution loop ServerWatchdog:d2d0584e stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:860db7d4 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":39,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:984cc9a8 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":43,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:56a0812e stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":40,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:8c92e9b1 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":45,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:f7fffc7f stopped in 0.3808 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":24,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:89e991e5 stopped in 0.5229 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":28,"EnvironmentName":"Development"}
2026-01-17 14:26:32.407 +07:00 [DBG] Execution loop Worker:bdf7a8a7 stopped in 0.6244 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":26,"EnvironmentName":"Development"}
2026-01-17 14:26:32.405 +07:00 [DBG] Execution loop CountersAggregator:ff0e736a stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:26:32.406 +07:00 [DBG] Execution loop Worker:c35bbd2e stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":37,"EnvironmentName":"Development"}
2026-01-17 14:26:32.636 +07:00 [DBG] Hangfire Server is stopping... {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":65,"EnvironmentName":"Development"}
2026-01-17 14:26:32.733 +07:00 [INF] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd All dispatchers stopped {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:26:32.739 +07:00 [DBG] Execution loop ServerHeartbeatProcess:9aa9e5e8 stopped in 0.122 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:26:32.773 +07:00 [INF] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd successfully reported itself as stopped in 8.1742 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:26:32.780 +07:00 [INF] Server desktop-vcgaaea:f2b1ed36-3601-44c6-b3c0-9bc5b19271d0:36968:1c83b80a-40a4-4dde-a44f-f606f59e2efd has been stopped in total 373.678 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:26:32.788 +07:00 [DBG] Execution loop BackgroundServerProcess:6209a902 stopped in 382.0916 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:28:43.596 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:28:44.532 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:28:44.930 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:28:45.239 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:28:45.247 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 14:28:45.617 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:45.631 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:45.652 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:28:45.713 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:28:45.736 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:28:45.746 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:28:45.759 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:28:45.776 +07:00 [INF] Applying migration '20260117042220_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:28:45.815 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'master') IS NULL EXEC(N'CREATE SCHEMA [master];'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:28:45.836 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:28:45.848 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:45.860 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:45.874 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:45.886 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:45.898 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [master].[Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:45.911 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:45.943 +07:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:45.959 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Introducing FOREIGN KEY constraint 'FK_UserRole_User_UserId' on table 'UserRole' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint or index. See previous errors.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 407
ClientConnectionId:cf14342b-2cf3-4eb1-9dcc-52896c239307
Error Number:1785,State:0,Class:16
2026-01-17 14:28:45.980 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.134 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.138 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.151 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.213 +07:00 [INF] Now listening on: http://localhost:5000 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.222 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.226 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.231 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.241 +07:00 [DBG] Execution loop BackgroundServerProcess:124c9e45 has started in 3.0651 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:28:46.244 +07:00 [INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.250 +07:00 [INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.254 +07:00 [INF] Content root path: D:\Draft\crm\backend\src\CrmSaas.Api {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:46.264 +07:00 [INF] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 successfully announced in 14.4294 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:28:46.269 +07:00 [DBG] Execution loop ServerHeartbeatProcess:2081f3e5 has started in 0.776 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:28:46.270 +07:00 [INF] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:28:46.278 +07:00 [DBG] Execution loop ServerWatchdog:a0910663 has started in 0.6823 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 14:28:46.278 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:21ce7716 has started in 0.3016 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 14:28:46.279 +07:00 [DBG] Execution loop ExpirationManager:2639cb49 has started in 0.2498 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:28:46.279 +07:00 [DBG] Execution loop CountersAggregator:5fb51b31 has started in 0.207 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:28:46.279 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:0c41d182 has started in 0.1533 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:76ab0156 has started in 0.2432 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":22,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:54358711 has started in 0.3229 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":23,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:68d62cdb has started in 0.3983 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":24,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:d837f310 has started in 0.5159 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":25,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:b5f88c66 has started in 0.5891 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":26,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:1811c0d8 has started in 0.661 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":27,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:4cd61ec8 has started in 0.7363 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":28,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:c63a1bab has started in 0.7927 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":29,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:521bda8c has started in 0.8617 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":30,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:4fcb0aba has started in 0.9396 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":31,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:e03d5f42 has started in 1.0474 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":32,"EnvironmentName":"Development"}
2026-01-17 14:28:46.280 +07:00 [DBG] Execution loop Worker:e230ab43 has started in 1.1146 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":33,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:4101130b has started in 1.2069 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":34,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:b57d977f has started in 1.2991 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":35,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:de101d4c has started in 1.3829 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":36,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:36ad1588 has started in 1.4417 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":37,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:04a0cae0 has started in 1.5114 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":38,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:f8accdd1 has started in 1.5883 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":39,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:887671b4 has started in 1.6623 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":40,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:2f8cb8a9 has started in 1.7653 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":41,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:ec8a2e6f has started in 1.8285 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":42,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:81325024 has started in 1.9422 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":43,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:4ade1ef1 has started in 2.0202 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":44,"EnvironmentName":"Development"}
2026-01-17 14:28:46.281 +07:00 [DBG] Execution loop Worker:8dac606a has started in 2.1124 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":45,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop Worker:697237d9 has started in 2.2248 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":46,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop Worker:8b0783b4 has started in 2.338 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":47,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop Worker:8c5a6b18 has started in 2.4113 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":48,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop Worker:cbee2b08 has started in 2.4834 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":49,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop Worker:4fe03b91 has started in 2.6005 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":50,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop Worker:a5fd8115 has started in 2.7153 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":51,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop Worker:31f7f633 has started in 2.7743 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":52,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop Worker:e5e1529e has started in 2.8626 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":53,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop DelayedJobScheduler:0c0df615 has started in 0.0938 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":54,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [DBG] Execution loop RecurringJobScheduler:7b60e1e7 has started in 0.13 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:28:46.282 +07:00 [INF] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 14:28:46.365 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:28:46.366 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:28:46.694 +07:00 [DBG] Removing outdated records from the 'Job' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:28:46.722 +07:00 [DBG] Removing outdated records from the 'List' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:28:46.735 +07:00 [DBG] Removing outdated records from the 'Set' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:28:46.751 +07:00 [DBG] Removing outdated records from the 'Hash' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:28:46.949 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:28:47.005 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 14:28:47.420 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.427 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.433 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.440 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.448 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.455 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.462 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.469 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.475 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.801 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:28:47.815 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:29:02.004 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:29:02.008 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:29:02.067 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:29:02.073 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:29:16.287 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:29:46.307 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:30:02.116 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:30:02.126 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:30:02.132 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:30:02.141 +07:00 [DBG] 6 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:30:02.190 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:30:02.198 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:30:02.298 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:30:02.328 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:30:02.336 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:30:02.353 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:30:02.354 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@now='?' (DbType = DateTime2), @reminderWindow='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AssignedToUserId], [a].[CompletedDate], [a].[ContactId], [a].[CreatedAt], [a].[CreatedBy], [a].[CustomFields], [a].[CustomerId], [a].[DeletedAt], [a].[DeletedBy], [a].[Description], [a].[DueDate], [a].[DurationMinutes], [a].[IsDeleted], [a].[IsRecurring], [a].[LeadId], [a].[OpportunityId], [a].[ParentActivityId], [a].[Priority], [a].[RecurrenceEndDate], [a].[RecurrenceInterval], [a].[RecurrencePattern], [a].[StartDate], [a].[Status], [a].[Subject], [a].[Tags], [a].[TenantId], [a].[TicketId], [a].[Type], [a].[UpdatedAt], [a].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Activities] AS [a]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [a].[AssignedToUserId] = [u0].[Id]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[DueDate] IS NOT NULL AND [a].[DueDate] >= @now AND [a].[DueDate] <= @reminderWindow {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:30:02.364 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:30:16.338 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:30:46.359 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:31:02.272 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:31:02.278 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:31:02.279 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":65,"EnvironmentName":"Development"}
2026-01-17 14:31:02.304 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:31:16.372 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:31:46.408 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:32:02.396 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:32:02.400 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 14:32:02.402 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:32:02.426 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:32:16.447 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:32:46.464 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:33:02.542 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:33:02.545 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 14:33:02.555 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:33:02.561 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:33:16.479 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:33:46.504 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:33:46.579 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:34:02.631 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:34:02.634 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:34:02.644 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:34:02.656 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:34:16.523 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:34:46.539 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:35:02.751 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:35:02.796 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":59,"EnvironmentName":"Development"}
2026-01-17 14:35:02.805 +07:00 [DBG] 5 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:35:02.816 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:35:02.791 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:35:02.934 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:35:03.024 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:35:03.031 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:35:03.052 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:35:03.061 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:35:16.558 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:35:46.585 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:36:02.997 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:36:03.001 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:36:03.021 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:36:03.026 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:36:16.611 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:36:46.638 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:37:03.172 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:37:03.174 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":68,"EnvironmentName":"Development"}
2026-01-17 14:37:03.179 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:37:03.186 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:37:16.658 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:37:46.680 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:38:03.353 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:38:03.355 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":69,"EnvironmentName":"Development"}
2026-01-17 14:38:03.361 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:38:03.368 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:38:16.702 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:38:46.635 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:38:46.720 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:39:03.444 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:39:03.445 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:39:03.449 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:39:03.457 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:39:16.735 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:39:46.757 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:40:03.552 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:40:03.572 +07:00 [DBG] 5 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:40:03.651 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:40:03.781 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:40:03.794 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:40:03.837 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:40:03.923 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:40:04.040 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:40:04.055 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:40:04.088 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:40:16.781 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:40:46.815 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:41:03.763 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:41:03.767 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:41:03.785 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:41:03.799 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:41:16.823 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:41:46.854 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:42:03.974 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:42:03.985 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:42:03.995 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:42:04.039 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:42:16.882 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:42:46.912 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:43:04.142 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:43:04.145 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:43:04.150 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":65,"EnvironmentName":"Development"}
2026-01-17 14:43:04.159 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":65,"EnvironmentName":"Development"}
2026-01-17 14:43:16.953 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:43:46.693 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:43:46.965 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:44:04.237 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:44:04.239 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:44:04.243 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:44:04.254 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:44:17.000 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:44:47.025 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:45:04.347 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@now='?' (DbType = DateTime2), @reminderWindow='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AssignedToUserId], [a].[CompletedDate], [a].[ContactId], [a].[CreatedAt], [a].[CreatedBy], [a].[CustomFields], [a].[CustomerId], [a].[DeletedAt], [a].[DeletedBy], [a].[Description], [a].[DueDate], [a].[DurationMinutes], [a].[IsDeleted], [a].[IsRecurring], [a].[LeadId], [a].[OpportunityId], [a].[ParentActivityId], [a].[Priority], [a].[RecurrenceEndDate], [a].[RecurrenceInterval], [a].[RecurrencePattern], [a].[StartDate], [a].[Status], [a].[Subject], [a].[Tags], [a].[TenantId], [a].[TicketId], [a].[Type], [a].[UpdatedAt], [a].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Activities] AS [a]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [a].[AssignedToUserId] = [u0].[Id]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[DueDate] IS NOT NULL AND [a].[DueDate] >= @now AND [a].[DueDate] <= @reminderWindow {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:45:04.353 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:45:04.355 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:45:04.367 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:45:04.371 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:45:04.373 +07:00 [DBG] 6 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:45:04.379 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:45:04.391 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:45:04.398 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:45:04.400 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:45:04.408 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:45:17.054 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:45:47.079 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:46:04.486 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:46:04.490 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:46:04.501 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:46:04.508 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:46:17.104 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:46:47.135 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:47:04.666 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":60,"EnvironmentName":"Development"}
2026-01-17 14:47:04.667 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:47:04.666 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:47:04.942 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:47:17.157 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:47:47.172 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:48:05.045 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:48:05.049 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:48:05.055 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:48:05.089 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:48:17.198 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:48:46.733 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:48:47.221 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:49:05.165 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:49:05.171 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:49:05.175 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:49:05.183 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 14:49:17.300 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:49:47.326 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:50:05.312 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:50:05.365 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:50:05.376 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:50:05.397 +07:00 [DBG] 5 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:50:05.409 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:50:05.423 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:50:05.440 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:50:05.654 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:50:05.682 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:50:05.700 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 14:50:17.360 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:50:47.428 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:51:05.744 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:51:05.747 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:51:05.757 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:51:05.766 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:51:17.475 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:51:47.502 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:52:05.888 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:52:05.894 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:52:05.895 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":65,"EnvironmentName":"Development"}
2026-01-17 14:52:05.924 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:52:17.530 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:52:47.562 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:53:05.997 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:53:06.000 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":65,"EnvironmentName":"Development"}
2026-01-17 14:53:06.003 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:53:06.031 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:53:17.579 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:53:46.826 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:53:47.609 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:54:06.159 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:54:06.167 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:54:06.167 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:54:06.200 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:54:17.632 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:54:47.759 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:55:06.284 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:55:06.315 +07:00 [DBG] 5 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:55:06.327 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:55:06.365 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:55:06.394 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:55:06.422 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 14:55:06.457 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:55:06.472 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:55:06.477 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:55:06.493 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:55:17.787 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:55:47.831 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:56:06.456 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:56:06.463 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:56:06.463 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 14:56:06.495 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:56:17.861 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:56:47.878 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:57:06.584 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:57:06.586 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:57:06.588 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 14:57:06.627 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:57:17.929 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:57:47.952 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:58:06.729 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:58:06.732 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:58:06.748 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:58:06.772 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 14:58:18.001 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:58:46.779 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:58:46.803 +07:00 [DBG] Removing outdated records from the 'Job' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:58:46.831 +07:00 [DBG] Removing outdated records from the 'List' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:58:46.845 +07:00 [DBG] Removing outdated records from the 'Set' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:58:46.859 +07:00 [DBG] Removing outdated records from the 'Hash' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 14:58:46.919 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 14:58:48.027 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:59:06.848 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 14:59:06.848 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:59:06.850 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 14:59:06.874 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 14:59:18.053 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 14:59:48.076 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 15:00:06.998 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 15:00:07.008 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@now='?' (DbType = DateTime2), @reminderWindow='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AssignedToUserId], [a].[CompletedDate], [a].[ContactId], [a].[CreatedAt], [a].[CreatedBy], [a].[CustomFields], [a].[CustomerId], [a].[DeletedAt], [a].[DeletedBy], [a].[Description], [a].[DueDate], [a].[DurationMinutes], [a].[IsDeleted], [a].[IsRecurring], [a].[LeadId], [a].[OpportunityId], [a].[ParentActivityId], [a].[Priority], [a].[RecurrenceEndDate], [a].[RecurrenceInterval], [a].[RecurrencePattern], [a].[StartDate], [a].[Status], [a].[Subject], [a].[Tags], [a].[TenantId], [a].[TicketId], [a].[Type], [a].[UpdatedAt], [a].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Activities] AS [a]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [a].[AssignedToUserId] = [u0].[Id]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[DueDate] IS NOT NULL AND [a].[DueDate] >= @now AND [a].[DueDate] <= @reminderWindow {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 15:00:07.009 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 15:00:07.022 +07:00 [DBG] 6 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 15:00:07.074 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 15:00:07.192 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 15:00:07.214 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 15:00:07.208 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 15:00:07.198 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 15:00:07.247 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 15:00:07.259 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 15:00:18.123 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 15:00:48.151 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 15:01:07.206 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 15:01:07.211 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 15:01:07.216 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 15:01:07.239 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 15:01:18.206 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 15:01:48.257 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 15:02:07.382 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 15:02:07.387 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":66,"EnvironmentName":"Development"}
2026-01-17 15:02:07.387 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 15:02:07.414 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 15:02:18.293 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 15:02:48.331 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 15:03:07.477 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 15:03:07.482 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 15:03:07.485 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 15:03:07.506 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 15:03:18.369 +07:00 [DBG] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 15:03:24.093 +07:00 [DBG] Hangfire Server is stopping... {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 15:03:24.100 +07:00 [INF] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 caught stopping signal... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 15:03:24.105 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:0c41d182 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop Worker:697237d9 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":46,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:21ce7716 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop Worker:a5fd8115 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":51,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop DelayedJobScheduler:0c0df615 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":54,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop RecurringJobScheduler:7b60e1e7 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop Worker:76ab0156 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":22,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop Worker:68d62cdb stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":24,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop Worker:521bda8c stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":30,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop Worker:4cd61ec8 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":28,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop Worker:c63a1bab stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":29,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop Worker:4fcb0aba stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":31,"EnvironmentName":"Development"}
2026-01-17 15:03:24.106 +07:00 [DBG] Execution loop Worker:e03d5f42 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":32,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:e230ab43 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":33,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:de101d4c stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":36,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:b5f88c66 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":26,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:f8accdd1 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":39,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:4101130b stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":34,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:d837f310 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":25,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:e5e1529e stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":53,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:54358711 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":23,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:36ad1588 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":37,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:4fe03b91 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":50,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:04a0cae0 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":38,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:887671b4 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":40,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:2f8cb8a9 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":41,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:8dac606a stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":45,"EnvironmentName":"Development"}
2026-01-17 15:03:24.107 +07:00 [DBG] Execution loop Worker:81325024 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":43,"EnvironmentName":"Development"}
2026-01-17 15:03:24.108 +07:00 [DBG] Execution loop Worker:ec8a2e6f stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":42,"EnvironmentName":"Development"}
2026-01-17 15:03:24.108 +07:00 [DBG] Execution loop CountersAggregator:5fb51b31 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 15:03:24.108 +07:00 [DBG] Execution loop Worker:8b0783b4 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":47,"EnvironmentName":"Development"}
2026-01-17 15:03:24.108 +07:00 [DBG] Execution loop ExpirationManager:2639cb49 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 15:03:24.108 +07:00 [DBG] Execution loop Worker:31f7f633 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":52,"EnvironmentName":"Development"}
2026-01-17 15:03:24.108 +07:00 [DBG] Execution loop Worker:cbee2b08 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":49,"EnvironmentName":"Development"}
2026-01-17 15:03:24.108 +07:00 [DBG] Execution loop ServerWatchdog:a0910663 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 15:03:24.108 +07:00 [DBG] Execution loop Worker:8c5a6b18 stopped in 0 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":48,"EnvironmentName":"Development"}
2026-01-17 15:03:24.108 +07:00 [DBG] Execution loop Worker:b57d977f stopped in 0.0614 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":35,"EnvironmentName":"Development"}
2026-01-17 15:03:24.109 +07:00 [DBG] Execution loop Worker:1811c0d8 stopped in 0.4184 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":27,"EnvironmentName":"Development"}
2026-01-17 15:03:24.110 +07:00 [INF] Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 15:03:24.120 +07:00 [DBG] Execution loop Worker:4ade1ef1 stopped in 12.0167 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":44,"EnvironmentName":"Development"}
2026-01-17 15:03:24.297 +07:00 [INF] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 All dispatchers stopped {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 15:03:24.302 +07:00 [DBG] Execution loop ServerHeartbeatProcess:2081f3e5 stopped in 0.4865 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 15:03:24.315 +07:00 [DBG] Hangfire Server is stopping... {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":67,"EnvironmentName":"Development"}
2026-01-17 15:03:24.328 +07:00 [INF] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 successfully reported itself as stopped in 14.5934 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 15:03:24.332 +07:00 [INF] Server desktop-vcgaaea:c2fd619e-cc56-47a1-a16e-f0a0d2cb610a:46188:7aa28ce8-b517-4a6d-b8e4-e0056ab4ff13 has been stopped in total 223.7984 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 15:03:24.336 +07:00 [DBG] Execution loop BackgroundServerProcess:124c9e45 stopped in 227.9343 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:37:58.999 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:38:00.341 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:38:00.990 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:38:01.458 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:38:01.471 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:38:01.897 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:01.914 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. {"EventId":{"Id":20411,"Name":"Microsoft.EntityFrameworkCore.Migrations.AcquiringMigrationLock"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:01.937 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.007 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:38:02.032 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.047 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.061 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.082 +07:00 [INF] Applying migration '20260117042220_InitialCreate'. {"EventId":{"Id":20402,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationApplying"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.138 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'master') IS NULL EXEC(N'CREATE SCHEMA [master];'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.174 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[AuditLogs] (
    [Id] uniqueidentifier NOT NULL,
    [TenantId] uniqueidentifier NULL,
    [UserId] uniqueidentifier NULL,
    [UserEmail] nvarchar(100) NULL,
    [UserName] nvarchar(100) NULL,
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [EntityName] nvarchar(200) NULL,
    [OldValues] nvarchar(max) NULL,
    [NewValues] nvarchar(max) NULL,
    [ChangedProperties] nvarchar(max) NULL,
    [Timestamp] datetime2 NOT NULL,
    [IpAddress] nvarchar(50) NULL,
    [UserAgent] nvarchar(500) NULL,
    [RequestPath] nvarchar(200) NULL,
    [HttpMethod] nvarchar(10) NULL,
    [AdditionalData] nvarchar(max) NULL,
    CONSTRAINT [PK_AuditLogs] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.186 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Module] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:38:02.201 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Tenants] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Identifier] nvarchar(50) NOT NULL,
    [Subdomain] nvarchar(100) NULL,
    [ConnectionString] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [Plan] int NOT NULL,
    [PlanExpiryDate] datetime2 NULL,
    [MaxUsers] int NOT NULL,
    [MaxStorageBytes] bigint NOT NULL,
    [LogoUrl] nvarchar(500) NULL,
    [PrimaryColor] nvarchar(50) NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Settings] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    CONSTRAINT [PK_Tenants] PRIMARY KEY ([Id])
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.221 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NULL,
    [IsSystemRole] bit NOT NULL,
    [DataScope] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Role_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 16:38:02.238 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(256) NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NULL,
    [AvatarUrl] nvarchar(500) NULL,
    [Status] int NOT NULL,
    [LastLoginAt] datetime2 NULL,
    [FailedLoginAttempts] int NOT NULL,
    [LockoutEnd] datetime2 NULL,
    [EmailConfirmed] bit NOT NULL,
    [EmailConfirmationToken] nvarchar(max) NULL,
    [PasswordResetToken] nvarchar(max) NULL,
    [PasswordResetTokenExpiry] datetime2 NULL,
    [TimeZone] nvarchar(100) NULL,
    [Culture] nvarchar(10) NULL,
    [Preferences] nvarchar(max) NULL,
    [ExternalProvider] nvarchar(50) NULL,
    [ExternalId] nvarchar(256) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_Tenants_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [master].[Tenants] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:38:02.255 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [master].[Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:38:02.273 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[RefreshToken] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [Token] nvarchar(500) NOT NULL,
    [ExpiresAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(50) NULL,
    [RevokedAt] datetime2 NULL,
    [RevokedByIp] nvarchar(50) NULL,
    [ReplacedByToken] nvarchar(500) NULL,
    [ReasonRevoked] nvarchar(200) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.318 +07:00 [ERR] Failed executing DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.375 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Introducing FOREIGN KEY constraint 'FK_UserRole_User_UserId' on table 'UserRole' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint or index. See previous errors.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 414
ClientConnectionId:4a4e2c6d-2967-4d49-9bf3-64d74764bfd4
Error Number:1785,State:0,Class:16
2026-01-17 16:38:02.403 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.622 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.626 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.644 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.887 +07:00 [INF] Now listening on: https://localhost:5001 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:02.901 +07:00 [INF] Now listening on: http://localhost:5000 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:03.040 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:03.048 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:03.054 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:03.076 +07:00 [DBG] Execution loop BackgroundServerProcess:a99f6b24 has started in 6.5885 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:38:03.083 +07:00 [INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:03.094 +07:00 [INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:03.106 +07:00 [INF] Content root path: D:\Draft\crm\backend\src\CrmSaas.Api {"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:03.125 +07:00 [INF] Server desktop-vcgaaea:a04d58d0-a183-437d-8b9b-dce4ea73c52a:24108:2975eed9-26a4-46bd-8ce6-22d15c7751d8 successfully announced in 30.7274 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:38:03.140 +07:00 [DBG] Execution loop ServerHeartbeatProcess:771fa1a1 has started in 4.7186 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:38:03.141 +07:00 [INF] Server desktop-vcgaaea:a04d58d0-a183-437d-8b9b-dce4ea73c52a:24108:2975eed9-26a4-46bd-8ce6-22d15c7751d8 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:38:03.195 +07:00 [DBG] Execution loop ServerJobCancellationWatcher:8bafaa8e has started in 38.9992 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 16:38:03.195 +07:00 [DBG] Execution loop ServerWatchdog:97811d02 has started in 39.9748 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 16:38:03.541 +07:00 [INF] Server desktop-vcgaaea:a04d58d0-a183-437d-8b9b-dce4ea73c52a:24108:2975eed9-26a4-46bd-8ce6-22d15c7751d8 all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:38:03.201 +07:00 [DBG] Execution loop ExpirationManager:cc4fb518 has started in 5.188 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 16:38:03.227 +07:00 [DBG] Execution loop CountersAggregator:32e06465 has started in 30.4284 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":22,"EnvironmentName":"Development"}
2026-01-17 16:38:03.227 +07:00 [DBG] Execution loop SqlServerHeartbeatProcess:a1c50774 has started in 26.506 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":23,"EnvironmentName":"Development"}
2026-01-17 16:38:03.233 +07:00 [DBG] Execution loop Worker:55e8eb5e has started in 6.2066 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":24,"EnvironmentName":"Development"}
2026-01-17 16:38:03.237 +07:00 [DBG] Execution loop Worker:1a872540 has started in 9.5354 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":25,"EnvironmentName":"Development"}
2026-01-17 16:38:03.274 +07:00 [DBG] Execution loop Worker:b4f97f3a has started in 46.6367 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":26,"EnvironmentName":"Development"}
2026-01-17 16:38:03.274 +07:00 [DBG] Execution loop Worker:e2b647dc has started in 46.6382 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":27,"EnvironmentName":"Development"}
2026-01-17 16:38:03.277 +07:00 [DBG] Execution loop Worker:ab4bd4fc has started in 50.0455 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":28,"EnvironmentName":"Development"}
2026-01-17 16:38:03.285 +07:00 [DBG] Execution loop Worker:f7106873 has started in 55.7204 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":29,"EnvironmentName":"Development"}
2026-01-17 16:38:03.285 +07:00 [DBG] Execution loop Worker:5c8a0df7 has started in 58.0046 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":30,"EnvironmentName":"Development"}
2026-01-17 16:38:03.288 +07:00 [DBG] Execution loop Worker:1a9c39a8 has started in 61.1717 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":31,"EnvironmentName":"Development"}
2026-01-17 16:38:03.291 +07:00 [DBG] Execution loop Worker:1063623e has started in 64.4029 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":32,"EnvironmentName":"Development"}
2026-01-17 16:38:03.335 +07:00 [DBG] Execution loop Worker:85f44e4f has started in 69.3845 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":33,"EnvironmentName":"Development"}
2026-01-17 16:38:03.335 +07:00 [DBG] Execution loop Worker:9f70f38a has started in 107.8377 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":34,"EnvironmentName":"Development"}
2026-01-17 16:38:03.335 +07:00 [DBG] Execution loop Worker:d3a384b8 has started in 107.9695 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":35,"EnvironmentName":"Development"}
2026-01-17 16:38:03.338 +07:00 [DBG] Execution loop Worker:254d6cb8 has started in 111.1589 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":36,"EnvironmentName":"Development"}
2026-01-17 16:38:03.366 +07:00 [DBG] Execution loop Worker:87803edf has started in 139.1848 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":37,"EnvironmentName":"Development"}
2026-01-17 16:38:03.366 +07:00 [DBG] Execution loop Worker:1d4a1b4d has started in 139.179 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":38,"EnvironmentName":"Development"}
2026-01-17 16:38:03.371 +07:00 [DBG] Execution loop Worker:855f3694 has started in 143.5364 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":39,"EnvironmentName":"Development"}
2026-01-17 16:38:03.374 +07:00 [DBG] Execution loop Worker:601d724c has started in 146.6793 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":40,"EnvironmentName":"Development"}
2026-01-17 16:38:03.413 +07:00 [DBG] Execution loop Worker:6c7d51af has started in 186.3274 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":41,"EnvironmentName":"Development"}
2026-01-17 16:38:03.414 +07:00 [DBG] Execution loop Worker:1d789815 has started in 186.6319 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":42,"EnvironmentName":"Development"}
2026-01-17 16:38:03.414 +07:00 [DBG] Execution loop Worker:e80ace29 has started in 186.7077 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":43,"EnvironmentName":"Development"}
2026-01-17 16:38:03.448 +07:00 [DBG] Execution loop Worker:c6e8903f has started in 221.0927 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":44,"EnvironmentName":"Development"}
2026-01-17 16:38:03.448 +07:00 [DBG] Execution loop Worker:2242e8d7 has started in 221.112 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":45,"EnvironmentName":"Development"}
2026-01-17 16:38:03.453 +07:00 [DBG] Execution loop Worker:ec75609a has started in 225.6643 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":46,"EnvironmentName":"Development"}
2026-01-17 16:38:03.456 +07:00 [DBG] Execution loop Worker:0f75a328 has started in 229.2094 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":47,"EnvironmentName":"Development"}
2026-01-17 16:38:03.491 +07:00 [DBG] Execution loop Worker:76aefa4e has started in 238.0595 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":48,"EnvironmentName":"Development"}
2026-01-17 16:38:03.491 +07:00 [DBG] Execution loop Worker:cb4d68c3 has started in 238.0671 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":49,"EnvironmentName":"Development"}
2026-01-17 16:38:03.491 +07:00 [DBG] Execution loop Worker:e53c234f has started in 264.3264 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":50,"EnvironmentName":"Development"}
2026-01-17 16:38:03.491 +07:00 [DBG] Execution loop Worker:1cc48043 has started in 264.3472 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":51,"EnvironmentName":"Development"}
2026-01-17 16:38:03.495 +07:00 [DBG] Execution loop Worker:5a748c79 has started in 267.8887 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":52,"EnvironmentName":"Development"}
2026-01-17 16:38:03.499 +07:00 [DBG] Execution loop Worker:a65aee11 has started in 271.8918 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":53,"EnvironmentName":"Development"}
2026-01-17 16:38:03.536 +07:00 [DBG] Execution loop Worker:6de883fa has started in 309.2119 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":54,"EnvironmentName":"Development"}
2026-01-17 16:38:03.537 +07:00 [DBG] Execution loop Worker:7e6af356 has started in 309.4391 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":55,"EnvironmentName":"Development"}
2026-01-17 16:38:03.568 +07:00 [DBG] Execution loop DelayedJobScheduler:0233c682 has started in 65.6844 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":56,"EnvironmentName":"Development"}
2026-01-17 16:38:03.568 +07:00 [DBG] Execution loop RecurringJobScheduler:7af007c4 has started in 31.1302 ms {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 16:38:03.608 +07:00 [DBG] Removing outdated records from the 'AggregatedCounter' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 16:38:03.743 +07:00 [DBG] Aggregating records in 'Counter' table... {"SourceContext":"Hangfire.SqlServer.CountersAggregator","MachineName":"DESKTOP-VCGAAEA","ThreadId":22,"EnvironmentName":"Development"}
2026-01-17 16:38:04.110 +07:00 [DBG] Removing outdated records from the 'Job' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 16:38:04.156 +07:00 [DBG] Removing outdated records from the 'List' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 16:38:04.203 +07:00 [DBG] Removing outdated records from the 'Set' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 16:38:04.233 +07:00 [DBG] Removing outdated records from the 'Hash' table... {"SourceContext":"Hangfire.SqlServer.ExpirationManager","MachineName":"DESKTOP-VCGAAEA","ThreadId":21,"EnvironmentName":"Development"}
2026-01-17 16:38:04.614 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/scalar/v1 - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000001","RequestPath":"/scalar/v1","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:38:04.681 +07:00 [DBG] 6 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 16:38:04.810 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 16:38:05.351 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:05.366 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:05.380 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:05.394 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:05.407 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:05.421 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:05.435 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:05.447 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:05.460 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:05.785 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:38:05.955 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:05.977 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.043 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.056 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.197 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.209 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:38:06.217 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.278 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:38:06.384 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@now='?' (DbType = DateTime2), @reminderWindow='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AssignedToUserId], [a].[CompletedDate], [a].[ContactId], [a].[CreatedAt], [a].[CreatedBy], [a].[CustomFields], [a].[CustomerId], [a].[DeletedAt], [a].[DeletedBy], [a].[Description], [a].[DueDate], [a].[DurationMinutes], [a].[IsDeleted], [a].[IsRecurring], [a].[LeadId], [a].[OpportunityId], [a].[ParentActivityId], [a].[Priority], [a].[RecurrenceEndDate], [a].[RecurrenceInterval], [a].[RecurrencePattern], [a].[StartDate], [a].[Status], [a].[Subject], [a].[Tags], [a].[TenantId], [a].[TicketId], [a].[Type], [a].[UpdatedAt], [a].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Activities] AS [a]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [a].[AssignedToUserId] = [u0].[Id]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[DueDate] IS NOT NULL AND [a].[DueDate] >= @now AND [a].[DueDate] <= @reminderWindow {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.404 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILLGE9J5GK:00000001","RequestPath":"/scalar/v1","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 16:38:06.455 +07:00 [INF] Write content with HTTP Response ContentType of text/html {"EventId":{"Id":2,"Name":"WritingResultAsContent"},"SourceContext":"Microsoft.AspNetCore.Http.Result.ContentResult","RequestId":"0HNILLGE9J5GK:00000001","RequestPath":"/scalar/v1","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 16:38:06.488 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{documentName?}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILLGE9J5GK:00000001","RequestPath":"/scalar/v1","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 16:38:06.495 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/scalar/scalar.js - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000005","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:38:06.495 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000007","RequestPath":"/_framework/aspnetcore-browser-refresh.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:38:06.495 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/scalar/scalar.aspnetcore.js - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.496 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000009","RequestPath":"/_vs/browserLink","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:38:06.550 +07:00 [INF] HTTP GET /scalar/v1 responded 200 in 1656.3937 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLGE9J5GK:00000001","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 16:38:06.578 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 82.3929ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000007","RequestPath":"/_framework/aspnetcore-browser-refresh.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:38:06.583 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILLGE9J5GK:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.563 +07:00 [INF] Executing endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILLGE9J5GK:00000005","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:38:06.658 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 162.2296ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000009","RequestPath":"/_vs/browserLink","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:38:06.640 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5001/scalar/v1 - 200 null text/html 2035.2899ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000001","RequestPath":"/scalar/v1","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 16:38:06.667 +07:00 [INF] Sending file with download name ''. {"EventId":{"Id":5,"Name":"WritingResultAsFileWithNoFileName"},"SourceContext":"Microsoft.AspNetCore.Http.Result.FileStreamResult","RequestId":"0HNILLGE9J5GK:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.670 +07:00 [INF] Sending file with download name ''. {"EventId":{"Id":5,"Name":"WritingResultAsFileWithNoFileName"},"SourceContext":"Microsoft.AspNetCore.Http.Result.FileStreamResult","RequestId":"0HNILLGE9J5GK:00000005","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:38:06.744 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILLGE9J5GK:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.769 +07:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 200 in 190.6674 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLGE9J5GK:00000003","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.789 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5001/scalar/scalar.aspnetcore.js - 200 418 text/javascript 294.3498ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000003","RequestPath":"/scalar/scalar.aspnetcore.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:38:06.793 +07:00 [INF] Executed endpoint 'HTTP: GET /scalar/{path:regex(^scalar.*\.js$)}' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILLGE9J5GK:00000005","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:38:06.832 +07:00 [INF] HTTP GET /scalar/scalar.js responded 200 in 271.5917 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLGE9J5GK:00000005","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:38:06.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5001/scalar/scalar.js - 200 2697216 text/javascript 354.9285ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:00000005","RequestPath":"/scalar/scalar.js","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:38:06.916 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/openapi/v1.json - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:0000000B","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:38:06.934 +07:00 [INF] Executing endpoint 'HTTP: GET /openapi/{documentName}.json' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILLGE9J5GK:0000000B","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:38:07.117 +07:00 [INF] Executed endpoint 'HTTP: GET /openapi/{documentName}.json' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNILLGE9J5GK:0000000B","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:38:07.133 +07:00 [INF] HTTP GET /openapi/v1.json responded 200 in 198.5656 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLGE9J5GK:0000000B","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:38:07.148 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5001/openapi/v1.json - 200 null application/json;charset=utf-8 232.722ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:0000000B","RequestPath":"/openapi/v1.json","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:38:08.272 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/favicon.ico - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:0000000D","RequestPath":"/favicon.ico","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:38:08.414 +07:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[@tenantIdentifier='?' (Size = 50), @tenantIdentifier0='?' (Size = 100), @tenantIdentifier1='?' (Size = 36) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[ConnectionString], [t].[CreatedAt], [t].[CreatedBy], [t].[Culture], [t].[DeletedAt], [t].[DeletedBy], [t].[Identifier], [t].[IsDeleted], [t].[LogoUrl], [t].[MaxStorageBytes], [t].[MaxUsers], [t].[Name], [t].[Plan], [t].[PlanExpiryDate], [t].[PrimaryColor], [t].[Settings], [t].[Status], [t].[Subdomain], [t].[TimeZone], [t].[UpdatedAt], [t].[UpdatedBy]
FROM [master].[Tenants] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND ([t].[Identifier] = @tenantIdentifier OR [t].[Subdomain] = @tenantIdentifier0 OR CONVERT(varchar(36), [t].[Id]) = @tenantIdentifier1) {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNILLGE9J5GK:0000000D","RequestPath":"/favicon.ico","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:38:08.443 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CrmSaas.Api.Data.MasterDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7240fd58-e947-44e4-9678-67b0201480d8
Error Number:208,State:1,Class:16 {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","RequestId":"0HNILLGE9J5GK:0000000D","RequestPath":"/favicon.ico","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7240fd58-e947-44e4-9678-67b0201480d8
Error Number:208,State:1,Class:16
2026-01-17 16:38:08.719 +07:00 [ERR] HTTP GET /favicon.ico responded 500 in 424.9631 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLGE9J5GK:0000000D","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:7240fd58-e947-44e4-9678-67b0201480d8
Error Number:208,State:1,Class:16
2026-01-17 16:38:08.808 +07:00 [ERR] An unhandled exception occurred. TraceId: 0HNILLGE9J5GK:0000000D {"SourceContext":"CrmSaas.Api.Middleware.ExceptionHandlingMiddleware","RequestId":"0HNILLGE9J5GK:0000000D","RequestPath":"/favicon.ico","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CrmSaas.Api.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\Middleware\ExceptionHandlingMiddleware.cs:line 27
ClientConnectionId:7240fd58-e947-44e4-9678-67b0201480d8
Error Number:208,State:1,Class:16
2026-01-17 16:38:08.841 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5001/favicon.ico - 500 null application/json 568.5301ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GK:0000000D","RequestPath":"/favicon.ico","ConnectionId":"0HNILLGE9J5GK","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:38:33.336 +07:00 [DBG] Server desktop-vcgaaea:a04d58d0-a183-437d-8b9b-dce4ea73c52a:24108:2975eed9-26a4-46bd-8ce6-22d15c7751d8 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:39:03.423 +07:00 [DBG] Server desktop-vcgaaea:a04d58d0-a183-437d-8b9b-dce4ea73c52a:24108:2975eed9-26a4-46bd-8ce6-22d15c7751d8 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:39:04.914 +07:00 [DBG] 2 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 16:39:04.918 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 16:39:04.934 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:39:04.960 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":58,"EnvironmentName":"Development"}
2026-01-17 16:39:33.492 +07:00 [DBG] Server desktop-vcgaaea:a04d58d0-a183-437d-8b9b-dce4ea73c52a:24108:2975eed9-26a4-46bd-8ce6-22d15c7751d8 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:39:55.002 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GM:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNILLGE9J5GM","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:39:55.043 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 307 in 6.3759 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLGE9J5GM:00000001","ConnectionId":"0HNILLGE9J5GM","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:39:55.082 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - 307 0 null 83.412ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GM:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNILLGE9J5GM","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:39:56.089 +07:00 [DBG] Execution RecurringJobScheduler is in the Faulted state now due to an exception, execution will be retried in no more than 00:00:01 {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Hangfire.SqlServer.SqlServerDistributedLock.Acquire(DbConnection connection, String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerDistributedLock.cs:line 203
   at Hangfire.SqlServer.SqlServerConnection.AcquireLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 810
   at Hangfire.SqlServer.SqlServerConnection.AcquireDistributedLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 67
   at Hangfire.Server.RecurringJobScheduler.UseConnectionDistributedLock[T](JobStorage storage, Func`2 action) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 423
   at Hangfire.Server.RecurringJobScheduler.EnqueueNextRecurringJobs(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 203
   at Hangfire.Server.RecurringJobScheduler.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 176
   at Hangfire.Server.BackgroundProcessDispatcherBuilder.ExecuteProcess(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessDispatcherBuilder.cs:line 82
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:e21125d7-9ea5-4ba0-a704-e66d1722cba8
Error Number:-2,State:0,Class:11
2026-01-17 16:39:56.133 +07:00 [DBG] Execution loop RecurringJobScheduler:7af007c4 caught an exception and will be retried in 00:00:01 {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Hangfire.SqlServer.SqlServerDistributedLock.Acquire(DbConnection connection, String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerDistributedLock.cs:line 203
   at Hangfire.SqlServer.SqlServerConnection.AcquireLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 810
   at Hangfire.SqlServer.SqlServerConnection.AcquireDistributedLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 67
   at Hangfire.Server.RecurringJobScheduler.UseConnectionDistributedLock[T](JobStorage storage, Func`2 action) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 423
   at Hangfire.Server.RecurringJobScheduler.EnqueueNextRecurringJobs(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 203
   at Hangfire.Server.RecurringJobScheduler.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 176
   at Hangfire.Server.BackgroundProcessDispatcherBuilder.ExecuteProcess(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessDispatcherBuilder.cs:line 82
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:e21125d7-9ea5-4ba0-a704-e66d1722cba8
Error Number:-2,State:0,Class:11
2026-01-17 16:39:56.151 +07:00 [DBG] Execution loop RecurringJobScheduler:7af007c4 will be retried in 00:00:01... {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 16:40:00.195 +07:00 [DBG] Execution DelayedJobScheduler is in the Faulted state now due to an exception, execution will be retried in no more than 00:00:01 {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":56,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Hangfire.SqlServer.SqlServerDistributedLock.Acquire(DbConnection connection, String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerDistributedLock.cs:line 203
   at Hangfire.SqlServer.SqlServerConnection.AcquireLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 810
   at Hangfire.SqlServer.SqlServerConnection.AcquireDistributedLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 67
   at Hangfire.Server.DelayedJobScheduler.UseConnectionDistributedLock[T](JobStorage storage, Func`2 action) in C:\projects\hangfire-525\src\Hangfire.Core\Server\DelayedJobScheduler.cs:line 411
   at Hangfire.Server.DelayedJobScheduler.EnqueueNextScheduledJobs(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\DelayedJobScheduler.cs:line 167
   at Hangfire.Server.DelayedJobScheduler.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\DelayedJobScheduler.cs:line 148
   at Hangfire.Server.BackgroundProcessDispatcherBuilder.ExecuteProcess(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessDispatcherBuilder.cs:line 82
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:8bc1a2f8-1f40-4980-adc9-ac0c5c593310
Error Number:-2,State:0,Class:11
2026-01-17 16:40:00.215 +07:00 [DBG] Execution loop DelayedJobScheduler:0233c682 caught an exception and will be retried in 00:00:01 {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":56,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Hangfire.SqlServer.SqlServerDistributedLock.Acquire(DbConnection connection, String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerDistributedLock.cs:line 203
   at Hangfire.SqlServer.SqlServerConnection.AcquireLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 810
   at Hangfire.SqlServer.SqlServerConnection.AcquireDistributedLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 67
   at Hangfire.Server.DelayedJobScheduler.UseConnectionDistributedLock[T](JobStorage storage, Func`2 action) in C:\projects\hangfire-525\src\Hangfire.Core\Server\DelayedJobScheduler.cs:line 411
   at Hangfire.Server.DelayedJobScheduler.EnqueueNextScheduledJobs(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\DelayedJobScheduler.cs:line 167
   at Hangfire.Server.DelayedJobScheduler.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\DelayedJobScheduler.cs:line 148
   at Hangfire.Server.BackgroundProcessDispatcherBuilder.ExecuteProcess(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessDispatcherBuilder.cs:line 82
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:8bc1a2f8-1f40-4980-adc9-ac0c5c593310
Error Number:-2,State:0,Class:11
2026-01-17 16:40:00.233 +07:00 [DBG] Execution loop DelayedJobScheduler:0233c682 will be retried in 00:00:01... {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":56,"EnvironmentName":"Development"}
2026-01-17 16:40:03.174 +07:00 [DBG] Execution loop RecurringJobScheduler:7af007c4 caught an exception and will be retried in 00:00:04 {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Hangfire.SqlServer.SqlServerDistributedLock.Acquire(DbConnection connection, String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerDistributedLock.cs:line 203
   at Hangfire.SqlServer.SqlServerConnection.AcquireLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 810
   at Hangfire.SqlServer.SqlServerConnection.AcquireDistributedLock(String resource, TimeSpan timeout) in C:\projects\hangfire-525\src\Hangfire.SqlServer\SqlServerConnection.cs:line 67
   at Hangfire.Server.RecurringJobScheduler.UseConnectionDistributedLock[T](JobStorage storage, Func`2 action) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 423
   at Hangfire.Server.RecurringJobScheduler.EnqueueNextRecurringJobs(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 203
   at Hangfire.Server.RecurringJobScheduler.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 176
   at Hangfire.Server.BackgroundProcessDispatcherBuilder.ExecuteProcess(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessDispatcherBuilder.cs:line 82
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
ClientConnectionId:e21125d7-9ea5-4ba0-a704-e66d1722cba8
Error Number:-2,State:0,Class:11
2026-01-17 16:40:03.212 +07:00 [DBG] Execution loop RecurringJobScheduler:7af007c4 will be retried in 00:00:04... {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 16:40:03.544 +07:00 [DBG] Server desktop-vcgaaea:a04d58d0-a183-437d-8b9b-dce4ea73c52a:24108:2975eed9-26a4-46bd-8ce6-22d15c7751d8 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:40:03.642 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GN:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNILLGE9J5GN","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:40:03.677 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 307 in 0.1860 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLGE9J5GN:00000001","ConnectionId":"0HNILLGE9J5GN","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:40:03.702 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - 307 0 null 60.1841ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNILLGE9J5GN:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNILLGE9J5GN","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:40:07.415 +07:00 [INF] Executed DbCommand (81ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
FROM [WebhookDeliveries] AS [w]
WHERE [w].[Status] = 0 AND ([w].[NextRetryAt] IS NULL OR [w].[NextRetryAt] <= GETUTCDATE())
ORDER BY [w].[CreatedAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:40:07.457 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:40:07.749 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w1].[Id], [w1].[CompletedAt], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[DeletedAt], [w1].[DeletedBy], [w1].[DurationMs], [w1].[EntityId], [w1].[EntityType], [w1].[ErrorMessage], [w1].[EventType], [w1].[IsDeleted], [w1].[NextRetryAt], [w1].[Payload], [w1].[RequestHeaders], [w1].[ResponseBody], [w1].[ResponseHeaders], [w1].[ResponseStatusCode], [w1].[RetryCount], [w1].[Status], [w1].[TenantId], [w1].[UpdatedAt], [w1].[UpdatedBy], [w1].[WebhookSubscriptionId], [w0].[Id], [w0].[ContentType], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[CustomHeaders], [w0].[DeletedAt], [w0].[DeletedBy], [w0].[Description], [w0].[Events], [w0].[FailureCount], [w0].[IsActive], [w0].[IsDeleted], [w0].[LastFailureAt], [w0].[LastSuccessAt], [w0].[MaxRetries], [w0].[Name], [w0].[RetryPolicy], [w0].[Secret], [w0].[SuccessCount], [w0].[TargetUrl], [w0].[TenantId], [w0].[TimeoutSeconds], [w0].[UpdatedAt], [w0].[UpdatedBy]
FROM (
    SELECT TOP(@p) [w].[Id], [w].[CompletedAt], [w].[CreatedAt], [w].[CreatedBy], [w].[DeletedAt], [w].[DeletedBy], [w].[DurationMs], [w].[EntityId], [w].[EntityType], [w].[ErrorMessage], [w].[EventType], [w].[IsDeleted], [w].[NextRetryAt], [w].[Payload], [w].[RequestHeaders], [w].[ResponseBody], [w].[ResponseHeaders], [w].[ResponseStatusCode], [w].[RetryCount], [w].[Status], [w].[TenantId], [w].[UpdatedAt], [w].[UpdatedBy], [w].[WebhookSubscriptionId]
    FROM [WebhookDeliveries] AS [w]
    WHERE [w].[Status] = 4 AND [w].[NextRetryAt] <= GETUTCDATE()
    ORDER BY [w].[NextRetryAt]
) AS [w1]
INNER JOIN [WebhookSubscriptions] AS [w0] ON [w1].[WebhookSubscriptionId] = [w0].[Id]
ORDER BY [w1].[NextRetryAt] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:40:07.848 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:40:08.482 +07:00 [DBG] Scheduled workflow check completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:40:08.534 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[@p='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[ActivityId], [a1].[IsSent], [a1].[MinutesBefore], [a1].[RecipientEmail], [a1].[RecipientPhone], [a1].[RecipientUserId], [a1].[ScheduledFor], [a1].[SendEmail], [a1].[SendNotification], [a1].[SendSms], [a1].[SentAt], [a1].[Type], [a2].[Id], [a2].[AssignedToUserId], [a2].[CompletedDate], [a2].[ContactId], [a2].[CreatedAt], [a2].[CreatedBy], [a2].[CustomFields], [a2].[CustomerId], [a2].[DeletedAt], [a2].[DeletedBy], [a2].[Description], [a2].[DueDate], [a2].[DurationMinutes], [a2].[IsDeleted], [a2].[IsRecurring], [a2].[LeadId], [a2].[OpportunityId], [a2].[ParentActivityId], [a2].[Priority], [a2].[RecurrenceEndDate], [a2].[RecurrenceInterval], [a2].[RecurrencePattern], [a2].[StartDate], [a2].[Status], [a2].[Subject], [a2].[Tags], [a2].[TenantId], [a2].[TicketId], [a2].[Type], [a2].[UpdatedAt], [a2].[UpdatedBy]
FROM (
    SELECT TOP(@p) [a].[Id], [a].[ActivityId], [a].[IsSent], [a].[MinutesBefore], [a].[RecipientEmail], [a].[RecipientPhone], [a].[RecipientUserId], [a].[ScheduledFor], [a].[SendEmail], [a].[SendNotification], [a].[SendSms], [a].[SentAt], [a].[Type]
    FROM [ActivityReminders] AS [a]
    WHERE [a].[IsSent] = CAST(0 AS bit) AND [a].[ScheduledFor] <= GETUTCDATE()
) AS [a1]
INNER JOIN (
    SELECT [a0].[Id], [a0].[AssignedToUserId], [a0].[CompletedDate], [a0].[ContactId], [a0].[CreatedAt], [a0].[CreatedBy], [a0].[CustomFields], [a0].[CustomerId], [a0].[DeletedAt], [a0].[DeletedBy], [a0].[Description], [a0].[DueDate], [a0].[DurationMinutes], [a0].[IsDeleted], [a0].[IsRecurring], [a0].[LeadId], [a0].[OpportunityId], [a0].[ParentActivityId], [a0].[Priority], [a0].[RecurrenceEndDate], [a0].[RecurrenceInterval], [a0].[RecurrencePattern], [a0].[StartDate], [a0].[Status], [a0].[Subject], [a0].[Tags], [a0].[TenantId], [a0].[TicketId], [a0].[Type], [a0].[UpdatedAt], [a0].[UpdatedBy]
    FROM [Activities] AS [a0]
    WHERE [a0].[IsDeleted] = CAST(0 AS bit)
) AS [a2] ON [a1].[ActivityId] = [a2].[Id] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 16:40:08.495 +07:00 [DBG] 5 recurring job(s) processed by scheduler. {"SourceContext":"Hangfire.Server.RecurringJobScheduler","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 16:40:08.557 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AssignedToUserId], [t].[Category], [t].[Channel], [t].[ClosedDate], [t].[ContactId], [t].[CreatedAt], [t].[CreatedBy], [t].[CustomFields], [t].[CustomerId], [t].[DeletedAt], [t].[DeletedBy], [t].[Description], [t].[DueDate], [t].[EscalatedToUserId], [t].[EscalationCount], [t].[FirstResponseDate], [t].[FirstResponseTarget], [t].[IsDeleted], [t].[LastEscalatedAt], [t].[Priority], [t].[ResolutionTarget], [t].[ResolvedDate], [t].[SatisfactionComment], [t].[SatisfactionRating], [t].[SlaBreached], [t].[SlaId], [t].[SlaPauseReason], [t].[SlaPaused], [t].[SlaPausedAt], [t].[SlaPausedMinutes], [t].[Status], [t].[SubCategory], [t].[Subject], [t].[Tags], [t].[TenantId], [t].[TicketNumber], [t].[Type], [t].[UpdatedAt], [t].[UpdatedBy], [u0].[Id], [u0].[AvatarUrl], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[Culture], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[Email], [u0].[EmailConfirmationToken], [u0].[EmailConfirmed], [u0].[ExternalId], [u0].[ExternalProvider], [u0].[FailedLoginAttempts], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastLoginAt], [u0].[LastName], [u0].[LockoutEnd], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordResetTokenExpiry], [u0].[Phone], [u0].[Preferences], [u0].[Status], [u0].[TenantId], [u0].[TimeZone], [u0].[UpdatedAt], [u0].[UpdatedBy]
FROM [Tickets] AS [t]
LEFT JOIN (
    SELECT [u].[Id], [u].[AvatarUrl], [u].[CreatedAt], [u].[CreatedBy], [u].[Culture], [u].[DeletedAt], [u].[DeletedBy], [u].[Email], [u].[EmailConfirmationToken], [u].[EmailConfirmed], [u].[ExternalId], [u].[ExternalProvider], [u].[FailedLoginAttempts], [u].[FirstName], [u].[IsDeleted], [u].[LastLoginAt], [u].[LastName], [u].[LockoutEnd], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordResetTokenExpiry], [u].[Phone], [u].[Preferences], [u].[Status], [u].[TenantId], [u].[TimeZone], [u].[UpdatedAt], [u].[UpdatedBy]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [t].[AssignedToUserId] = [u0].[Id]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Status] NOT IN (6, 5) AND [t].[SlaPaused] = CAST(0 AS bit) AND [t].[ResolutionTarget] IS NOT NULL AND [t].[SlaBreached] = CAST(0 AS bit) {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:40:08.603 +07:00 [DBG] No due activity reminders found {"SourceContext":"CrmSaas.Api.Services.ActivityReminderService","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 16:40:08.623 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:40:18.559 +07:00 [INF] Execution DelayedJobScheduler recovered from the Faulted state after 00:00:18.3622777 and is in the Running state now {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":56,"EnvironmentName":"Development"}
2026-01-17 16:40:23.606 +07:00 [INF] Execution RecurringJobScheduler recovered from the Faulted state after 00:00:27.5169881 and is in the Running state now {"SourceContext":"Hangfire.Processing.BackgroundExecution","MachineName":"DESKTOP-VCGAAEA","ThreadId":57,"EnvironmentName":"Development"}
2026-01-17 16:40:33.580 +07:00 [DBG] Server desktop-vcgaaea:a04d58d0-a183-437d-8b9b-dce4ea73c52a:24108:2975eed9-26a4-46bd-8ce6-22d15c7751d8 heartbeat successfully sent {"SourceContext":"Hangfire.Server.ServerHeartbeatProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:41:50.249 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:41:51.552 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:41:52.403 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:41:53.072 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:41:53.086 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:41:53.997 +07:00 [ERR] Failed executing DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:41:54.063 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Introducing FOREIGN KEY constraint 'FK_UserRole_User_UserId' on table 'UserRole' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint or index. See previous errors.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 414
ClientConnectionId:2ffdd659-a0ed-4c87-ae66-703e64647725
Error Number:1785,State:0,Class:16
2026-01-17 16:41:54.102 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:41:54.415 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:41:54.425 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:41:54.965 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:41:54.977 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:41:54.990 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:41:55.094 +07:00 [INF] Server desktop-vcgaaea:884ac2a8-d3e6-441e-a7eb-c92422031f89:38972:3cb381b9-4627-4df0-a20c-9952ed724434 successfully announced in 57.0809 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:41:55.113 +07:00 [INF] Server desktop-vcgaaea:884ac2a8-d3e6-441e-a7eb-c92422031f89:38972:3cb381b9-4627-4df0-a20c-9952ed724434 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:41:55.700 +07:00 [INF] Server desktop-vcgaaea:884ac2a8-d3e6-441e-a7eb-c92422031f89:38972:3cb381b9-4627-4df0-a20c-9952ed724434 all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:41:58.688 +07:00 [INF] HTTP GET /scalar/v1 responded 200 in 1701.8530 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLIJ904OP:00000001","ConnectionId":"0HNILLIJ904OP","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:41:58.805 +07:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 200 in 13.0941 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLIJ904OP:0000000D","ConnectionId":"0HNILLIJ904OP","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:41:58.800 +07:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 304 in 102.9470 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLIJ904OP:00000003","ConnectionId":"0HNILLIJ904OP","MachineName":"DESKTOP-VCGAAEA","ThreadId":61,"EnvironmentName":"Development"}
2026-01-17 16:41:58.953 +07:00 [INF] HTTP GET /scalar/scalar.js responded 200 in 161.2932 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLIJ904OP:0000000B","ConnectionId":"0HNILLIJ904OP","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:41:58.800 +07:00 [INF] HTTP GET /scalar/scalar.js responded 304 in 101.4593 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLIJ904OP:00000005","ConnectionId":"0HNILLIJ904OP","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:41:59.013 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:41:59.108 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:41:59.191 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:41:59.272 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:41:59.310 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:41:59.334 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:41:59.362 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:41:59.417 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:41:59.441 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:42:00.343 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:42:06.232 +07:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[@tenantIdentifier='?' (Size = 50), @tenantIdentifier0='?' (Size = 100), @tenantIdentifier1='?' (Size = 36) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[ConnectionString], [t].[CreatedAt], [t].[CreatedBy], [t].[Culture], [t].[DeletedAt], [t].[DeletedBy], [t].[Identifier], [t].[IsDeleted], [t].[LogoUrl], [t].[MaxStorageBytes], [t].[MaxUsers], [t].[Name], [t].[Plan], [t].[PlanExpiryDate], [t].[PrimaryColor], [t].[Settings], [t].[Status], [t].[Subdomain], [t].[TimeZone], [t].[UpdatedAt], [t].[UpdatedBy]
FROM [master].[Tenants] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND ([t].[Identifier] = @tenantIdentifier OR [t].[Subdomain] = @tenantIdentifier0 OR CONVERT(varchar(36), [t].[Id]) = @tenantIdentifier1) {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNILLIJ904OQ:00000001","RequestPath":"/favicon.ico","ConnectionId":"0HNILLIJ904OQ","MachineName":"DESKTOP-VCGAAEA","ThreadId":66,"EnvironmentName":"Development"}
2026-01-17 16:42:06.268 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CrmSaas.Api.Data.MasterDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2ffdd659-a0ed-4c87-ae66-703e64647725
Error Number:208,State:1,Class:16 {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","RequestId":"0HNILLIJ904OQ:00000001","RequestPath":"/favicon.ico","ConnectionId":"0HNILLIJ904OQ","MachineName":"DESKTOP-VCGAAEA","ThreadId":66,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2ffdd659-a0ed-4c87-ae66-703e64647725
Error Number:208,State:1,Class:16
2026-01-17 16:42:06.603 +07:00 [ERR] HTTP GET /favicon.ico responded 500 in 574.4557 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLIJ904OQ:00000001","ConnectionId":"0HNILLIJ904OQ","MachineName":"DESKTOP-VCGAAEA","ThreadId":66,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:2ffdd659-a0ed-4c87-ae66-703e64647725
Error Number:208,State:1,Class:16
2026-01-17 16:42:06.747 +07:00 [ERR] An unhandled exception occurred. TraceId: 0HNILLIJ904OQ:00000001 {"SourceContext":"CrmSaas.Api.Middleware.ExceptionHandlingMiddleware","RequestId":"0HNILLIJ904OQ:00000001","RequestPath":"/favicon.ico","ConnectionId":"0HNILLIJ904OQ","MachineName":"DESKTOP-VCGAAEA","ThreadId":66,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CrmSaas.Api.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\Middleware\ExceptionHandlingMiddleware.cs:line 27
ClientConnectionId:2ffdd659-a0ed-4c87-ae66-703e64647725
Error Number:208,State:1,Class:16
2026-01-17 16:42:12.073 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":65,"EnvironmentName":"Development"}
2026-01-17 16:42:16.070 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 307 in 1.8489 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLIJ904OR:00000001","ConnectionId":"0HNILLIJ904OR","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:19.483 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:44:20.600 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:44:21.301 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:44:21.975 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:44:21.988 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:44:22.882 +07:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:44:22.942 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Introducing FOREIGN KEY constraint 'FK_UserRole_User_UserId' on table 'UserRole' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint or index. See previous errors.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 417
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:1785,State:0,Class:16
2026-01-17 16:44:22.975 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:44:23.269 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:44:23.279 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:44:23.769 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:44:23.777 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:44:23.786 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:44:23.837 +07:00 [INF] Server desktop-vcgaaea:658c0a58-8c67-4b50-a618-fbd54b213daf:9760:a4a2e996-13f0-4321-99db-dfb6b18298b3 successfully announced in 16.2712 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 16:44:23.851 +07:00 [INF] Server desktop-vcgaaea:658c0a58-8c67-4b50-a618-fbd54b213daf:9760:a4a2e996-13f0-4321-99db-dfb6b18298b3 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 16:44:24.692 +07:00 [INF] Server desktop-vcgaaea:658c0a58-8c67-4b50-a618-fbd54b213daf:9760:a4a2e996-13f0-4321-99db-dfb6b18298b3 all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 16:44:27.071 +07:00 [INF] HTTP GET /scalar/v1 responded 200 in 1864.6940 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EI:00000001","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:44:27.151 +07:00 [INF] HTTP GET /scalar/scalar.js responded 304 in 50.6911 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EI:00000007","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:44:27.150 +07:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 304 in 47.9095 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EI:00000005","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 16:44:27.741 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:27.849 +07:00 [INF] HTTP GET /openapi/v1.json responded 200 in 334.5929 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EI:0000000D","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:44:27.874 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:27.919 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:27.940 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:27.961 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:28.004 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:28.051 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:28.099 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:28.140 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:28.203 +07:00 [ERR] Failed executing DbCommand (17ms) [Parameters=[@tenantIdentifier='?' (Size = 50), @tenantIdentifier0='?' (Size = 100), @tenantIdentifier1='?' (Size = 36) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[ConnectionString], [t].[CreatedAt], [t].[CreatedBy], [t].[Culture], [t].[DeletedAt], [t].[DeletedBy], [t].[Identifier], [t].[IsDeleted], [t].[LogoUrl], [t].[MaxStorageBytes], [t].[MaxUsers], [t].[Name], [t].[Plan], [t].[PlanExpiryDate], [t].[PrimaryColor], [t].[Settings], [t].[Status], [t].[Subdomain], [t].[TimeZone], [t].[UpdatedAt], [t].[UpdatedBy]
FROM [master].[Tenants] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND ([t].[Identifier] = @tenantIdentifier OR [t].[Subdomain] = @tenantIdentifier0 OR CONVERT(varchar(36), [t].[Id]) = @tenantIdentifier1) {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNILLJVID6EI:0000000F","RequestPath":"/favicon.ico","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:44:28.282 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CrmSaas.Api.Data.MasterDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16 {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","RequestId":"0HNILLJVID6EI:0000000F","RequestPath":"/favicon.ico","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:28.510 +07:00 [ERR] HTTP GET /favicon.ico responded 500 in 843.3205 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EI:0000000F","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:28.637 +07:00 [ERR] An unhandled exception occurred. TraceId: 0HNILLJVID6EI:0000000F {"SourceContext":"CrmSaas.Api.Middleware.ExceptionHandlingMiddleware","RequestId":"0HNILLJVID6EI:0000000F","RequestPath":"/favicon.ico","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CrmSaas.Api.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\Middleware\ExceptionHandlingMiddleware.cs:line 27
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:28.773 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:33.073 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@tenantIdentifier='?' (Size = 50), @tenantIdentifier0='?' (Size = 100), @tenantIdentifier1='?' (Size = 36) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[ConnectionString], [t].[CreatedAt], [t].[CreatedBy], [t].[Culture], [t].[DeletedAt], [t].[DeletedBy], [t].[Identifier], [t].[IsDeleted], [t].[LogoUrl], [t].[MaxStorageBytes], [t].[MaxUsers], [t].[Name], [t].[Plan], [t].[PlanExpiryDate], [t].[PrimaryColor], [t].[Settings], [t].[Status], [t].[Subdomain], [t].[TimeZone], [t].[UpdatedAt], [t].[UpdatedBy]
FROM [master].[Tenants] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND ([t].[Identifier] = @tenantIdentifier OR [t].[Subdomain] = @tenantIdentifier0 OR CONVERT(varchar(36), [t].[Id]) = @tenantIdentifier1) {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNILLJVID6EI:00000011","RequestPath":"/favicon.ico","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:44:33.108 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CrmSaas.Api.Data.MasterDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16 {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","RequestId":"0HNILLJVID6EI:00000011","RequestPath":"/favicon.ico","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:33.271 +07:00 [ERR] HTTP GET /favicon.ico responded 500 in 263.9205 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EI:00000011","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:33.353 +07:00 [ERR] An unhandled exception occurred. TraceId: 0HNILLJVID6EI:00000011 {"SourceContext":"CrmSaas.Api.Middleware.ExceptionHandlingMiddleware","RequestId":"0HNILLJVID6EI:00000011","RequestPath":"/favicon.ico","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CrmSaas.Api.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\Middleware\ExceptionHandlingMiddleware.cs:line 27
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:34.953 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@tenantIdentifier='?' (Size = 50), @tenantIdentifier0='?' (Size = 100), @tenantIdentifier1='?' (Size = 36) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[ConnectionString], [t].[CreatedAt], [t].[CreatedBy], [t].[Culture], [t].[DeletedAt], [t].[DeletedBy], [t].[Identifier], [t].[IsDeleted], [t].[LogoUrl], [t].[MaxStorageBytes], [t].[MaxUsers], [t].[Name], [t].[Plan], [t].[PlanExpiryDate], [t].[PrimaryColor], [t].[Settings], [t].[Status], [t].[Subdomain], [t].[TimeZone], [t].[UpdatedAt], [t].[UpdatedBy]
FROM [master].[Tenants] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND ([t].[Identifier] = @tenantIdentifier OR [t].[Subdomain] = @tenantIdentifier0 OR CONVERT(varchar(36), [t].[Id]) = @tenantIdentifier1) {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNILLJVID6EI:00000013","RequestPath":"/favicon.ico","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:34.988 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CrmSaas.Api.Data.MasterDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16 {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","RequestId":"0HNILLJVID6EI:00000013","RequestPath":"/favicon.ico","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:35.155 +07:00 [ERR] HTTP GET /favicon.ico responded 500 in 206.9436 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EI:00000013","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:35.245 +07:00 [ERR] An unhandled exception occurred. TraceId: 0HNILLJVID6EI:00000013 {"SourceContext":"CrmSaas.Api.Middleware.ExceptionHandlingMiddleware","RequestId":"0HNILLJVID6EI:00000013","RequestPath":"/favicon.ico","ConnectionId":"0HNILLJVID6EI","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CrmSaas.Api.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\Middleware\ExceptionHandlingMiddleware.cs:line 27
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:56.569 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 204 in 2.6369 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EJ:00000001","ConnectionId":"0HNILLJVID6EJ","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:44:56.633 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@tenantIdentifier='?' (Size = 50), @tenantIdentifier0='?' (Size = 100), @tenantIdentifier1='?' (Size = 36) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[ConnectionString], [t].[CreatedAt], [t].[CreatedBy], [t].[Culture], [t].[DeletedAt], [t].[DeletedBy], [t].[Identifier], [t].[IsDeleted], [t].[LogoUrl], [t].[MaxStorageBytes], [t].[MaxUsers], [t].[Name], [t].[Plan], [t].[PlanExpiryDate], [t].[PrimaryColor], [t].[Settings], [t].[Status], [t].[Subdomain], [t].[TimeZone], [t].[UpdatedAt], [t].[UpdatedBy]
FROM [master].[Tenants] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND ([t].[Identifier] = @tenantIdentifier OR [t].[Subdomain] = @tenantIdentifier0 OR CONVERT(varchar(36), [t].[Id]) = @tenantIdentifier1) {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNILLJVID6EJ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNILLJVID6EJ","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:44:56.680 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CrmSaas.Api.Data.MasterDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16 {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","RequestId":"0HNILLJVID6EJ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNILLJVID6EJ","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:56.891 +07:00 [ERR] HTTP POST /api/auth/register responded 500 in 264.9172 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EJ:00000002","ConnectionId":"0HNILLJVID6EJ","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:44:57.038 +07:00 [ERR] An unhandled exception occurred. TraceId: 0HNILLJVID6EJ:00000002 {"SourceContext":"CrmSaas.Api.Middleware.ExceptionHandlingMiddleware","RequestId":"0HNILLJVID6EJ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNILLJVID6EJ","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CrmSaas.Api.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\Middleware\ExceptionHandlingMiddleware.cs:line 27
ClientConnectionId:0f7c9616-c6ae-4eec-a9fc-60ba86c78d34
Error Number:208,State:1,Class:16
2026-01-17 16:45:11.126 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:45:11.197 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 16:45:11.313 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":62,"EnvironmentName":"Development"}
2026-01-17 16:45:11.379 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:46:01.436 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 204 in 0.1724 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EK:00000001","ConnectionId":"0HNILLJVID6EK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:46:01.488 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@tenantIdentifier='?' (Size = 50), @tenantIdentifier0='?' (Size = 100), @tenantIdentifier1='?' (Size = 36) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[ConnectionString], [t].[CreatedAt], [t].[CreatedBy], [t].[Culture], [t].[DeletedAt], [t].[DeletedBy], [t].[Identifier], [t].[IsDeleted], [t].[LogoUrl], [t].[MaxStorageBytes], [t].[MaxUsers], [t].[Name], [t].[Plan], [t].[PlanExpiryDate], [t].[PrimaryColor], [t].[Settings], [t].[Status], [t].[Subdomain], [t].[TimeZone], [t].[UpdatedAt], [t].[UpdatedBy]
FROM [master].[Tenants] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND ([t].[Identifier] = @tenantIdentifier OR [t].[Subdomain] = @tenantIdentifier0 OR CONVERT(varchar(36), [t].[Id]) = @tenantIdentifier1) {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNILLJVID6EK:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNILLJVID6EK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:46:01.540 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CrmSaas.Api.Data.MasterDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:24238798-6ffb-4dba-9936-6117cd026e77
Error Number:208,State:1,Class:16 {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","RequestId":"0HNILLJVID6EK:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNILLJVID6EK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:24238798-6ffb-4dba-9936-6117cd026e77
Error Number:208,State:1,Class:16
2026-01-17 16:46:01.642 +07:00 [ERR] HTTP POST /api/auth/register responded 500 in 160.2838 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLJVID6EK:00000002","ConnectionId":"0HNILLJVID6EK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:24238798-6ffb-4dba-9936-6117cd026e77
Error Number:208,State:1,Class:16
2026-01-17 16:46:01.727 +07:00 [ERR] An unhandled exception occurred. TraceId: 0HNILLJVID6EK:00000002 {"SourceContext":"CrmSaas.Api.Middleware.ExceptionHandlingMiddleware","RequestId":"0HNILLJVID6EK:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNILLJVID6EK","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'master.Tenants'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CrmSaas.Api.MultiTenancy.TenantResolver.ResolveAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantResolver.cs:line 62
   at CrmSaas.Api.MultiTenancy.TenantMiddleware.InvokeAsync(HttpContext context, ITenantResolver tenantResolver, ITenantContext tenantContext) in D:\Draft\crm\backend\src\CrmSaas.Api\MultiTenancy\TenantMiddleware.cs:line 25
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CrmSaas.Api.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Draft\crm\backend\src\CrmSaas.Api\Middleware\ExceptionHandlingMiddleware.cs:line 27
ClientConnectionId:24238798-6ffb-4dba-9936-6117cd026e77
Error Number:208,State:1,Class:16
2026-01-17 16:46:11.359 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:47:26.489 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:47:26.542 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:47:38.344 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:47:38.383 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:47:39.380 +07:00 [ERR] Failed executing DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [master].[UserRole] (
    [Id] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRole] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRole_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [master].[Role] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRole_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [master].[User] ([Id]) ON DELETE CASCADE
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:49:15.923 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'Role'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:49:16.000 +07:00 [WRN] Entity 'Tenant' has a global query filter defined and is the required end of a relationship with the entity 'User'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:50:32.918 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:50:32.954 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:50:32.961 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:50:32.967 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:50:32.973 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:50:32.980 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:50:32.986 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:50:32.993 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:50:33.000 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:51:14.877 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:51:15.796 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:51:15.969 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:51:17.111 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:17.118 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:17.124 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:17.130 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:17.136 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:17.143 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:17.150 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:17.161 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:17.171 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:17.891 +07:00 [ERR] Failed executing DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [NotificationTemplates] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(100) NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Type] int NOT NULL,
    [SubjectTemplate] nvarchar(200) NOT NULL,
    [BodyTemplate] nvarchar(max) NOT NULL,
    [SmsTemplate] nvarchar(500) NULL,
    [DefaultChannels] int NOT NULL,
    [Priority] int NOT NULL,
    [IsActive] bit NOT NULL,
    [AvailablePlaceholders] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] uniqueidentifier NULL,
    [UpdatedAt] datetime2 NULL,
    [UpdatedBy] uniqueidentifier NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    [DeletedBy] uniqueidentifier NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_NotificationTemplates] PRIMARY KEY ([Id])
); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:51:17.905 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
Microsoft.Data.SqlClient.SqlException (0x80131904): There is already an object named 'NotificationTemplates' in the database.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementationAsync(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<<MigrateAsync>b__22_1>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 418
ClientConnectionId:026e11f2-ebb6-4529-849d-dcc1947e0962
Error Number:2714,State:6,Class:16
2026-01-17 16:51:17.932 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:51:18.109 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:51:18.114 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:51:18.201 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:51:18.206 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:51:18.210 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:51:18.267 +07:00 [INF] Server desktop-vcgaaea:f2a3e558-df23-4a91-91be-786a237d53e7:29932:a3e9c43d-3c59-4877-ac60-fe9c882291dd successfully announced in 44.9418 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:51:18.273 +07:00 [INF] Server desktop-vcgaaea:f2a3e558-df23-4a91-91be-786a237d53e7:29932:a3e9c43d-3c59-4877-ac60-fe9c882291dd is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:51:18.283 +07:00 [INF] Server desktop-vcgaaea:f2a3e558-df23-4a91-91be-786a237d53e7:29932:a3e9c43d-3c59-4877-ac60-fe9c882291dd all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:51:18.296 +07:00 [INF] 2 servers were removed due to timeout {"SourceContext":"Hangfire.Server.ServerWatchdog","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:51:19.220 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:19.363 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:51:19.497 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:51:19.497 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:51:33.070 +07:00 [INF] Server desktop-vcgaaea:f2a3e558-df23-4a91-91be-786a237d53e7:29932:a3e9c43d-3c59-4877-ac60-fe9c882291dd caught stopping signal... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:51:33.077 +07:00 [INF] Server desktop-vcgaaea:f2a3e558-df23-4a91-91be-786a237d53e7:29932:a3e9c43d-3c59-4877-ac60-fe9c882291dd All dispatchers stopped {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:51:33.087 +07:00 [INF] Server desktop-vcgaaea:f2a3e558-df23-4a91-91be-786a237d53e7:29932:a3e9c43d-3c59-4877-ac60-fe9c882291dd successfully reported itself as stopped in 3.9989 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:51:33.092 +07:00 [INF] Server desktop-vcgaaea:f2a3e558-df23-4a91-91be-786a237d53e7:29932:a3e9c43d-3c59-4877-ac60-fe9c882291dd has been stopped in total 16.08 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:52:56.417 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:52:57.598 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:52:58.037 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:52:59.220 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:52:59.228 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:52:59.234 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:52:59.240 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:52:59.246 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:52:59.253 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:52:59.259 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:52:59.266 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:52:59.272 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 16:52:59.995 +07:00 [INF] Seeding database... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:53:00.311 +07:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 500), @p3='?' (Size = 100), @p4='?' (Size = 100), @p5='?' (DbType = Guid), @p6='?' (Size = 100), @p7='?' (Size = 500), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (DbType = Guid), @p11='?' (Size = 100), @p12='?' (Size = 500), @p13='?' (Size = 100), @p14='?' (Size = 100), @p15='?' (DbType = Guid), @p16='?' (Size = 100), @p17='?' (Size = 500), @p18='?' (Size = 100), @p19='?' (Size = 100), @p20='?' (DbType = Guid), @p21='?' (Size = 100), @p22='?' (Size = 500), @p23='?' (Size = 100), @p24='?' (Size = 100), @p25='?' (DbType = Guid), @p26='?' (Size = 100), @p27='?' (Size = 500), @p28='?' (Size = 100), @p29='?' (Size = 100), @p30='?' (DbType = Guid), @p31='?' (Size = 100), @p32='?' (Size = 500), @p33='?' (Size = 100), @p34='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [master].[Permissions] ([Id], [Code], [Description], [Module], [Name])
VALUES (@p0, @p1, @p2, @p3, @p4),
(@p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14),
(@p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24),
(@p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:53:00.337 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CrmSaas.Api.Data.MasterDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'master.Permissions' with unique index 'IX_Permissions_Code'. The duplicate key value is (report.view).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c4b06099-536d-4bd9-9e2c-0af36cde67cf
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'master.Permissions' with unique index 'IX_Permissions_Code'. The duplicate key value is (report.view).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c4b06099-536d-4bd9-9e2c-0af36cde67cf
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-17 16:53:00.355 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'master.Permissions' with unique index 'IX_Permissions_Code'. The duplicate key value is (report.view).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c4b06099-536d-4bd9-9e2c-0af36cde67cf
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CrmSaas.Api.Data.DatabaseSeeder.SeedPermissionsAsync(MasterDbContext db) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 54
   at CrmSaas.Api.Data.DatabaseSeeder.SeedAsync(MasterDbContext masterDb, TenantDbContext tenantDb) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 12
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 422
2026-01-17 16:53:00.370 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:53:00.921 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:53:00.925 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:53:01.006 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:53:01.010 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:53:01.013 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:53:01.039 +07:00 [INF] Server desktop-vcgaaea:4420683d-c917-4cae-a6a6-8aa03e37d8e3:42544:0afd30d2-ca15-4859-93f6-be37e70d4c5d successfully announced in 13.4131 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 16:53:01.044 +07:00 [INF] Server desktop-vcgaaea:4420683d-c917-4cae-a6a6-8aa03e37d8e3:42544:0afd30d2-ca15-4859-93f6-be37e70d4c5d is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 16:53:01.053 +07:00 [INF] Server desktop-vcgaaea:4420683d-c917-4cae-a6a6-8aa03e37d8e3:42544:0afd30d2-ca15-4859-93f6-be37e70d4c5d all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 16:53:01.443 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:53:56.470 +07:00 [INF] Server desktop-vcgaaea:4420683d-c917-4cae-a6a6-8aa03e37d8e3:42544:0afd30d2-ca15-4859-93f6-be37e70d4c5d caught stopping signal... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":62,"EnvironmentName":"Development"}
2026-01-17 16:53:56.491 +07:00 [INF] Server desktop-vcgaaea:4420683d-c917-4cae-a6a6-8aa03e37d8e3:42544:0afd30d2-ca15-4859-93f6-be37e70d4c5d All dispatchers stopped {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 16:53:56.502 +07:00 [INF] Server desktop-vcgaaea:4420683d-c917-4cae-a6a6-8aa03e37d8e3:42544:0afd30d2-ca15-4859-93f6-be37e70d4c5d successfully reported itself as stopped in 4.7334 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 16:53:56.505 +07:00 [INF] Server desktop-vcgaaea:4420683d-c917-4cae-a6a6-8aa03e37d8e3:42544:0afd30d2-ca15-4859-93f6-be37e70d4c5d has been stopped in total 29.8737 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":12,"EnvironmentName":"Development"}
2026-01-17 16:54:57.679 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:54:58.680 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:54:58.857 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:55:00.073 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:55:00.080 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:55:00.087 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:55:00.093 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:55:00.100 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:55:00.107 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:55:00.115 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:55:00.121 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:55:00.128 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 16:55:00.916 +07:00 [INF] Seeding database... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:55:01.643 +07:00 [ERR] Failed executing DbCommand (53ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (Size = 500), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (Size = 100), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Guid), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Guid), @p20='?' (Size = 500), @p21='?' (DbType = Boolean), @p22='?' (DbType = Boolean), @p23='?' (Size = 100), @p24='?' (DbType = Guid), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Guid), @p28='?' (DbType = DateTime2), @p29='?' (DbType = Guid), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Guid), @p33='?' (Size = 500), @p34='?' (DbType = Boolean), @p35='?' (DbType = Boolean), @p36='?' (Size = 100), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime2), @p42='?' (DbType = Guid), @p43='?' (DbType = Int32), @p44='?' (DbType = DateTime2), @p45='?' (DbType = Guid), @p46='?' (Size = 500), @p47='?' (DbType = Boolean), @p48='?' (DbType = Boolean), @p49='?' (Size = 100), @p50='?' (DbType = Guid), @p51='?' (DbType = DateTime2), @p52='?' (DbType = Guid), @p53='?' (DbType = Guid), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Guid), @p56='?' (DbType = Int32), @p57='?' (DbType = DateTime2), @p58='?' (DbType = Guid), @p59='?' (Size = 500), @p60='?' (DbType = Boolean), @p61='?' (DbType = Boolean), @p62='?' (Size = 100), @p63='?' (DbType = Guid), @p64='?' (DbType = DateTime2), @p65='?' (DbType = Guid), @p66='?' (DbType = Guid), @p67='?' (Size = 4000), @p68='?' (DbType = DateTime2), @p69='?' (DbType = Guid), @p70='?' (DbType = DateTime2), @p71='?' (DbType = Guid), @p72='?' (Size = 500), @p73='?' (DbType = Int32), @p74='?' (DbType = Int32), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Boolean), @p78='?' (DbType = Boolean), @p79='?' (DbType = Boolean), @p80='?' (Size = 100), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = Guid), @p86='?' (DbType = DateTime2), @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (Size = 500), @p90='?' (DbType = DateTime2), @p91='?' (DbType = Guid), @p92='?' (Size = 10), @p93='?' (DbType = DateTime2), @p94='?' (DbType = Guid), @p95='?' (Size = 100), @p96='?' (Size = 4000), @p97='?' (DbType = Boolean), @p98='?' (Size = 256), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (Size = 100), @p102='?' (DbType = Boolean), @p103='?' (DbType = DateTime2), @p104='?' (Size = 100), @p105='?' (DbType = DateTime2), @p106='?' (Size = 256), @p107='?' (Size = 4000), @p108='?' (DbType = DateTime2), @p109='?' (Size = 20), @p110='?' (Size = 4000), @p111='?' (DbType = Int32), @p112='?' (DbType = Guid), @p113='?' (Size = 100), @p114='?' (DbType = DateTime2), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (Size = 20), @p118='?' (DbType = DateTime2), @p119='?' (DbType = Guid), @p120='?' (DbType = DateTime2), @p121='?' (DbType = Guid), @p122='?' (Size = 500), @p123='?' (DbType = Boolean), @p124='?' (DbType = Boolean), @p125='?' (DbType = Boolean), @p126='?' (Size = 100), @p127='?' (DbType = Guid), @p128='?' (DbType = Int32), @p129='?' (DbType = Int32), @p130='?' (DbType = Guid), @p131='?' (DbType = DateTime2), @p132='?' (DbType = Guid), @p133='?' (DbType = Guid), @p134='?' (Size = 20), @p135='?' (DbType = DateTime2), @p136='?' (DbType = Guid), @p137='?' (DbType = DateTime2), @p138='?' (DbType = Guid), @p139='?' (Size = 500), @p140='?' (DbType = Boolean), @p141='?' (DbType = Boolean), @p142='?' (DbType = Boolean), @p143='?' (Size = 100), @p144='?' (DbType = Guid), @p145='?' (DbType = Int32), @p146='?' (DbType = Int32), @p147='?' (DbType = Guid), @p148='?' (DbType = DateTime2), @p149='?' (DbType = Guid), @p150='?' (DbType = Guid), @p151='?' (Size = 20), @p152='?' (DbType = DateTime2), @p153='?' (DbType = Guid), @p154='?' (DbType = DateTime2), @p155='?' (DbType = Guid), @p156='?' (Size = 500), @p157='?' (DbType = Boolean), @p158='?' (DbType = Boolean), @p159='?' (DbType = Boolean), @p160='?' (Size = 100), @p161='?' (DbType = Guid), @p162='?' (DbType = Int32), @p163='?' (DbType = Int32), @p164='?' (DbType = Guid), @p165='?' (DbType = DateTime2), @p166='?' (DbType = Guid), @p167='?' (DbType = Guid), @p168='?' (Size = 20), @p169='?' (DbType = DateTime2), @p170='?' (DbType = Guid), @p171='?' (DbType = DateTime2), @p172='?' (DbType = Guid), @p173='?' (Size = 500), @p174='?' (DbType = Boolean), @p175='?' (DbType = Boolean), @p176='?' (DbType = Boolean), @p177='?' (Size = 100), @p178='?' (DbType = Guid), @p179='?' (DbType = Int32), @p180='?' (DbType = Int32), @p181='?' (DbType = Guid), @p182='?' (DbType = DateTime2), @p183='?' (DbType = Guid), @p184='?' (DbType = Guid), @p185='?' (Size = 20), @p186='?' (DbType = DateTime2), @p187='?' (DbType = Guid), @p188='?' (DbType = DateTime2), @p189='?' (DbType = Guid), @p190='?' (Size = 500), @p191='?' (DbType = Boolean), @p192='?' (DbType = Boolean), @p193='?' (DbType = Boolean), @p194='?' (Size = 100), @p195='?' (DbType = Guid), @p196='?' (DbType = Int32), @p197='?' (DbType = Int32), @p198='?' (DbType = Guid), @p199='?' (DbType = DateTime2), @p200='?' (DbType = Guid), @p201='?' (DbType = Guid), @p202='?' (Size = 20), @p203='?' (DbType = DateTime2), @p204='?' (DbType = Guid), @p205='?' (DbType = DateTime2), @p206='?' (DbType = Guid), @p207='?' (Size = 500), @p208='?' (DbType = Boolean), @p209='?' (DbType = Boolean), @p210='?' (DbType = Boolean), @p211='?' (Size = 100), @p212='?' (DbType = Guid), @p213='?' (DbType = Int32), @p214='?' (DbType = Int32), @p215='?' (DbType = Guid), @p216='?' (DbType = DateTime2), @p217='?' (DbType = Guid), @p218='?' (DbType = Guid), @p219='?' (DbType = Guid), @p220='?' (DbType = Guid), @p221='?' (DbType = Guid), @p222='?' (DbType = Guid), @p223='?' (DbType = Guid), @p224='?' (DbType = Guid), @p225='?' (DbType = Guid), @p226='?' (DbType = Guid), @p227='?' (DbType = Guid), @p228='?' (DbType = Guid), @p229='?' (DbType = Guid), @p230='?' (DbType = Guid), @p231='?' (DbType = Guid), @p232='?' (DbType = Guid), @p233='?' (DbType = Guid), @p234='?' (DbType = Guid), @p235='?' (DbType = Guid), @p236='?' (DbType = Guid), @p237='?' (DbType = Guid), @p238='?' (DbType = Guid), @p239='?' (DbType = Guid), @p240='?' (DbType = Guid), @p241='?' (DbType = Guid), @p242='?' (DbType = Guid), @p243='?' (DbType = Guid), @p244='?' (DbType = Guid), @p245='?' (DbType = Guid), @p246='?' (DbType = Guid), @p247='?' (DbType = Guid), @p248='?' (DbType = Guid), @p249='?' (DbType = Guid), @p250='?' (DbType = Guid), @p251='?' (DbType = Guid), @p252='?' (DbType = Guid), @p253='?' (DbType = Guid), @p254='?' (DbType = Guid), @p255='?' (DbType = Guid), @p256='?' (DbType = Guid), @p257='?' (DbType = Guid), @p258='?' (DbType = Guid), @p259='?' (DbType = Guid), @p260='?' (DbType = Guid), @p261='?' (DbType = Guid), @p262='?' (DbType = Guid), @p263='?' (DbType = Guid), @p264='?' (DbType = Guid), @p265='?' (DbType = Guid), @p266='?' (DbType = Guid), @p267='?' (DbType = Guid), @p268='?' (DbType = Guid), @p269='?' (DbType = Guid), @p270='?' (DbType = Guid), @p271='?' (DbType = Guid), @p272='?' (DbType = Guid), @p273='?' (DbType = Guid), @p274='?' (DbType = Guid), @p275='?' (DbType = Guid), @p276='?' (DbType = Guid), @p277='?' (DbType = Guid), @p278='?' (DbType = Guid), @p279='?' (DbType = Guid), @p280='?' (DbType = Guid), @p281='?' (DbType = Guid), @p282='?' (DbType = Guid), @p283='?' (DbType = Guid), @p284='?' (DbType = Guid), @p285='?' (DbType = Guid), @p286='?' (DbType = Guid), @p287='?' (DbType = Guid), @p288='?' (DbType = Guid), @p289='?' (DbType = Guid), @p290='?' (DbType = Guid), @p291='?' (DbType = Guid), @p292='?' (DbType = Guid), @p293='?' (DbType = Guid), @p294='?' (DbType = Guid), @p295='?' (DbType = Guid), @p296='?' (DbType = Guid), @p297='?' (DbType = Guid), @p298='?' (DbType = Guid), @p299='?' (DbType = Guid), @p300='?' (DbType = Guid), @p301='?' (DbType = Guid), @p302='?' (DbType = Guid), @p303='?' (DbType = Guid), @p304='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Pipelines] ([Id], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [IsActive], [IsDefault], [IsDeleted], [Name], [SortOrder], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO [Roles] ([Id], [CreatedAt], [CreatedBy], [DataScope], [DeletedAt], [DeletedBy], [Description], [IsDeleted], [IsSystemRole], [Name], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26),
(@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52),
(@p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO [Slas] ([Id], [BusinessHours], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [FirstResponseTimeCritical], [FirstResponseTimeHigh], [FirstResponseTimeLow], [FirstResponseTimeMedium], [IsActive], [IsDefault], [IsDeleted], [Name], [ResolutionTimeCritical], [ResolutionTimeHigh], [ResolutionTimeLow], [ResolutionTimeMedium], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87);
INSERT INTO [Users] ([Id], [AvatarUrl], [CreatedAt], [CreatedBy], [Culture], [DeletedAt], [DeletedBy], [Email], [EmailConfirmationToken], [EmailConfirmed], [ExternalId], [ExternalProvider], [FailedLoginAttempts], [FirstName], [IsDeleted], [LastLoginAt], [LastName], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [Phone], [Preferences], [Status], [TenantId], [TimeZone], [UpdatedAt], [UpdatedBy])
VALUES (@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115);
INSERT INTO [PipelineStages] ([Id], [Color], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [IsDeleted], [IsLost], [IsWon], [Name], [PipelineId], [Probability], [SortOrder], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132),
(@p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149),
(@p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166),
(@p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183),
(@p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200),
(@p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217);
INSERT INTO [RolePermissions] ([Id], [PermissionId], [RoleId])
VALUES (@p218, @p219, @p220),
(@p221, @p222, @p223),
(@p224, @p225, @p226),
(@p227, @p228, @p229),
(@p230, @p231, @p232),
(@p233, @p234, @p235),
(@p236, @p237, @p238),
(@p239, @p240, @p241),
(@p242, @p243, @p244),
(@p245, @p246, @p247),
(@p248, @p249, @p250),
(@p251, @p252, @p253),
(@p254, @p255, @p256),
(@p257, @p258, @p259),
(@p260, @p261, @p262),
(@p263, @p264, @p265),
(@p266, @p267, @p268),
(@p269, @p270, @p271),
(@p272, @p273, @p274),
(@p275, @p276, @p277),
(@p278, @p279, @p280),
(@p281, @p282, @p283),
(@p284, @p285, @p286),
(@p287, @p288, @p289),
(@p290, @p291, @p292),
(@p293, @p294, @p295),
(@p296, @p297, @p298),
(@p299, @p300, @p301),
(@p302, @p303, @p304); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:55:01.685 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CrmSaas.Api.Data.TenantDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c1cfc711-3142-4c09-9884-eed945d5e6ec
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c1cfc711-3142-4c09-9884-eed945d5e6ec
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-17 16:55:01.712 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c1cfc711-3142-4c09-9884-eed945d5e6ec
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CrmSaas.Api.Data.TenantDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\TenantDbContext.cs:line 729
   at CrmSaas.Api.Data.DatabaseSeeder.SeedDefaultRolesAndUserAsync(TenantDbContext tenantDb, MasterDbContext masterDb) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 253
   at CrmSaas.Api.Data.DatabaseSeeder.SeedAsync(MasterDbContext masterDb, TenantDbContext tenantDb) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 14
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 422
2026-01-17 16:55:01.738 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:55:02.386 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:55:02.395 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:55:02.533 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:55:02.538 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:55:02.542 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":14,"EnvironmentName":"Development"}
2026-01-17 16:55:02.574 +07:00 [INF] Server desktop-vcgaaea:c24b5710-c817-468b-b61f-7342a5ee2318:41672:e12ff4c1-6c7a-427f-b53f-b3e8c5485440 successfully announced in 20.3422 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:02.580 +07:00 [INF] Server desktop-vcgaaea:c24b5710-c817-468b-b61f-7342a5ee2318:41672:e12ff4c1-6c7a-427f-b53f-b3e8c5485440 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:02.591 +07:00 [INF] Server desktop-vcgaaea:c24b5710-c817-468b-b61f-7342a5ee2318:41672:e12ff4c1-6c7a-427f-b53f-b3e8c5485440 all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:14.530 +07:00 [INF] Server desktop-vcgaaea:c24b5710-c817-468b-b61f-7342a5ee2318:41672:e12ff4c1-6c7a-427f-b53f-b3e8c5485440 caught stopping signal... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":59,"EnvironmentName":"Development"}
2026-01-17 16:55:14.535 +07:00 [INF] Server desktop-vcgaaea:c24b5710-c817-468b-b61f-7342a5ee2318:41672:e12ff4c1-6c7a-427f-b53f-b3e8c5485440 All dispatchers stopped {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:14.549 +07:00 [INF] Server desktop-vcgaaea:c24b5710-c817-468b-b61f-7342a5ee2318:41672:e12ff4c1-6c7a-427f-b53f-b3e8c5485440 successfully reported itself as stopped in 6.834 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:14.552 +07:00 [INF] Server desktop-vcgaaea:c24b5710-c817-468b-b61f-7342a5ee2318:41672:e12ff4c1-6c7a-427f-b53f-b3e8c5485440 has been stopped in total 17.4591 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:37.824 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:55:38.870 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:55:39.650 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 16:55:42.131 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:42.158 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:42.178 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:42.194 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:42.211 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:42.226 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:42.243 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:42.257 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:42.271 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:43.227 +07:00 [INF] Seeding database... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 16:55:44.603 +07:00 [ERR] Failed executing DbCommand (41ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (Size = 500), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (Size = 100), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Guid), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Guid), @p20='?' (Size = 500), @p21='?' (DbType = Boolean), @p22='?' (DbType = Boolean), @p23='?' (Size = 100), @p24='?' (DbType = Guid), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Guid), @p28='?' (DbType = DateTime2), @p29='?' (DbType = Guid), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Guid), @p33='?' (Size = 500), @p34='?' (DbType = Boolean), @p35='?' (DbType = Boolean), @p36='?' (Size = 100), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime2), @p42='?' (DbType = Guid), @p43='?' (DbType = Int32), @p44='?' (DbType = DateTime2), @p45='?' (DbType = Guid), @p46='?' (Size = 500), @p47='?' (DbType = Boolean), @p48='?' (DbType = Boolean), @p49='?' (Size = 100), @p50='?' (DbType = Guid), @p51='?' (DbType = DateTime2), @p52='?' (DbType = Guid), @p53='?' (DbType = Guid), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Guid), @p56='?' (DbType = Int32), @p57='?' (DbType = DateTime2), @p58='?' (DbType = Guid), @p59='?' (Size = 500), @p60='?' (DbType = Boolean), @p61='?' (DbType = Boolean), @p62='?' (Size = 100), @p63='?' (DbType = Guid), @p64='?' (DbType = DateTime2), @p65='?' (DbType = Guid), @p66='?' (DbType = Guid), @p67='?' (Size = 4000), @p68='?' (DbType = DateTime2), @p69='?' (DbType = Guid), @p70='?' (DbType = DateTime2), @p71='?' (DbType = Guid), @p72='?' (Size = 500), @p73='?' (DbType = Int32), @p74='?' (DbType = Int32), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Boolean), @p78='?' (DbType = Boolean), @p79='?' (DbType = Boolean), @p80='?' (Size = 100), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = Guid), @p86='?' (DbType = DateTime2), @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (Size = 500), @p90='?' (DbType = DateTime2), @p91='?' (DbType = Guid), @p92='?' (Size = 10), @p93='?' (DbType = DateTime2), @p94='?' (DbType = Guid), @p95='?' (Size = 100), @p96='?' (Size = 4000), @p97='?' (DbType = Boolean), @p98='?' (Size = 256), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (Size = 100), @p102='?' (DbType = Boolean), @p103='?' (DbType = DateTime2), @p104='?' (Size = 100), @p105='?' (DbType = DateTime2), @p106='?' (Size = 256), @p107='?' (Size = 4000), @p108='?' (DbType = DateTime2), @p109='?' (Size = 20), @p110='?' (Size = 4000), @p111='?' (DbType = Int32), @p112='?' (DbType = Guid), @p113='?' (Size = 100), @p114='?' (DbType = DateTime2), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (Size = 20), @p118='?' (DbType = DateTime2), @p119='?' (DbType = Guid), @p120='?' (DbType = DateTime2), @p121='?' (DbType = Guid), @p122='?' (Size = 500), @p123='?' (DbType = Boolean), @p124='?' (DbType = Boolean), @p125='?' (DbType = Boolean), @p126='?' (Size = 100), @p127='?' (DbType = Guid), @p128='?' (DbType = Int32), @p129='?' (DbType = Int32), @p130='?' (DbType = Guid), @p131='?' (DbType = DateTime2), @p132='?' (DbType = Guid), @p133='?' (DbType = Guid), @p134='?' (Size = 20), @p135='?' (DbType = DateTime2), @p136='?' (DbType = Guid), @p137='?' (DbType = DateTime2), @p138='?' (DbType = Guid), @p139='?' (Size = 500), @p140='?' (DbType = Boolean), @p141='?' (DbType = Boolean), @p142='?' (DbType = Boolean), @p143='?' (Size = 100), @p144='?' (DbType = Guid), @p145='?' (DbType = Int32), @p146='?' (DbType = Int32), @p147='?' (DbType = Guid), @p148='?' (DbType = DateTime2), @p149='?' (DbType = Guid), @p150='?' (DbType = Guid), @p151='?' (Size = 20), @p152='?' (DbType = DateTime2), @p153='?' (DbType = Guid), @p154='?' (DbType = DateTime2), @p155='?' (DbType = Guid), @p156='?' (Size = 500), @p157='?' (DbType = Boolean), @p158='?' (DbType = Boolean), @p159='?' (DbType = Boolean), @p160='?' (Size = 100), @p161='?' (DbType = Guid), @p162='?' (DbType = Int32), @p163='?' (DbType = Int32), @p164='?' (DbType = Guid), @p165='?' (DbType = DateTime2), @p166='?' (DbType = Guid), @p167='?' (DbType = Guid), @p168='?' (Size = 20), @p169='?' (DbType = DateTime2), @p170='?' (DbType = Guid), @p171='?' (DbType = DateTime2), @p172='?' (DbType = Guid), @p173='?' (Size = 500), @p174='?' (DbType = Boolean), @p175='?' (DbType = Boolean), @p176='?' (DbType = Boolean), @p177='?' (Size = 100), @p178='?' (DbType = Guid), @p179='?' (DbType = Int32), @p180='?' (DbType = Int32), @p181='?' (DbType = Guid), @p182='?' (DbType = DateTime2), @p183='?' (DbType = Guid), @p184='?' (DbType = Guid), @p185='?' (Size = 20), @p186='?' (DbType = DateTime2), @p187='?' (DbType = Guid), @p188='?' (DbType = DateTime2), @p189='?' (DbType = Guid), @p190='?' (Size = 500), @p191='?' (DbType = Boolean), @p192='?' (DbType = Boolean), @p193='?' (DbType = Boolean), @p194='?' (Size = 100), @p195='?' (DbType = Guid), @p196='?' (DbType = Int32), @p197='?' (DbType = Int32), @p198='?' (DbType = Guid), @p199='?' (DbType = DateTime2), @p200='?' (DbType = Guid), @p201='?' (DbType = Guid), @p202='?' (Size = 20), @p203='?' (DbType = DateTime2), @p204='?' (DbType = Guid), @p205='?' (DbType = DateTime2), @p206='?' (DbType = Guid), @p207='?' (Size = 500), @p208='?' (DbType = Boolean), @p209='?' (DbType = Boolean), @p210='?' (DbType = Boolean), @p211='?' (Size = 100), @p212='?' (DbType = Guid), @p213='?' (DbType = Int32), @p214='?' (DbType = Int32), @p215='?' (DbType = Guid), @p216='?' (DbType = DateTime2), @p217='?' (DbType = Guid), @p218='?' (DbType = Guid), @p219='?' (DbType = Guid), @p220='?' (DbType = Guid), @p221='?' (DbType = Guid), @p222='?' (DbType = Guid), @p223='?' (DbType = Guid), @p224='?' (DbType = Guid), @p225='?' (DbType = Guid), @p226='?' (DbType = Guid), @p227='?' (DbType = Guid), @p228='?' (DbType = Guid), @p229='?' (DbType = Guid), @p230='?' (DbType = Guid), @p231='?' (DbType = Guid), @p232='?' (DbType = Guid), @p233='?' (DbType = Guid), @p234='?' (DbType = Guid), @p235='?' (DbType = Guid), @p236='?' (DbType = Guid), @p237='?' (DbType = Guid), @p238='?' (DbType = Guid), @p239='?' (DbType = Guid), @p240='?' (DbType = Guid), @p241='?' (DbType = Guid), @p242='?' (DbType = Guid), @p243='?' (DbType = Guid), @p244='?' (DbType = Guid), @p245='?' (DbType = Guid), @p246='?' (DbType = Guid), @p247='?' (DbType = Guid), @p248='?' (DbType = Guid), @p249='?' (DbType = Guid), @p250='?' (DbType = Guid), @p251='?' (DbType = Guid), @p252='?' (DbType = Guid), @p253='?' (DbType = Guid), @p254='?' (DbType = Guid), @p255='?' (DbType = Guid), @p256='?' (DbType = Guid), @p257='?' (DbType = Guid), @p258='?' (DbType = Guid), @p259='?' (DbType = Guid), @p260='?' (DbType = Guid), @p261='?' (DbType = Guid), @p262='?' (DbType = Guid), @p263='?' (DbType = Guid), @p264='?' (DbType = Guid), @p265='?' (DbType = Guid), @p266='?' (DbType = Guid), @p267='?' (DbType = Guid), @p268='?' (DbType = Guid), @p269='?' (DbType = Guid), @p270='?' (DbType = Guid), @p271='?' (DbType = Guid), @p272='?' (DbType = Guid), @p273='?' (DbType = Guid), @p274='?' (DbType = Guid), @p275='?' (DbType = Guid), @p276='?' (DbType = Guid), @p277='?' (DbType = Guid), @p278='?' (DbType = Guid), @p279='?' (DbType = Guid), @p280='?' (DbType = Guid), @p281='?' (DbType = Guid), @p282='?' (DbType = Guid), @p283='?' (DbType = Guid), @p284='?' (DbType = Guid), @p285='?' (DbType = Guid), @p286='?' (DbType = Guid), @p287='?' (DbType = Guid), @p288='?' (DbType = Guid), @p289='?' (DbType = Guid), @p290='?' (DbType = Guid), @p291='?' (DbType = Guid), @p292='?' (DbType = Guid), @p293='?' (DbType = Guid), @p294='?' (DbType = Guid), @p295='?' (DbType = Guid), @p296='?' (DbType = Guid), @p297='?' (DbType = Guid), @p298='?' (DbType = Guid), @p299='?' (DbType = Guid), @p300='?' (DbType = Guid), @p301='?' (DbType = Guid), @p302='?' (DbType = Guid), @p303='?' (DbType = Guid), @p304='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Pipelines] ([Id], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [IsActive], [IsDefault], [IsDeleted], [Name], [SortOrder], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO [Roles] ([Id], [CreatedAt], [CreatedBy], [DataScope], [DeletedAt], [DeletedBy], [Description], [IsDeleted], [IsSystemRole], [Name], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26),
(@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52),
(@p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO [Slas] ([Id], [BusinessHours], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [FirstResponseTimeCritical], [FirstResponseTimeHigh], [FirstResponseTimeLow], [FirstResponseTimeMedium], [IsActive], [IsDefault], [IsDeleted], [Name], [ResolutionTimeCritical], [ResolutionTimeHigh], [ResolutionTimeLow], [ResolutionTimeMedium], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87);
INSERT INTO [Users] ([Id], [AvatarUrl], [CreatedAt], [CreatedBy], [Culture], [DeletedAt], [DeletedBy], [Email], [EmailConfirmationToken], [EmailConfirmed], [ExternalId], [ExternalProvider], [FailedLoginAttempts], [FirstName], [IsDeleted], [LastLoginAt], [LastName], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [Phone], [Preferences], [Status], [TenantId], [TimeZone], [UpdatedAt], [UpdatedBy])
VALUES (@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115);
INSERT INTO [PipelineStages] ([Id], [Color], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [IsDeleted], [IsLost], [IsWon], [Name], [PipelineId], [Probability], [SortOrder], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132),
(@p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149),
(@p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166),
(@p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183),
(@p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200),
(@p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217);
INSERT INTO [RolePermissions] ([Id], [PermissionId], [RoleId])
VALUES (@p218, @p219, @p220),
(@p221, @p222, @p223),
(@p224, @p225, @p226),
(@p227, @p228, @p229),
(@p230, @p231, @p232),
(@p233, @p234, @p235),
(@p236, @p237, @p238),
(@p239, @p240, @p241),
(@p242, @p243, @p244),
(@p245, @p246, @p247),
(@p248, @p249, @p250),
(@p251, @p252, @p253),
(@p254, @p255, @p256),
(@p257, @p258, @p259),
(@p260, @p261, @p262),
(@p263, @p264, @p265),
(@p266, @p267, @p268),
(@p269, @p270, @p271),
(@p272, @p273, @p274),
(@p275, @p276, @p277),
(@p278, @p279, @p280),
(@p281, @p282, @p283),
(@p284, @p285, @p286),
(@p287, @p288, @p289),
(@p290, @p291, @p292),
(@p293, @p294, @p295),
(@p296, @p297, @p298),
(@p299, @p300, @p301),
(@p302, @p303, @p304); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:55:44.661 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CrmSaas.Api.Data.TenantDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd82464d-c53f-4e8f-88c0-39bc3f0d60fa
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd82464d-c53f-4e8f-88c0-39bc3f0d60fa
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-17 16:55:44.903 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd82464d-c53f-4e8f-88c0-39bc3f0d60fa
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CrmSaas.Api.Data.TenantDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\TenantDbContext.cs:line 729
   at CrmSaas.Api.Data.DatabaseSeeder.SeedDefaultRolesAndUserAsync(TenantDbContext tenantDb, MasterDbContext masterDb) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 253
   at CrmSaas.Api.Data.DatabaseSeeder.SeedAsync(MasterDbContext masterDb, TenantDbContext tenantDb) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 14
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 422
2026-01-17 16:55:44.936 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:55:45.173 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:55:45.184 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:55:45.700 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:55:45.712 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:55:45.720 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:55:45.776 +07:00 [INF] Server desktop-vcgaaea:7f56104e-5138-413c-b1c2-6fbb149b9cff:36164:94207ecc-84eb-4aae-a9e9-b0f5f9e12806 successfully announced in 11.6852 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:55:45.787 +07:00 [INF] Server desktop-vcgaaea:7f56104e-5138-413c-b1c2-6fbb149b9cff:36164:94207ecc-84eb-4aae-a9e9-b0f5f9e12806 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:55:46.437 +07:00 [INF] Server desktop-vcgaaea:7f56104e-5138-413c-b1c2-6fbb149b9cff:36164:94207ecc-84eb-4aae-a9e9-b0f5f9e12806 all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 16:55:48.382 +07:00 [INF] HTTP GET /scalar/v1 responded 200 in 1435.4696 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLQAS5DU1:00000001","ConnectionId":"0HNILLQAS5DU1","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 16:55:48.440 +07:00 [INF] HTTP GET /scalar/scalar.js responded 304 in 44.0230 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLQAS5DU1:00000007","ConnectionId":"0HNILLQAS5DU1","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 16:55:48.440 +07:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 304 in 45.0520 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLQAS5DU1:00000005","ConnectionId":"0HNILLQAS5DU1","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 16:55:48.862 +07:00 [INF] HTTP GET /openapi/v1.json responded 200 in 297.4344 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLQAS5DU1:0000000B","ConnectionId":"0HNILLQAS5DU1","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:55:49.022 +07:00 [INF] HTTP GET /favicon.ico responded 404 in 230.7734 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLQAS5DU1:0000000D","ConnectionId":"0HNILLQAS5DU1","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 16:56:02.402 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:56:04.680 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 204 in 3.3169 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLQAS5DU2:00000001","ConnectionId":"0HNILLQAS5DU2","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:56:04.727 +07:00 [INF] HTTP POST /api/auth/register responded 404 in 14.9709 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILLQAS5DU2:00000002","ConnectionId":"0HNILLQAS5DU2","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 16:57:02.350 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":64,"EnvironmentName":"Development"}
2026-01-17 17:05:52.342 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 17:05:53.687 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 17:05:54.360 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 17:05:56.642 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:56.659 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:56.673 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:56.688 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:56.701 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:56.716 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:56.728 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:56.740 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:56.751 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:57.554 +07:00 [INF] Seeding database... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:05:58.789 +07:00 [ERR] Failed executing DbCommand (68ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (Size = 500), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (Size = 100), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Guid), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Guid), @p20='?' (Size = 500), @p21='?' (DbType = Boolean), @p22='?' (DbType = Boolean), @p23='?' (Size = 100), @p24='?' (DbType = Guid), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Guid), @p28='?' (DbType = DateTime2), @p29='?' (DbType = Guid), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Guid), @p33='?' (Size = 500), @p34='?' (DbType = Boolean), @p35='?' (DbType = Boolean), @p36='?' (Size = 100), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime2), @p42='?' (DbType = Guid), @p43='?' (DbType = Int32), @p44='?' (DbType = DateTime2), @p45='?' (DbType = Guid), @p46='?' (Size = 500), @p47='?' (DbType = Boolean), @p48='?' (DbType = Boolean), @p49='?' (Size = 100), @p50='?' (DbType = Guid), @p51='?' (DbType = DateTime2), @p52='?' (DbType = Guid), @p53='?' (DbType = Guid), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Guid), @p56='?' (DbType = Int32), @p57='?' (DbType = DateTime2), @p58='?' (DbType = Guid), @p59='?' (Size = 500), @p60='?' (DbType = Boolean), @p61='?' (DbType = Boolean), @p62='?' (Size = 100), @p63='?' (DbType = Guid), @p64='?' (DbType = DateTime2), @p65='?' (DbType = Guid), @p66='?' (DbType = Guid), @p67='?' (Size = 4000), @p68='?' (DbType = DateTime2), @p69='?' (DbType = Guid), @p70='?' (DbType = DateTime2), @p71='?' (DbType = Guid), @p72='?' (Size = 500), @p73='?' (DbType = Int32), @p74='?' (DbType = Int32), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Boolean), @p78='?' (DbType = Boolean), @p79='?' (DbType = Boolean), @p80='?' (Size = 100), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = Guid), @p86='?' (DbType = DateTime2), @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (Size = 500), @p90='?' (DbType = DateTime2), @p91='?' (DbType = Guid), @p92='?' (Size = 10), @p93='?' (DbType = DateTime2), @p94='?' (DbType = Guid), @p95='?' (Size = 100), @p96='?' (Size = 4000), @p97='?' (DbType = Boolean), @p98='?' (Size = 256), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (Size = 100), @p102='?' (DbType = Boolean), @p103='?' (DbType = DateTime2), @p104='?' (Size = 100), @p105='?' (DbType = DateTime2), @p106='?' (Size = 256), @p107='?' (Size = 4000), @p108='?' (DbType = DateTime2), @p109='?' (Size = 20), @p110='?' (Size = 4000), @p111='?' (DbType = Int32), @p112='?' (DbType = Guid), @p113='?' (Size = 100), @p114='?' (DbType = DateTime2), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (Size = 20), @p118='?' (DbType = DateTime2), @p119='?' (DbType = Guid), @p120='?' (DbType = DateTime2), @p121='?' (DbType = Guid), @p122='?' (Size = 500), @p123='?' (DbType = Boolean), @p124='?' (DbType = Boolean), @p125='?' (DbType = Boolean), @p126='?' (Size = 100), @p127='?' (DbType = Guid), @p128='?' (DbType = Int32), @p129='?' (DbType = Int32), @p130='?' (DbType = Guid), @p131='?' (DbType = DateTime2), @p132='?' (DbType = Guid), @p133='?' (DbType = Guid), @p134='?' (Size = 20), @p135='?' (DbType = DateTime2), @p136='?' (DbType = Guid), @p137='?' (DbType = DateTime2), @p138='?' (DbType = Guid), @p139='?' (Size = 500), @p140='?' (DbType = Boolean), @p141='?' (DbType = Boolean), @p142='?' (DbType = Boolean), @p143='?' (Size = 100), @p144='?' (DbType = Guid), @p145='?' (DbType = Int32), @p146='?' (DbType = Int32), @p147='?' (DbType = Guid), @p148='?' (DbType = DateTime2), @p149='?' (DbType = Guid), @p150='?' (DbType = Guid), @p151='?' (Size = 20), @p152='?' (DbType = DateTime2), @p153='?' (DbType = Guid), @p154='?' (DbType = DateTime2), @p155='?' (DbType = Guid), @p156='?' (Size = 500), @p157='?' (DbType = Boolean), @p158='?' (DbType = Boolean), @p159='?' (DbType = Boolean), @p160='?' (Size = 100), @p161='?' (DbType = Guid), @p162='?' (DbType = Int32), @p163='?' (DbType = Int32), @p164='?' (DbType = Guid), @p165='?' (DbType = DateTime2), @p166='?' (DbType = Guid), @p167='?' (DbType = Guid), @p168='?' (Size = 20), @p169='?' (DbType = DateTime2), @p170='?' (DbType = Guid), @p171='?' (DbType = DateTime2), @p172='?' (DbType = Guid), @p173='?' (Size = 500), @p174='?' (DbType = Boolean), @p175='?' (DbType = Boolean), @p176='?' (DbType = Boolean), @p177='?' (Size = 100), @p178='?' (DbType = Guid), @p179='?' (DbType = Int32), @p180='?' (DbType = Int32), @p181='?' (DbType = Guid), @p182='?' (DbType = DateTime2), @p183='?' (DbType = Guid), @p184='?' (DbType = Guid), @p185='?' (Size = 20), @p186='?' (DbType = DateTime2), @p187='?' (DbType = Guid), @p188='?' (DbType = DateTime2), @p189='?' (DbType = Guid), @p190='?' (Size = 500), @p191='?' (DbType = Boolean), @p192='?' (DbType = Boolean), @p193='?' (DbType = Boolean), @p194='?' (Size = 100), @p195='?' (DbType = Guid), @p196='?' (DbType = Int32), @p197='?' (DbType = Int32), @p198='?' (DbType = Guid), @p199='?' (DbType = DateTime2), @p200='?' (DbType = Guid), @p201='?' (DbType = Guid), @p202='?' (Size = 20), @p203='?' (DbType = DateTime2), @p204='?' (DbType = Guid), @p205='?' (DbType = DateTime2), @p206='?' (DbType = Guid), @p207='?' (Size = 500), @p208='?' (DbType = Boolean), @p209='?' (DbType = Boolean), @p210='?' (DbType = Boolean), @p211='?' (Size = 100), @p212='?' (DbType = Guid), @p213='?' (DbType = Int32), @p214='?' (DbType = Int32), @p215='?' (DbType = Guid), @p216='?' (DbType = DateTime2), @p217='?' (DbType = Guid), @p218='?' (DbType = Guid), @p219='?' (DbType = Guid), @p220='?' (DbType = Guid), @p221='?' (DbType = Guid), @p222='?' (DbType = Guid), @p223='?' (DbType = Guid), @p224='?' (DbType = Guid), @p225='?' (DbType = Guid), @p226='?' (DbType = Guid), @p227='?' (DbType = Guid), @p228='?' (DbType = Guid), @p229='?' (DbType = Guid), @p230='?' (DbType = Guid), @p231='?' (DbType = Guid), @p232='?' (DbType = Guid), @p233='?' (DbType = Guid), @p234='?' (DbType = Guid), @p235='?' (DbType = Guid), @p236='?' (DbType = Guid), @p237='?' (DbType = Guid), @p238='?' (DbType = Guid), @p239='?' (DbType = Guid), @p240='?' (DbType = Guid), @p241='?' (DbType = Guid), @p242='?' (DbType = Guid), @p243='?' (DbType = Guid), @p244='?' (DbType = Guid), @p245='?' (DbType = Guid), @p246='?' (DbType = Guid), @p247='?' (DbType = Guid), @p248='?' (DbType = Guid), @p249='?' (DbType = Guid), @p250='?' (DbType = Guid), @p251='?' (DbType = Guid), @p252='?' (DbType = Guid), @p253='?' (DbType = Guid), @p254='?' (DbType = Guid), @p255='?' (DbType = Guid), @p256='?' (DbType = Guid), @p257='?' (DbType = Guid), @p258='?' (DbType = Guid), @p259='?' (DbType = Guid), @p260='?' (DbType = Guid), @p261='?' (DbType = Guid), @p262='?' (DbType = Guid), @p263='?' (DbType = Guid), @p264='?' (DbType = Guid), @p265='?' (DbType = Guid), @p266='?' (DbType = Guid), @p267='?' (DbType = Guid), @p268='?' (DbType = Guid), @p269='?' (DbType = Guid), @p270='?' (DbType = Guid), @p271='?' (DbType = Guid), @p272='?' (DbType = Guid), @p273='?' (DbType = Guid), @p274='?' (DbType = Guid), @p275='?' (DbType = Guid), @p276='?' (DbType = Guid), @p277='?' (DbType = Guid), @p278='?' (DbType = Guid), @p279='?' (DbType = Guid), @p280='?' (DbType = Guid), @p281='?' (DbType = Guid), @p282='?' (DbType = Guid), @p283='?' (DbType = Guid), @p284='?' (DbType = Guid), @p285='?' (DbType = Guid), @p286='?' (DbType = Guid), @p287='?' (DbType = Guid), @p288='?' (DbType = Guid), @p289='?' (DbType = Guid), @p290='?' (DbType = Guid), @p291='?' (DbType = Guid), @p292='?' (DbType = Guid), @p293='?' (DbType = Guid), @p294='?' (DbType = Guid), @p295='?' (DbType = Guid), @p296='?' (DbType = Guid), @p297='?' (DbType = Guid), @p298='?' (DbType = Guid), @p299='?' (DbType = Guid), @p300='?' (DbType = Guid), @p301='?' (DbType = Guid), @p302='?' (DbType = Guid), @p303='?' (DbType = Guid), @p304='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Pipelines] ([Id], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [IsActive], [IsDefault], [IsDeleted], [Name], [SortOrder], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO [Roles] ([Id], [CreatedAt], [CreatedBy], [DataScope], [DeletedAt], [DeletedBy], [Description], [IsDeleted], [IsSystemRole], [Name], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26),
(@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52),
(@p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO [Slas] ([Id], [BusinessHours], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [FirstResponseTimeCritical], [FirstResponseTimeHigh], [FirstResponseTimeLow], [FirstResponseTimeMedium], [IsActive], [IsDefault], [IsDeleted], [Name], [ResolutionTimeCritical], [ResolutionTimeHigh], [ResolutionTimeLow], [ResolutionTimeMedium], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87);
INSERT INTO [Users] ([Id], [AvatarUrl], [CreatedAt], [CreatedBy], [Culture], [DeletedAt], [DeletedBy], [Email], [EmailConfirmationToken], [EmailConfirmed], [ExternalId], [ExternalProvider], [FailedLoginAttempts], [FirstName], [IsDeleted], [LastLoginAt], [LastName], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [Phone], [Preferences], [Status], [TenantId], [TimeZone], [UpdatedAt], [UpdatedBy])
VALUES (@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115);
INSERT INTO [PipelineStages] ([Id], [Color], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [IsDeleted], [IsLost], [IsWon], [Name], [PipelineId], [Probability], [SortOrder], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132),
(@p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149),
(@p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166),
(@p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183),
(@p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200),
(@p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217);
INSERT INTO [RolePermissions] ([Id], [PermissionId], [RoleId])
VALUES (@p218, @p219, @p220),
(@p221, @p222, @p223),
(@p224, @p225, @p226),
(@p227, @p228, @p229),
(@p230, @p231, @p232),
(@p233, @p234, @p235),
(@p236, @p237, @p238),
(@p239, @p240, @p241),
(@p242, @p243, @p244),
(@p245, @p246, @p247),
(@p248, @p249, @p250),
(@p251, @p252, @p253),
(@p254, @p255, @p256),
(@p257, @p258, @p259),
(@p260, @p261, @p262),
(@p263, @p264, @p265),
(@p266, @p267, @p268),
(@p269, @p270, @p271),
(@p272, @p273, @p274),
(@p275, @p276, @p277),
(@p278, @p279, @p280),
(@p281, @p282, @p283),
(@p284, @p285, @p286),
(@p287, @p288, @p289),
(@p290, @p291, @p292),
(@p293, @p294, @p295),
(@p296, @p297, @p298),
(@p299, @p300, @p301),
(@p302, @p303, @p304); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:05:58.882 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CrmSaas.Api.Data.TenantDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e269db35-23ce-4b45-8223-1934021d4b3d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e269db35-23ce-4b45-8223-1934021d4b3d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-17 17:05:59.126 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e269db35-23ce-4b45-8223-1934021d4b3d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CrmSaas.Api.Data.TenantDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\TenantDbContext.cs:line 729
   at CrmSaas.Api.Data.DatabaseSeeder.SeedDefaultRolesAndUserAsync(TenantDbContext tenantDb, MasterDbContext masterDb) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 253
   at CrmSaas.Api.Data.DatabaseSeeder.SeedAsync(MasterDbContext masterDb, TenantDbContext tenantDb) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 14
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 422
2026-01-17 17:05:59.158 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:05:59.392 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:05:59.402 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:06:00.101 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:06:00.115 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:06:00.138 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:06:00.317 +07:00 [INF] Server desktop-vcgaaea:de72f203-2731-48f6-8f81-764f8a1cb9d1:37316:015aab1f-f232-4f0e-bf0e-0124ec140e2b successfully announced in 137.3005 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 17:06:00.487 +07:00 [INF] Server desktop-vcgaaea:de72f203-2731-48f6-8f81-764f8a1cb9d1:37316:015aab1f-f232-4f0e-bf0e-0124ec140e2b is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 17:06:00.654 +07:00 [INF] 1 servers were removed due to timeout {"SourceContext":"Hangfire.Server.ServerWatchdog","MachineName":"DESKTOP-VCGAAEA","ThreadId":23,"EnvironmentName":"Development"}
2026-01-17 17:06:01.540 +07:00 [INF] Server desktop-vcgaaea:de72f203-2731-48f6-8f81-764f8a1cb9d1:37316:015aab1f-f232-4f0e-bf0e-0124ec140e2b all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 17:06:03.588 +07:00 [INF] HTTP GET /scalar/v1 responded 200 in 1961.4810 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LF:00000001","ConnectionId":"0HNILM01RN7LF","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:06:03.678 +07:00 [INF] HTTP GET /scalar/scalar.js responded 304 in 52.2713 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LF:00000007","ConnectionId":"0HNILM01RN7LF","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:06:03.679 +07:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 304 in 50.1464 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LF:00000005","ConnectionId":"0HNILM01RN7LF","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 17:06:03.999 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:06:03.959 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 17:06:04.048 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":64,"EnvironmentName":"Development"}
2026-01-17 17:06:04.094 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:06:04.586 +07:00 [INF] HTTP GET /openapi/v1.json responded 200 in 413.5916 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LF:0000000B","ConnectionId":"0HNILM01RN7LF","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:07:04.014 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":64,"EnvironmentName":"Development"}
2026-01-17 17:08:04.212 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 17:08:51.735 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 204 in 3.6033 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LG:00000001","ConnectionId":"0HNILM01RN7LG","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 17:08:51.872 +07:00 [INF] HTTP POST /api/auth/register responded 404 in 93.1648 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LG:00000002","ConnectionId":"0HNILM01RN7LG","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:09:04.370 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:10:04.530 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 17:10:04.545 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 17:10:04.585 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 17:11:04.719 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:12:04.853 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":13,"EnvironmentName":"Development"}
2026-01-17 17:12:40.425 +07:00 [INF] HTTP POST /api/v1/tenants/register responded 400 in 174.7148 ms {"RequestHost":"localhost:5000","UserAgent":"curl/8.16.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LH:00000001","ConnectionId":"0HNILM01RN7LH","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 17:13:25.101 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:13:25.290 +07:00 [INF] Created tenant "231b7e83-cd9c-4a58-b40a-97ffe43589a2" - Test Corp {"SourceContext":"CrmSaas.Api.Services.TenantService","ActionId":"1c2e1131-f1dc-432e-9313-6f95329061a5","ActionName":"CrmSaas.Api.Controllers.TenantsController.Register (CrmSaas.Api)","RequestId":"0HNILM01RN7LI:00000001","RequestPath":"/api/v1/tenants/register","ConnectionId":"0HNILM01RN7LI","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:13:25.337 +07:00 [INF] HTTP POST /api/v1/tenants/register responded 201 in 25322.9812 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Microsoft Windows 10.0.26200; en-US) PowerShell/7.5.4","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LI:00000001","ConnectionId":"0HNILM01RN7LI","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:14:10.198 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 17:15:10.470 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:15:10.502 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 17:15:10.552 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 17:15:14.738 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 204 in 1.2095 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LJ:00000001","ConnectionId":"0HNILM01RN7LJ","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 17:15:14.804 +07:00 [INF] HTTP POST /api/auth/register responded 404 in 18.0832 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LJ:00000002","ConnectionId":"0HNILM01RN7LJ","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:16:10.636 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 17:17:06.205 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 204 in 0.1196 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LK:00000001","ConnectionId":"0HNILM01RN7LK","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 17:17:06.263 +07:00 [INF] HTTP POST /api/auth/register responded 404 in 17.5485 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LK:00000002","ConnectionId":"0HNILM01RN7LK","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 17:17:10.782 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 17:17:43.000 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 204 in 0.3539 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LL:00000001","ConnectionId":"0HNILM01RN7LL","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 17:17:43.037 +07:00 [INF] HTTP POST /api/auth/register responded 404 in 7.6479 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LL:00000002","ConnectionId":"0HNILM01RN7LL","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 17:18:10.952 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 17:18:41.732 +07:00 [INF] HTTP OPTIONS /api/auth/register responded 204 in 0.0788 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LM:00000001","ConnectionId":"0HNILM01RN7LM","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:18:41.761 +07:00 [INF] HTTP POST /api/auth/register responded 404 in 8.0334 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LM:00000002","ConnectionId":"0HNILM01RN7LM","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 17:19:11.060 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 17:20:11.328 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":15,"EnvironmentName":"Development"}
2026-01-17 17:20:11.356 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:20:11.425 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:21:02.073 +07:00 [INF] HTTP OPTIONS /api/v1/tenants/register responded 204 in 2.8649 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LN:00000001","ConnectionId":"0HNILM01RN7LN","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:21:02.219 +07:00 [INF] HTTP POST /api/v1/tenants/register responded 400 in 112.4191 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LN:00000002","ConnectionId":"0HNILM01RN7LN","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:21:11.525 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":19,"EnvironmentName":"Development"}
2026-01-17 17:22:11.627 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 17:23:05.772 +07:00 [INF] HTTP OPTIONS /api/v1/tenants/register responded 204 in 1.3155 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LO:00000001","ConnectionId":"0HNILM01RN7LO","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 17:23:05.832 +07:00 [INF] HTTP POST /api/v1/tenants/register responded 400 in 13.6158 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LO:00000002","ConnectionId":"0HNILM01RN7LO","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 17:23:07.777 +07:00 [INF] HTTP POST /api/v1/tenants/register responded 400 in 4.7642 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LO:00000003","ConnectionId":"0HNILM01RN7LO","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:23:11.749 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 17:23:13.299 +07:00 [INF] HTTP OPTIONS /api/v1/tenants/register responded 204 in 0.1044 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LO:00000004","ConnectionId":"0HNILM01RN7LO","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:23:13.326 +07:00 [INF] HTTP POST /api/v1/tenants/register responded 400 in 2.3761 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LO:00000005","ConnectionId":"0HNILM01RN7LO","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:24:11.895 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:25:12.029 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:25:12.065 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":3,"EnvironmentName":"Development"}
2026-01-17 17:25:12.302 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:25:26.829 +07:00 [INF] HTTP GET /favicon.ico responded 404 in 22.0577 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LP:00000001","ConnectionId":"0HNILM01RN7LP","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:26:12.259 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:27:12.397 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:27:49.139 +07:00 [INF] HTTP OPTIONS /api/auth/login responded 204 in 2.0065 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LQ:00000001","ConnectionId":"0HNILM01RN7LQ","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:27:49.184 +07:00 [INF] HTTP POST /api/auth/login responded 404 in 21.6653 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILM01RN7LQ:00000002","ConnectionId":"0HNILM01RN7LQ","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:35:31.958 +07:00 [INF] Start installing Hangfire SQL objects... {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 17:35:33.696 +07:00 [INF] Hangfire SQL objects installed. {"SourceContext":"Hangfire.SqlServer.SqlServerObjectsInstaller","MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 17:35:34.554 +07:00 [INF] Applying database migrations... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":2,"EnvironmentName":"Development"}
2026-01-17 17:35:38.167 +07:00 [WRN] Entity 'Activity' has a global query filter defined and is the required end of a relationship with the entity 'ActivityReminder'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:38.270 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'CalendarSyncConfiguration'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:38.291 +07:00 [WRN] Entity 'Order' has a global query filter defined and is the required end of a relationship with the entity 'OrderItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:38.310 +07:00 [WRN] Entity 'Quotation' has a global query filter defined and is the required end of a relationship with the entity 'QuotationItem'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:38.344 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'RefreshToken'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:38.380 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'RolePermission'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:38.404 +07:00 [WRN] Entity 'User' has a global query filter defined and is the required end of a relationship with the entity 'UserNotificationPreference'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:38.424 +07:00 [WRN] Entity 'Role' has a global query filter defined and is the required end of a relationship with the entity 'UserRole'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:38.444 +07:00 [WRN] Entity 'Workflow' has a global query filter defined and is the required end of a relationship with the entity 'WorkflowRule'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information. {"EventId":{"Id":10622,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.PossibleIncorrectRequiredNavigationWithQueryFilterInteractionWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:39.413 +07:00 [INF] Seeding database... {"MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:41.122 +07:00 [ERR] Failed executing DbCommand (129ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (Size = 500), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (Size = 100), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Guid), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Guid), @p20='?' (Size = 500), @p21='?' (DbType = Boolean), @p22='?' (DbType = Boolean), @p23='?' (Size = 100), @p24='?' (DbType = Guid), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Guid), @p28='?' (DbType = DateTime2), @p29='?' (DbType = Guid), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Guid), @p33='?' (Size = 500), @p34='?' (DbType = Boolean), @p35='?' (DbType = Boolean), @p36='?' (Size = 100), @p37='?' (DbType = Guid), @p38='?' (DbType = DateTime2), @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime2), @p42='?' (DbType = Guid), @p43='?' (DbType = Int32), @p44='?' (DbType = DateTime2), @p45='?' (DbType = Guid), @p46='?' (Size = 500), @p47='?' (DbType = Boolean), @p48='?' (DbType = Boolean), @p49='?' (Size = 100), @p50='?' (DbType = Guid), @p51='?' (DbType = DateTime2), @p52='?' (DbType = Guid), @p53='?' (DbType = Guid), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Guid), @p56='?' (DbType = Int32), @p57='?' (DbType = DateTime2), @p58='?' (DbType = Guid), @p59='?' (Size = 500), @p60='?' (DbType = Boolean), @p61='?' (DbType = Boolean), @p62='?' (Size = 100), @p63='?' (DbType = Guid), @p64='?' (DbType = DateTime2), @p65='?' (DbType = Guid), @p66='?' (DbType = Guid), @p67='?' (Size = 4000), @p68='?' (DbType = DateTime2), @p69='?' (DbType = Guid), @p70='?' (DbType = DateTime2), @p71='?' (DbType = Guid), @p72='?' (Size = 500), @p73='?' (DbType = Int32), @p74='?' (DbType = Int32), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Boolean), @p78='?' (DbType = Boolean), @p79='?' (DbType = Boolean), @p80='?' (Size = 100), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (DbType = Int32), @p84='?' (DbType = Int32), @p85='?' (DbType = Guid), @p86='?' (DbType = DateTime2), @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (Size = 500), @p90='?' (DbType = DateTime2), @p91='?' (DbType = Guid), @p92='?' (Size = 10), @p93='?' (DbType = DateTime2), @p94='?' (DbType = Guid), @p95='?' (Size = 100), @p96='?' (Size = 4000), @p97='?' (DbType = Boolean), @p98='?' (Size = 256), @p99='?' (Size = 50), @p100='?' (DbType = Int32), @p101='?' (Size = 100), @p102='?' (DbType = Boolean), @p103='?' (DbType = DateTime2), @p104='?' (Size = 100), @p105='?' (DbType = DateTime2), @p106='?' (Size = 256), @p107='?' (Size = 4000), @p108='?' (DbType = DateTime2), @p109='?' (Size = 20), @p110='?' (Size = 4000), @p111='?' (DbType = Int32), @p112='?' (DbType = Guid), @p113='?' (Size = 100), @p114='?' (DbType = DateTime2), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (Size = 20), @p118='?' (DbType = DateTime2), @p119='?' (DbType = Guid), @p120='?' (DbType = DateTime2), @p121='?' (DbType = Guid), @p122='?' (Size = 500), @p123='?' (DbType = Boolean), @p124='?' (DbType = Boolean), @p125='?' (DbType = Boolean), @p126='?' (Size = 100), @p127='?' (DbType = Guid), @p128='?' (DbType = Int32), @p129='?' (DbType = Int32), @p130='?' (DbType = Guid), @p131='?' (DbType = DateTime2), @p132='?' (DbType = Guid), @p133='?' (DbType = Guid), @p134='?' (Size = 20), @p135='?' (DbType = DateTime2), @p136='?' (DbType = Guid), @p137='?' (DbType = DateTime2), @p138='?' (DbType = Guid), @p139='?' (Size = 500), @p140='?' (DbType = Boolean), @p141='?' (DbType = Boolean), @p142='?' (DbType = Boolean), @p143='?' (Size = 100), @p144='?' (DbType = Guid), @p145='?' (DbType = Int32), @p146='?' (DbType = Int32), @p147='?' (DbType = Guid), @p148='?' (DbType = DateTime2), @p149='?' (DbType = Guid), @p150='?' (DbType = Guid), @p151='?' (Size = 20), @p152='?' (DbType = DateTime2), @p153='?' (DbType = Guid), @p154='?' (DbType = DateTime2), @p155='?' (DbType = Guid), @p156='?' (Size = 500), @p157='?' (DbType = Boolean), @p158='?' (DbType = Boolean), @p159='?' (DbType = Boolean), @p160='?' (Size = 100), @p161='?' (DbType = Guid), @p162='?' (DbType = Int32), @p163='?' (DbType = Int32), @p164='?' (DbType = Guid), @p165='?' (DbType = DateTime2), @p166='?' (DbType = Guid), @p167='?' (DbType = Guid), @p168='?' (Size = 20), @p169='?' (DbType = DateTime2), @p170='?' (DbType = Guid), @p171='?' (DbType = DateTime2), @p172='?' (DbType = Guid), @p173='?' (Size = 500), @p174='?' (DbType = Boolean), @p175='?' (DbType = Boolean), @p176='?' (DbType = Boolean), @p177='?' (Size = 100), @p178='?' (DbType = Guid), @p179='?' (DbType = Int32), @p180='?' (DbType = Int32), @p181='?' (DbType = Guid), @p182='?' (DbType = DateTime2), @p183='?' (DbType = Guid), @p184='?' (DbType = Guid), @p185='?' (Size = 20), @p186='?' (DbType = DateTime2), @p187='?' (DbType = Guid), @p188='?' (DbType = DateTime2), @p189='?' (DbType = Guid), @p190='?' (Size = 500), @p191='?' (DbType = Boolean), @p192='?' (DbType = Boolean), @p193='?' (DbType = Boolean), @p194='?' (Size = 100), @p195='?' (DbType = Guid), @p196='?' (DbType = Int32), @p197='?' (DbType = Int32), @p198='?' (DbType = Guid), @p199='?' (DbType = DateTime2), @p200='?' (DbType = Guid), @p201='?' (DbType = Guid), @p202='?' (Size = 20), @p203='?' (DbType = DateTime2), @p204='?' (DbType = Guid), @p205='?' (DbType = DateTime2), @p206='?' (DbType = Guid), @p207='?' (Size = 500), @p208='?' (DbType = Boolean), @p209='?' (DbType = Boolean), @p210='?' (DbType = Boolean), @p211='?' (Size = 100), @p212='?' (DbType = Guid), @p213='?' (DbType = Int32), @p214='?' (DbType = Int32), @p215='?' (DbType = Guid), @p216='?' (DbType = DateTime2), @p217='?' (DbType = Guid), @p218='?' (DbType = Guid), @p219='?' (DbType = Guid), @p220='?' (DbType = Guid), @p221='?' (DbType = Guid), @p222='?' (DbType = Guid), @p223='?' (DbType = Guid), @p224='?' (DbType = Guid), @p225='?' (DbType = Guid), @p226='?' (DbType = Guid), @p227='?' (DbType = Guid), @p228='?' (DbType = Guid), @p229='?' (DbType = Guid), @p230='?' (DbType = Guid), @p231='?' (DbType = Guid), @p232='?' (DbType = Guid), @p233='?' (DbType = Guid), @p234='?' (DbType = Guid), @p235='?' (DbType = Guid), @p236='?' (DbType = Guid), @p237='?' (DbType = Guid), @p238='?' (DbType = Guid), @p239='?' (DbType = Guid), @p240='?' (DbType = Guid), @p241='?' (DbType = Guid), @p242='?' (DbType = Guid), @p243='?' (DbType = Guid), @p244='?' (DbType = Guid), @p245='?' (DbType = Guid), @p246='?' (DbType = Guid), @p247='?' (DbType = Guid), @p248='?' (DbType = Guid), @p249='?' (DbType = Guid), @p250='?' (DbType = Guid), @p251='?' (DbType = Guid), @p252='?' (DbType = Guid), @p253='?' (DbType = Guid), @p254='?' (DbType = Guid), @p255='?' (DbType = Guid), @p256='?' (DbType = Guid), @p257='?' (DbType = Guid), @p258='?' (DbType = Guid), @p259='?' (DbType = Guid), @p260='?' (DbType = Guid), @p261='?' (DbType = Guid), @p262='?' (DbType = Guid), @p263='?' (DbType = Guid), @p264='?' (DbType = Guid), @p265='?' (DbType = Guid), @p266='?' (DbType = Guid), @p267='?' (DbType = Guid), @p268='?' (DbType = Guid), @p269='?' (DbType = Guid), @p270='?' (DbType = Guid), @p271='?' (DbType = Guid), @p272='?' (DbType = Guid), @p273='?' (DbType = Guid), @p274='?' (DbType = Guid), @p275='?' (DbType = Guid), @p276='?' (DbType = Guid), @p277='?' (DbType = Guid), @p278='?' (DbType = Guid), @p279='?' (DbType = Guid), @p280='?' (DbType = Guid), @p281='?' (DbType = Guid), @p282='?' (DbType = Guid), @p283='?' (DbType = Guid), @p284='?' (DbType = Guid), @p285='?' (DbType = Guid), @p286='?' (DbType = Guid), @p287='?' (DbType = Guid), @p288='?' (DbType = Guid), @p289='?' (DbType = Guid), @p290='?' (DbType = Guid), @p291='?' (DbType = Guid), @p292='?' (DbType = Guid), @p293='?' (DbType = Guid), @p294='?' (DbType = Guid), @p295='?' (DbType = Guid), @p296='?' (DbType = Guid), @p297='?' (DbType = Guid), @p298='?' (DbType = Guid), @p299='?' (DbType = Guid), @p300='?' (DbType = Guid), @p301='?' (DbType = Guid), @p302='?' (DbType = Guid), @p303='?' (DbType = Guid), @p304='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Pipelines] ([Id], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [IsActive], [IsDefault], [IsDeleted], [Name], [SortOrder], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO [Roles] ([Id], [CreatedAt], [CreatedBy], [DataScope], [DeletedAt], [DeletedBy], [Description], [IsDeleted], [IsSystemRole], [Name], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26),
(@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52),
(@p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO [Slas] ([Id], [BusinessHours], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [FirstResponseTimeCritical], [FirstResponseTimeHigh], [FirstResponseTimeLow], [FirstResponseTimeMedium], [IsActive], [IsDefault], [IsDeleted], [Name], [ResolutionTimeCritical], [ResolutionTimeHigh], [ResolutionTimeLow], [ResolutionTimeMedium], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87);
INSERT INTO [Users] ([Id], [AvatarUrl], [CreatedAt], [CreatedBy], [Culture], [DeletedAt], [DeletedBy], [Email], [EmailConfirmationToken], [EmailConfirmed], [ExternalId], [ExternalProvider], [FailedLoginAttempts], [FirstName], [IsDeleted], [LastLoginAt], [LastName], [LockoutEnd], [PasswordHash], [PasswordResetToken], [PasswordResetTokenExpiry], [Phone], [Preferences], [Status], [TenantId], [TimeZone], [UpdatedAt], [UpdatedBy])
VALUES (@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115);
INSERT INTO [PipelineStages] ([Id], [Color], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [IsDeleted], [IsLost], [IsWon], [Name], [PipelineId], [Probability], [SortOrder], [TenantId], [UpdatedAt], [UpdatedBy])
VALUES (@p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132),
(@p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149),
(@p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166),
(@p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183),
(@p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200),
(@p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217);
INSERT INTO [RolePermissions] ([Id], [PermissionId], [RoleId])
VALUES (@p218, @p219, @p220),
(@p221, @p222, @p223),
(@p224, @p225, @p226),
(@p227, @p228, @p229),
(@p230, @p231, @p232),
(@p233, @p234, @p235),
(@p236, @p237, @p238),
(@p239, @p240, @p241),
(@p242, @p243, @p244),
(@p245, @p246, @p247),
(@p248, @p249, @p250),
(@p251, @p252, @p253),
(@p254, @p255, @p256),
(@p257, @p258, @p259),
(@p260, @p261, @p262),
(@p263, @p264, @p265),
(@p266, @p267, @p268),
(@p269, @p270, @p271),
(@p272, @p273, @p274),
(@p275, @p276, @p277),
(@p278, @p279, @p280),
(@p281, @p282, @p283),
(@p284, @p285, @p286),
(@p287, @p288, @p289),
(@p290, @p291, @p292),
(@p293, @p294, @p295),
(@p296, @p297, @p298),
(@p299, @p300, @p301),
(@p302, @p303, @p304); {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 17:35:41.258 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CrmSaas.Api.Data.TenantDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fc67a00d-a6ce-4b52-813e-dbfad735654e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fc67a00d-a6ce-4b52-813e-dbfad735654e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-17 17:35:41.564 +07:00 [ERR] An error occurred while initializing the database. Please ensure SQL Server is running and connection string is correct. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Roles_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Tenant_TenantId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Tenant", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RolePermissions_Permission_PermissionId". The conflict occurred in database "CrmSaas_Master_Dev", table "dbo.Permission", column 'Id'.
The statement has been terminated.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fc67a00d-a6ce-4b52-813e-dbfad735654e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CrmSaas.Api.Data.TenantDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\TenantDbContext.cs:line 729
   at CrmSaas.Api.Data.DatabaseSeeder.SeedDefaultRolesAndUserAsync(TenantDbContext tenantDb, MasterDbContext masterDb) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 253
   at CrmSaas.Api.Data.DatabaseSeeder.SeedAsync(MasterDbContext masterDb, TenantDbContext tenantDb) in D:\Draft\crm\backend\src\CrmSaas.Api\Data\DatabaseSeeder.cs:line 14
   at Program.<Main>$(String[] args) in D:\Draft\crm\backend\src\CrmSaas.Api\Program.cs:line 422
2026-01-17 17:35:41.659 +07:00 [WRN] The application will continue running, but database operations may fail. {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 17:35:42.137 +07:00 [INF] Recurring jobs configured successfully {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 17:35:42.175 +07:00 [INF] Starting CRM SaaS API on Development {"MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 17:35:42.852 +07:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: localhost@CrmSaas_Master_Dev' {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 17:35:42.882 +07:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00. {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 17:35:42.904 +07:00 [INF] Using the following options for Hangfire Server:
    Worker count: 32
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15 {"SourceContext":"Hangfire.BackgroundJobServer","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 17:35:43.037 +07:00 [INF] Server desktop-vcgaaea:b1404cf6-f82d-457d-89fa-ad43b8f5dcba:48464:7bd086da-ed1d-475f-9d06-736ae7d2272e successfully announced in 43.5901 ms {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:35:43.112 +07:00 [INF] Server desktop-vcgaaea:b1404cf6-f82d-457d-89fa-ad43b8f5dcba:48464:7bd086da-ed1d-475f-9d06-736ae7d2272e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler... {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:35:43.283 +07:00 [INF] 1 servers were removed due to timeout {"SourceContext":"Hangfire.Server.ServerWatchdog","MachineName":"DESKTOP-VCGAAEA","ThreadId":20,"EnvironmentName":"Development"}
2026-01-17 17:35:44.619 +07:00 [INF] Server desktop-vcgaaea:b1404cf6-f82d-457d-89fa-ad43b8f5dcba:48464:7bd086da-ed1d-475f-9d06-736ae7d2272e all the dispatchers started {"SourceContext":"Hangfire.Server.BackgroundServerProcess","MachineName":"DESKTOP-VCGAAEA","ThreadId":18,"EnvironmentName":"Development"}
2026-01-17 17:35:47.401 +07:00 [INF] HTTP GET /scalar/v1 responded 200 in 2522.8126 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILMGL9KJVT:00000001","ConnectionId":"0HNILMGL9KJVT","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:35:47.506 +07:00 [INF] HTTP GET /scalar/scalar.js responded 304 in 91.4097 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILMGL9KJVT:00000005","ConnectionId":"0HNILMGL9KJVT","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 17:35:47.506 +07:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 304 in 91.4255 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILMGL9KJVT:00000003","ConnectionId":"0HNILMGL9KJVT","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 17:35:48.607 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":17,"EnvironmentName":"Development"}
2026-01-17 17:35:48.668 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased. {"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 17:35:48.863 +07:00 [INF] Retrying 0 failed webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":63,"EnvironmentName":"Development"}
2026-01-17 17:35:49.218 +07:00 [INF] SLA check and auto-escalation completed {"SourceContext":"CrmSaas.Api.Services.ScheduledJobsService","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:35:51.455 +07:00 [INF] HTTP GET /favicon.ico responded 404 in 244.7580 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILMGL9KJVT:0000000D","ConnectionId":"0HNILMGL9KJVT","MachineName":"DESKTOP-VCGAAEA","ThreadId":11,"EnvironmentName":"Development"}
2026-01-17 17:35:51.811 +07:00 [INF] HTTP GET /openapi/v1.json responded 200 in 674.8952 ms {"RequestHost":"localhost:5001","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILMGL9KJVT:0000000B","ConnectionId":"0HNILMGL9KJVT","MachineName":"DESKTOP-VCGAAEA","ThreadId":10,"EnvironmentName":"Development"}
2026-01-17 17:36:02.305 +07:00 [INF] HTTP OPTIONS /api/v1/auth/login responded 204 in 3.5748 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILMGL9KJVU:00000001","ConnectionId":"0HNILMGL9KJVU","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:36:04.626 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. {"EventId":{"Id":20504,"Name":"Microsoft.EntityFrameworkCore.Query.MultipleCollectionIncludeWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"a419ae41-2a38-4d50-a2fa-c4a6f344406d","ActionName":"CrmSaas.Api.Controllers.AuthController.Login (CrmSaas.Api)","RequestId":"0HNILMGL9KJVU:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNILMGL9KJVU","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:36:05.015 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 17:36:07.043 +07:00 [WRN] Login failed: User not found for email admin@crmsaas.local {"SourceContext":"CrmSaas.Api.Services.AuthService","ActionId":"a419ae41-2a38-4d50-a2fa-c4a6f344406d","ActionName":"CrmSaas.Api.Controllers.AuthController.Login (CrmSaas.Api)","RequestId":"0HNILMGL9KJVU:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNILMGL9KJVU","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 17:36:15.053 +07:00 [INF] HTTP POST /api/v1/auth/login responded 401 in 12620.5046 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILMGL9KJVU:00000002","ConnectionId":"0HNILMGL9KJVU","MachineName":"DESKTOP-VCGAAEA","ThreadId":16,"EnvironmentName":"Development"}
2026-01-17 17:36:27.927 +07:00 [INF] HTTP OPTIONS /api/v1/auth/login responded 204 in 0.7536 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILMGL9KJVV:00000001","ConnectionId":"0HNILMGL9KJVV","MachineName":"DESKTOP-VCGAAEA","ThreadId":7,"EnvironmentName":"Development"}
2026-01-17 17:36:49.687 +07:00 [WRN] Login failed: User not found for email admin@crmsaas.local {"SourceContext":"CrmSaas.Api.Services.AuthService","ActionId":"a419ae41-2a38-4d50-a2fa-c4a6f344406d","ActionName":"CrmSaas.Api.Controllers.AuthController.Login (CrmSaas.Api)","RequestId":"0HNILMGL9KJVV:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNILMGL9KJVV","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:36:49.720 +07:00 [INF] HTTP POST /api/v1/auth/login responded 401 in 17301.0965 ms {"RequestHost":"localhost:5000","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0","SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNILMGL9KJVV:00000002","ConnectionId":"0HNILMGL9KJVV","MachineName":"DESKTOP-VCGAAEA","ThreadId":9,"EnvironmentName":"Development"}
2026-01-17 17:37:13.762 +07:00 [INF] Processing 0 pending webhook deliveries {"SourceContext":"CrmSaas.Api.Services.WebhookDeliveryService","MachineName":"DESKTOP-VCGAAEA","ThreadId":66,"EnvironmentName":"Development"}
